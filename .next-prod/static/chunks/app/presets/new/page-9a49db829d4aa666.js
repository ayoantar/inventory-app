(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7340],{46069:(e,r,t)=>{Promise.resolve().then(t.bind(t,98518))},98518:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var s=t(95155),a=t(12108),n=t(35695),l=t(12115),o=t(6874),i=t.n(o),d=t(48947);let c=()=>"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9));function m(){let{data:e,status:r}=(0,a.useSession)(),t=(0,n.useRouter)(),[o,m]=(0,l.useState)(!1),[u,p]=(0,l.useState)([]),[x,h]=(0,l.useState)([]),[g,b]=(0,l.useState)({name:"",description:"",category:"",isTemplate:!1,notes:""}),[f,y]=(0,l.useState)([{tempId:c(),name:"",quantity:1,isRequired:!0,priority:0,notes:""}]);(0,l.useEffect)(()=>{if("loading"!==r){if("unauthenticated"===r)return void t.push("/auth/signin");j()}},[r,t]);let j=async()=>{try{let e=await fetch("/api/preset-categories?active=true");if(e.ok){let r=await e.json();p(r.categories||[])}}catch(e){console.error("Error fetching categories:",e)}},v=e=>{let{name:r,value:t,type:s}=e.target;b(a=>({...a,[r]:"checkbox"===s?e.target.checked:t}))},N=(e,r,t)=>{let s=[...f];s[e]={...s[e],[r]:t},y(s)},w=async e=>{if(e.preventDefault(),!g.name.trim())return void alert("Please enter a preset name");let r=f.filter(e=>e.name.trim());if(0===r.length)return void alert("Please add at least one item to the preset");let s=r.map(e=>{let{tempId:r,...t}=e;return t});m(!0);try{let e=await fetch("/api/presets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...g,items:s})});if(e.ok){let r=await e.json();t.push("/presets/".concat(r.id))}else{let r=await e.json();alert(r.error||"Failed to create preset")}}catch(e){console.error("Failed to create preset:",e),alert("Failed to create preset")}finally{m(!1)}};return"loading"===r?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,s.jsx)(d.A,{}),(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})})]}):e?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,s.jsx)(d.A,{}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("div",{className:"p-2 bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded-lg transition-colors",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-brand-secondary-text bg-clip-text text-transparent",children:"Create New Preset"})]}),(0,s.jsx)("p",{className:"text-brand-primary-text ml-11 max-w-2xl",children:"Define a reusable equipment set for consistent and efficient checkouts"})]}),(0,s.jsxs)(i(),{href:"/presets",className:"inline-flex items-center px-4 py-2.5 bg-gray-900/5 border border-gray-600 rounded-lg text-gray-300 hover font-medium transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Presets"]})]})}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-gray-900/5/80 backdrop-blur-sm rounded-2xl border border-gray-300/50 shadow-xl shadow-gray-200/20 p-8",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-brand-primary-text mb-6 flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-3"}),"Basic Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preset Name *"}),(0,s.jsx)("input",{type:"text",name:"name",value:g.name,onChange:v,required:!0,className:"w-full px-4 py-2 border border-gray-600 rounded-lg bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all duration-200",placeholder:"e.g., Camera Shoot Basic Kit"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category"}),(0,s.jsxs)("select",{name:"category",value:g.category,onChange:v,className:"w-full px-4 py-2 border border-gray-600 rounded-lg bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all duration-200",children:[(0,s.jsx)("option",{value:"",children:"Select Category"}),u.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))]})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,s.jsx)("textarea",{name:"description",value:g.description,onChange:v,rows:3,className:"w-full px-4 py-2 border border-gray-600 rounded-lg bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all duration-200",placeholder:"Describe what this preset is used for..."})]}),(0,s.jsx)("div",{className:"mt-6 flex items-center space-x-6",children:(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",name:"isTemplate",checked:g.isTemplate,onChange:v,className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 focus:ring-2"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-300",children:"Use as template"})]})})]}),(0,s.jsxs)("div",{className:"bg-gray-900/5/80 backdrop-blur-sm rounded-2xl border border-gray-300/50 shadow-xl shadow-gray-200/20 p-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-brand-primary-text flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-3"}),"Preset Items"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{y([...f,{tempId:c(),name:"",quantity:1,isRequired:!0,priority:f.length,notes:""}])},className:"inline-flex items-center px-4 py-2 bg-purple-600 hover text-white rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-[1.02]",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Item"]})]}),(0,s.jsx)("div",{className:"space-y-4",children:f.map((e,r)=>(0,s.jsxs)("div",{className:"bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded-xl p-4 border border-gray-200/50 transition-colors",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Item Name *"}),(0,s.jsx)("input",{type:"text",value:e.name,onChange:e=>N(r,"name",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-600 rounded-lg bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all duration-200",placeholder:"e.g., Canon EOS R5 Camera"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Quantity"}),(0,s.jsx)("input",{type:"number",value:e.quantity,onChange:e=>N(r,"quantity",parseInt(e.target.value)||1),min:"1",className:"w-full px-3 py-2 border border-gray-600 rounded-lg bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all duration-200"})]}),(0,s.jsxs)("div",{className:"flex items-end justify-between",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.isRequired,onChange:e=>N(r,"isRequired",e.target.checked),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 focus:ring-2"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-300",children:"Required"})]}),f.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>{f.length>1&&y(f.filter((e,t)=>t!==r))},className:"text-red-500 hover p-1 rounded transition-colors",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),(0,s.jsx)("input",{type:"text",value:e.notes||"",onChange:e=>N(r,"notes",e.target.value),className:"w-full px-3 py-2 border border-gray-600 rounded-lg bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all duration-200",placeholder:"Optional notes about this item..."})]})]},e.tempId))})]}),(0,s.jsxs)("div",{className:"bg-gray-900/5/80 backdrop-blur-sm rounded-2xl border border-gray-300/50 shadow-xl shadow-gray-200/20 p-8",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-brand-primary-text mb-6 flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-3"}),"Additional Notes"]}),(0,s.jsx)("textarea",{name:"notes",value:g.notes,onChange:v,rows:4,className:"w-full px-4 py-3 border border-gray-600 rounded-lg bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all duration-200",placeholder:"Any additional notes or instructions for this preset..."})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,s.jsx)(i(),{href:"/presets",className:"px-6 py-3 border border-gray-600 text-gray-300 hover rounded-xl font-medium transition-all duration-200",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-xl font-semibold transition-all duration-200 shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l-3-2.647z"})]}),"Creating..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Create Preset"]})})]})]})]})]}):null}}},e=>{e.O(0,[2108,7244,8947,8441,5964,7358],()=>e(e.s=46069)),_N_E=e.O()}]);