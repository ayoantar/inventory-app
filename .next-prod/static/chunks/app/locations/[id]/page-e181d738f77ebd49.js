(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{33842:(e,s,t)=>{Promise.resolve().then(t.bind(t,45183))},45183:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(95155),a=t(12108),i=t(35695),n=t(12115),l=t(6874),o=t.n(l),d=t(48947),c=t(21043);function x(){let{data:e,status:s}=(0,a.useSession)(),t=(0,i.useRouter)(),l=(0,i.useParams)(),[x,m]=(0,n.useState)(null),[h,u]=(0,n.useState)(!0),[b,j]=(0,n.useState)(""),[p,v]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if("loading"!==s){if("unauthenticated"===s)return void t.push("/auth/signin");(null==l?void 0:l.id)&&g()}},[s,t,null==l?void 0:l.id]);let g=async()=>{try{u(!0);let e=await fetch("/api/locations/".concat(null==l?void 0:l.id));if(e.ok){let s=await e.json();m(s)}else 404===e.status?j("Location not found"):j("Failed to load location")}catch(e){j("An error occurred while loading the location")}finally{u(!1)}},N=async()=>{if(x&&confirm('Are you sure you want to delete "'.concat(x.name,'"? This action cannot be undone.')))try{let e=await fetch("/api/locations/".concat(x.id),{method:"DELETE"});if(e.ok)t.push("/locations");else{let s=await e.json();alert(s.error||"Failed to delete location")}}catch(e){alert("An error occurred while deleting the location")}};if("loading"===s||h)return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,r.jsx)(d.A,{}),(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-orange"})})]});if(!e)return null;if(b)return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,r.jsx)(d.A,{}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-24 h-24 mx-auto bg-red-100 rounded-2xl flex items-center justify-center mb-6",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-brand-primary-text mb-3",children:b}),(0,r.jsx)(o(),{href:"/locations",className:"inline-flex items-center px-4 py-2 bg-gray-600 hover text-white rounded-lg transition-colors",children:"← Back to Locations"})]})})]});if(!x)return null;let f="ADMIN"===e.user.role||"MANAGER"===e.user.role,w="ADMIN"===e.user.role;return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,r.jsx)(d.A,{}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)(o(),{href:"/locations",className:"p-2 bg-gray-900/5 hover rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white/50 hover:text-white/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsx)("div",{className:"p-2 bg-orange-900/30 rounded-lg",children:(0,r.jsxs)("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 616 0z"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-brand-primary-text",children:x.name}),(0,r.jsx)("p",{className:"text-white/50 hover:text-white/80 transition-colors",children:"Location Details"})]})]})}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[f&&(0,r.jsxs)("button",{onClick:()=>v(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover text-white rounded-lg transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Location"]}),w&&(0,r.jsxs)("button",{onClick:N,className:"inline-flex items-center px-4 py-2 bg-red-600 hover text-white rounded-lg transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsxs)("div",{className:"bg-gray-900/5 backdrop-blur-sm rounded-2xl border border-gray-700 shadow-xl p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-brand-primary-text mb-4",children:"Location Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white/50 hover:text-white/80 transition-colors",children:"Building"}),(0,r.jsx)("p",{className:"text-brand-primary-text",children:x.building||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white/50 hover:text-white/80 transition-colors",children:"Floor"}),(0,r.jsx)("p",{className:"text-brand-primary-text",children:x.floor||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white/50 hover:text-white/80 transition-colors",children:"Room"}),(0,r.jsx)("p",{className:"text-brand-primary-text",children:x.room||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white/50 hover:text-white/80 transition-colors",children:"Capacity"}),(0,r.jsx)("p",{className:"text-brand-primary-text",children:x.capacity||"-"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white/50 hover:text-white/80 transition-colors",children:"Description"}),(0,r.jsx)("p",{className:"text-brand-primary-text",children:x.description||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-white/50 hover:text-white/80 transition-colors",children:"Status"}),(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(x.isActive?"bg-green-100 text-green-800":"bg-gray-100 dark:bg-gray-800 text-brand-primary-text"),children:x.isActive?"Active":"Inactive"})]})]})]}),x.assets.length>0&&(0,r.jsxs)("div",{className:"bg-gray-900/5 backdrop-blur-sm rounded-2xl border border-gray-700 shadow-xl p-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-brand-primary-text mb-4",children:["Assets (",x.assets.length,")"]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.assets.slice(0,8).map(e=>(0,r.jsx)(o(),{href:"/assets/".concat(e.id),className:"flex items-center p-3 bg-gray-900/5/50 rounded-lg hover transition-colors",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-brand-primary-text truncate",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-white/50 hover:text-white/80 transition-colors",children:[e.category," • ",e.status]})]})},e.id))}),x.assets.length>8&&(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsxs)(o(),{href:"/assets?location=".concat(x.name),className:"text-blue-600 hover text-sm font-medium",children:["View all ",x.assets.length," assets →"]})})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-900/5 backdrop-blur-sm rounded-2xl border border-gray-700 shadow-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-brand-primary-text mb-4",children:"Statistics"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-white/50 hover:text-white/80 transition-colors",children:"Assets"}),(0,r.jsx)("span",{className:"font-semibold text-brand-primary-text",children:x._count.assets})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-white/50 hover:text-white/80 transition-colors",children:"Asset Groups"}),(0,r.jsx)("span",{className:"font-semibold text-brand-primary-text",children:x._count.assetGroups})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-white/50 hover:text-white/80 transition-colors",children:"Transactions"}),(0,r.jsx)("span",{className:"font-semibold text-brand-primary-text",children:x._count.assetTransactions})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-900/5 backdrop-blur-sm rounded-2xl border border-gray-700 shadow-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-brand-primary-text mb-4",children:"Timestamps"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-white/50 hover:text-white/80 transition-colors",children:"Created"}),(0,r.jsx)("p",{className:"text-sm text-brand-primary-text",children:new Date(x.createdAt).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-white/50 hover:text-white/80 transition-colors",children:"Last Updated"}),(0,r.jsx)("p",{className:"text-sm text-brand-primary-text",children:new Date(x.updatedAt).toLocaleDateString()})]})]})]})]})]})]})}),(0,r.jsx)(c.A,{isOpen:p,onClose:()=>v(!1),onSave:()=>{g(),v(!1)},location:x,mode:"edit"})]})}}},e=>{e.O(0,[2108,7244,280,8947,1043,8441,5964,7358],()=>e(e.s=33842)),_N_E=e.O()}]);