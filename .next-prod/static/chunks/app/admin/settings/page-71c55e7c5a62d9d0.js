(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7122],{35695:(e,s,r)=>{"use strict";var t=r(18999);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},53356:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var t=r(95155),a=r(12115),n=r(12108),l=r(35695);function i(){let{data:e,status:s}=(0,n.useSession)(),r=(0,l.useRouter)(),[i,d]=(0,a.useState)(!0),[o,c]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),[b,g]=(0,a.useState)(""),[p,j]=(0,a.useState)("");(0,a.useEffect)(()=>{if("loading"!==s){if(!e)return void r.push("/auth/signin");if("ADMIN"!==e.user.role)return void r.push("/dashboard");v()}},[e,s,r]);let v=async()=>{try{let e=await fetch("/api/admin/settings");if(e.ok){let s=await e.json();x(s.settings),h(s.systemInfo)}else j("Failed to load settings")}catch(e){console.error("Failed to fetch settings:",e),j("Failed to load settings")}finally{d(!1)}},y=async()=>{if(m){c(!0),j(""),g("");try{let e=await fetch("/api/admin/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),s=await e.json();e.ok?(g("Settings saved successfully!"),x(s.settings),setTimeout(()=>g(""),3e3)):j(s.error||"Failed to save settings")}catch(e){console.error("Failed to save settings:",e),j("Failed to save settings")}finally{c(!1)}}},f=async e=>{j(""),g("");try{let s=await fetch("/api/admin/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e})}),r=await s.json();s.ok?(g(r.message),r.results&&console.log("System diagnostics results:",r.results),"create-backup"===e&&v(),setTimeout(()=>g(""),5e3)):j(r.error||"Failed to ".concat(e.replace("-"," ")))}catch(s){console.error("Failed to ".concat(e,":"),s),j("Failed to ".concat(e.replace("-"," ")))}};return"loading"===s||i?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-orange"})}):e&&"ADMIN"===e.user.role?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,t.jsx)("div",{className:"bg-white/90 dark:bg-brand-dark-blue/90 backdrop-blur-sm shadow-sm border-b border-gray-700",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"flex justify-between items-center py-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("button",{onClick:()=>r.back(),className:"text-white/60 dark:text-white/60 hover:text-slate-500 dark:hover:text-slate-200",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-brand-primary-text",children:"System Settings"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-brand-secondary-text",children:"Configure system-wide settings and preferences"})]})]})})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[b&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-green-800 text-sm",children:b})}),p&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-800 text-sm",children:p})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"bg-white/90 dark:bg-brand-dark-blue/90 backdrop-blur-sm rounded-lg border border-gray-700 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-50 rounded-lg mr-3",children:(0,t.jsxs)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-brand-primary-text",children:"General Settings"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"System Name"}),(0,t.jsx)("input",{type:"text",value:(null==m?void 0:m.systemName)||"",onChange:e=>x(s=>s?{...s,systemName:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-600 rounded-lg bg-gray-900 text-brand-primary-text focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Default Timezone"}),(0,t.jsxs)("select",{value:(null==m?void 0:m.timezone)||"UTC",onChange:e=>x(s=>s?{...s,timezone:e.target.value}:null),className:"w-full px-3 py-2 border border-gray-600 rounded-lg bg-gray-900 text-brand-primary-text focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"UTC",children:"UTC"}),(0,t.jsx)("option",{value:"America/New_York",children:"Eastern Time"}),(0,t.jsx)("option",{value:"America/Chicago",children:"Central Time"}),(0,t.jsx)("option",{value:"America/Denver",children:"Mountain Time"}),(0,t.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time"})]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"maintenance-mode",checked:(null==m?void 0:m.maintenanceMode)||!1,onChange:e=>x(s=>s?{...s,maintenanceMode:e.target.checked}:null),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded"}),(0,t.jsx)("label",{htmlFor:"maintenance-mode",className:"ml-2 block text-sm text-gray-300",children:"Enable maintenance mode"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white/90 dark:bg-brand-dark-blue/90 backdrop-blur-sm rounded-lg border border-gray-700 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("div",{className:"p-2 bg-red-50 rounded-lg mr-3",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-brand-primary-text",children:"Security Settings"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session Timeout (minutes)"}),(0,t.jsx)("input",{type:"number",value:(null==m?void 0:m.sessionTimeout)||60,onChange:e=>x(s=>s?{...s,sessionTimeout:parseInt(e.target.value)}:null),min:"15",max:"480",className:"w-full px-3 py-2 border border-gray-600 rounded-lg bg-gray-900 text-brand-primary-text focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Maximum Login Attempts"}),(0,t.jsx)("input",{type:"number",value:(null==m?void 0:m.maxLoginAttempts)||5,onChange:e=>x(s=>s?{...s,maxLoginAttempts:parseInt(e.target.value)}:null),min:"3",max:"10",className:"w-full px-3 py-2 border border-gray-600 rounded-lg bg-gray-900 text-brand-primary-text focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"force-password-change",checked:(null==m?void 0:m.forcePasswordChange)||!1,onChange:e=>x(s=>s?{...s,forcePasswordChange:e.target.checked}:null),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded"}),(0,t.jsx)("label",{htmlFor:"force-password-change",className:"ml-2 block text-sm text-gray-300",children:"Force password change on first login"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",id:"two-factor-auth",checked:(null==m?void 0:m.twoFactorAuth)||!1,onChange:e=>x(s=>s?{...s,twoFactorAuth:e.target.checked}:null),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded"}),(0,t.jsx)("label",{htmlFor:"two-factor-auth",className:"ml-2 block text-sm text-gray-300",children:"Enable two-factor authentication"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white/90 dark:bg-brand-dark-blue/90 backdrop-blur-sm rounded-lg border border-gray-700 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("div",{className:"p-2 bg-green-50 rounded-lg mr-3",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-brand-primary-text",children:"System Information"})]}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-brand-primary-text",children:"Version"}),(0,t.jsx)("span",{className:"text-brand-primary-text font-mono",children:null==u?void 0:u.version})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-brand-primary-text",children:"Database Status"}),(0,t.jsx)("span",{className:"text-green-600",children:null==u?void 0:u.databaseStatus})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-brand-primary-text",children:"Last Backup"}),(0,t.jsx)("span",{className:"text-brand-primary-text",children:(null==u?void 0:u.lastBackup)?new Date(u.lastBackup).toLocaleString():"Never"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-brand-primary-text",children:"Uptime"}),(0,t.jsx)("span",{className:"text-brand-primary-text",children:(null==u?void 0:u.uptime)?(e=>{let s=Math.floor(e/86400),r=Math.floor(e%86400/3600),t=Math.floor(e%3600/60);return"".concat(s,"d ").concat(r,"h ").concat(t,"m")})(u.uptime):"Unknown"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-brand-primary-text",children:"Server Load"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("span",{className:"".concat((null==u?void 0:u.serverLoad)==="Low"?"text-green-600":(null==u?void 0:u.serverLoad)==="Medium"?"text-yellow-600":(null==u?void 0:u.serverLoad)==="High"?"text-orange-600":"text-red-600"),children:null==u?void 0:u.serverLoad}),(null==u?void 0:u.serverLoadDetails)&&(0,t.jsxs)("div",{className:"text-xs text-gray-600 dark:text-brand-secondary-text mt-1",children:["Load: ",u.serverLoadDetails.loadAverage["1min"]," | Mem: ",u.serverLoadDetails.memory.usagePercent,"%"]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-brand-primary-text",children:"Memory Usage"}),(0,t.jsx)("span",{className:"text-brand-primary-text",children:(null==u?void 0:u.memoryUsage)?(e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]})(u.memoryUsage.heapUsed):"Unknown"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-brand-primary-text",children:"Platform"}),(0,t.jsxs)("span",{className:"text-brand-primary-text font-mono",children:[null==u?void 0:u.platform," (",null==u?void 0:u.arch,")"]})]})]}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:(0,t.jsxs)("a",{href:"/api/health",target:"_blank",className:"inline-flex items-center text-sm text-blue-600 hover",children:["View detailed health report",(0,t.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})]}),(0,t.jsxs)("div",{className:"mt-8 flex justify-end space-x-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>r.back(),className:"px-4 py-2 text-gray-300 hover border border-gray-600 rounded-lg hover transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{type:"button",disabled:o,onClick:y,className:"px-4 py-2 bg-blue-600 hover disabled:opacity-50 text-white rounded-lg transition-colors flex items-center space-x-2",children:[o&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,t.jsx)("span",{children:o?"Saving...":"Save Changes"})]})]}),(0,t.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)("button",{onClick:()=>f("create-backup"),className:"p-4 bg-white/90 dark:bg-brand-dark-blue/90 backdrop-blur-sm border border-gray-700 rounded-lg hover transition-colors text-left",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-brand-primary-text",children:"Create Backup"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-brand-secondary-text",children:"Generate system backup"})]})]})}),(0,t.jsx)("button",{onClick:()=>f("test-system"),className:"p-4 bg-white/90 dark:bg-brand-dark-blue/90 backdrop-blur-sm border border-gray-700 rounded-lg hover transition-colors text-left",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-green-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-brand-primary-text",children:"Test System"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-brand-secondary-text",children:"Run system diagnostics"})]})]})}),(0,t.jsx)("button",{onClick:()=>f("clear-cache"),className:"p-4 bg-white/90 dark:bg-brand-dark-blue/90 backdrop-blur-sm border border-gray-700 rounded-lg hover transition-colors text-left",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-orange-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-brand-primary-text",children:"Clear Cache"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-brand-secondary-text",children:"Clear system cache"})]})]})})]})]})]}):null}},95273:(e,s,r)=>{Promise.resolve().then(r.bind(r,53356))}},e=>{e.O(0,[2108,8441,5964,7358],()=>e(e.s=95273)),_N_E=e.O()}]);