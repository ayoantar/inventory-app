(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6830],{23683:(e,t,r)=>{Promise.resolve().then(r.bind(r,30466))},30466:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var a=r(95155),s=r(12108),n=r(35695),o=r(12115),l=r(6874),i=r.n(l),d=r(48947);let c={AVAILABLE:"bg-emerald-900/30 text-emerald-400 border-emerald-600",CHECKED_OUT:"bg-amber-900/30 text-amber-400 border-amber-600",IN_MAINTENANCE:"bg-red-900/30 text-red-400 border-red-600",RETIRED:"bg-gray-800 text-gray-400 border-gray-600",MISSING:"bg-red-900/30 text-red-400 border-red-600",RESERVED:"bg-blue-900/30 text-blue-400 border-blue-600"},x={EXCELLENT:"text-emerald-600",GOOD:"text-blue-600",FAIR:"text-amber-600",POOR:"text-orange-600",NEEDS_REPAIR:"text-red-600"};function m(e){var t,r;let{assetId:s,isOpen:n,onClose:l}=e,[d,m]=(0,o.useState)(null),[u,h]=(0,o.useState)(!1),[b,g]=(0,o.useState)("");(0,o.useEffect)(()=>{n&&s&&p()},[n,s]);let p=async()=>{if(s){h(!0),g("");try{let e=await fetch("/api/assets/".concat(s));if(e.ok){let t=await e.json();m(t)}else g("Failed to load asset details")}catch(e){g("An error occurred while loading asset details")}finally{h(!1)}}};return n?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-brand-primary-text",children:"Asset Preview"}),(0,a.jsx)("button",{onClick:l,className:"text-white/50 hover:text-white/80 transition-colors hover transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("div",{className:"p-6",children:[u&&(0,a.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),b&&(0,a.jsx)("div",{className:"p-4 bg-red-900/30 border border-red-600 rounded-md",children:(0,a.jsx)("p",{className:"text-sm text-red-400",children:b})}),d&&!u&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:d.imageUrl?(0,a.jsx)("img",{src:d.imageUrl,alt:d.name,className:"w-24 h-24 object-cover rounded-lg border border-gray-700"}):(0,a.jsx)("div",{className:"w-24 h-24 bg-gray-800 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-white/50 hover:text-white/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-brand-primary-text",children:d.name}),(0,a.jsxs)("p",{className:"text-brand-primary-text",children:[d.manufacturer," ",d.model]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium border ".concat(c[d.status]),children:d.status.replace("_"," ")}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(x[d.condition]),children:d.condition})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-brand-secondary-text",children:"Category"}),(0,a.jsx)("dd",{className:"text-sm text-brand-primary-text capitalize",children:d.category.toLowerCase().replace("_"," ")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-brand-secondary-text",children:"Client"}),(0,a.jsx)("dd",{className:"text-sm text-brand-primary-text",children:(null==(t=d.client)?void 0:t.name)||(0,a.jsx)("span",{className:"text-white/50 hover:text-white/80 transition-colors",children:"No Client"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-brand-secondary-text",children:"Location"}),(0,a.jsx)("dd",{className:"text-sm text-brand-primary-text",children:d.location||"-"})]}),d.serialNumber&&(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-brand-secondary-text",children:"Serial Number"}),(0,a.jsx)("dd",{className:"text-sm text-brand-primary-text font-mono",children:d.serialNumber})]}),d.purchasePrice&&(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-brand-secondary-text",children:"Purchase Price"}),(0,a.jsxs)("dd",{className:"text-sm text-brand-primary-text",children:["$",d.purchasePrice.toLocaleString()]})]}),d.currentValue&&(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-brand-secondary-text",children:"Current Value"}),(0,a.jsxs)("dd",{className:"text-sm text-brand-primary-text",children:["$",d.currentValue.toLocaleString()]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-brand-secondary-text",children:"Transactions"}),(0,a.jsx)("dd",{className:"text-sm text-brand-primary-text",children:(null==(r=d._count)?void 0:r.transactions)||0})]})]}),d.description&&(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-600 dark:text-brand-secondary-text mb-1",children:"Description"}),(0,a.jsx)("dd",{className:"text-sm text-brand-primary-text",children:(0,a.jsx)("div",{className:"space-y-1",children:d.description.split("\n").map((e,t)=>(0,a.jsx)("div",{children:e},t))})})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4 border-t border-gray-700",children:[(0,a.jsx)(i(),{href:"/assets/".concat(d.id),className:"flex-1 bg-blue-600 hover text-white px-4 py-2 rounded-md text-sm font-medium text-center transition-colors",onClick:l,children:"View Full Details"}),(0,a.jsx)("button",{onClick:l,className:"flex-1 px-4 py-2 border border-gray-600 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-800 transition-colors",children:"Close"})]})]})]})]})}):null}var u=r(62432);let h={AVAILABLE:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",CHECKED_OUT:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",IN_MAINTENANCE:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",RETIRED:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300",MISSING:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",RESERVED:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"},b={EXCELLENT:"text-green-600 dark:text-green-400",GOOD:"text-blue-600 dark:text-blue-400",FAIR:"text-yellow-600 dark:text-yellow-400",POOR:"text-red-600 dark:text-red-400",NEEDS_REPAIR:"text-red-700 dark:text-red-300"},g={CAMERA:"\uD83D\uDCF7",LENS:"\uD83D\uDD0D",LIGHTING:"\uD83D\uDCA1",AUDIO:"\uD83C\uDFB5",COMPUTER:"\uD83D\uDCBB",STORAGE:"\uD83D\uDCBE",ACCESSORY:"\uD83D\uDD27",FURNITURE:"\uD83E\uDE91",SOFTWARE:"\uD83D\uDCBF",INFORMATION_TECHNOLOGY:"\uD83D\uDDA5️",OTHER:"\uD83D\uDCE6"};function p(e){let{asset:t,selected:r=!1,onSelect:s,bulkMode:n=!1,onPreview:l,onDuplicate:d}=e,[c,x]=(0,o.useState)(!1),{addItem:m,hasItem:p,canAddItem:y}=(0,u._)(),v=e=>{if(!m(t,e)){let r=y(t,e);r.reason&&alert(r.reason)}x(!1)};return(0,a.jsxs)("div",{className:"bg-white dark:bg-brand-dark-blue/90 backdrop-blur-sm rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[n&&s&&(0,a.jsx)("input",{type:"checkbox",checked:r,onChange:s,className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(i(),{href:"/assets/".concat(t.id),className:"text-sm font-semibold text-brand-primary-text hover:text-blue-600 dark:hover:text-blue-400",children:t.name}),t.assetNumber&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:["#",t.assetNumber]})]})]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(h[t.status]),children:t.status.replace("_"," ")})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Category:"}),(0,a.jsxs)("span",{className:"ml-1 text-brand-primary-text",children:[g[t.category]," ",t.category]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Condition:"}),(0,a.jsx)("span",{className:"ml-1 font-medium ".concat(b[t.condition]),children:t.condition.replace("_"," ")})]}),t.brand&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Brand:"}),(0,a.jsx)("span",{className:"ml-1 text-brand-primary-text",children:t.brand})]}),t.model&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Model:"}),(0,a.jsx)("span",{className:"ml-1 text-brand-primary-text",children:t.model})]}),t.serialNumber&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Serial:"}),(0,a.jsx)("span",{className:"ml-1 text-brand-primary-text font-mono text-xs",children:t.serialNumber})]}),t.client&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Client:"}),(0,a.jsx)("span",{className:"ml-1 text-brand-primary-text",children:t.client.name})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["AVAILABLE"===t.status&&(0,a.jsx)("button",{onClick:()=>v("CHECK_OUT"),disabled:p(t.id),className:"px-3 py-1.5 text-xs font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-md transition-colors",children:p(t.id)?"In Cart":"Check Out"}),"CHECKED_OUT"===t.status&&(0,a.jsx)("button",{onClick:()=>v("CHECK_IN"),disabled:p(t.id),className:"px-3 py-1.5 text-xs font-medium bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-md transition-colors",children:p(t.id)?"In Cart":"Check In"}),l&&(0,a.jsx)("button",{onClick:l,className:"px-3 py-1.5 text-xs font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",children:"Preview"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>x(!c),className:"p-1.5 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),c&&(0,a.jsx)("div",{className:"absolute right-0 bottom-full mb-1 w-40 bg-white dark:bg-gray-800 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsx)(i(),{href:"/assets/".concat(t.id),className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>x(!1),children:"View Details"}),d&&(0,a.jsx)("button",{onClick:()=>{d(),x(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Duplicate"})]})})]})]})]})}let y={AVAILABLE:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border-green-300 dark:border-green-700",CHECKED_OUT:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 border-yellow-300 dark:border-yellow-700",IN_MAINTENANCE:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 border-red-300 dark:border-red-700",RETIRED:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 border-gray-300 dark:border-gray-700",MISSING:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 border-red-300 dark:border-red-700",RESERVED:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 border-blue-300 dark:border-blue-700"},v={CAMERA:"\uD83D\uDCF7",LENS:"\uD83D\uDD0D",LIGHTING:"\uD83D\uDCA1",AUDIO:"\uD83C\uDFB5",COMPUTER:"\uD83D\uDCBB",STORAGE:"\uD83D\uDCBE",ACCESSORY:"\uD83D\uDD27",FURNITURE:"\uD83E\uDE91",SOFTWARE:"\uD83D\uDCBF",INFORMATION_TECHNOLOGY:"\uD83D\uDDA5️",OTHER:"\uD83D\uDCE6"};function f(e){let{assets:t,selectedAssets:r=[],onSelectionChange:s,onDuplicate:n,bulkMode:l=!1}=e,[d,c]=(0,o.useState)(null),[x,h]=(0,o.useState)(!1),{addItem:b,hasItem:g,canAddItem:f}=(0,u._)(),[j,k]=(0,o.useState)({}),[N,w]=(0,o.useState)(null),[C,E]=(0,o.useState)(0),[L,A]=(0,o.useState)(0),S=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=localStorage.getItem("assetTable-columnWidths");if(e)try{k(JSON.parse(e))}catch(e){console.warn("Failed to parse saved column widths")}},[]),(0,o.useEffect)(()=>{Object.keys(j).length>0&&localStorage.setItem("assetTable-columnWidths",JSON.stringify(j))},[j]);let R=(e,t)=>{e.preventDefault(),w(t),E(e.clientX);let r=e.currentTarget.closest("th");r&&A(r.offsetWidth)},D=e=>{if(!N)return;let t=Math.max(50,L+(e.clientX-C));k(e=>({...e,[N]:t}))},M=()=>{w(null),E(0),A(0)};(0,o.useEffect)(()=>{if(N)return document.addEventListener("mousemove",D),document.addEventListener("mouseup",M),()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",M)}},[N,C,L]);let I=(e,t)=>{let r=j[e];return r?{width:"".concat(r,"px"),minWidth:"".concat(r,"px")}:"actions"===e?{width:"60px",minWidth:"60px"}:void 0},O=e=>{l||(c(e),h(!0))},T=e=>{s&&(r.includes(e)?s(r.filter(t=>t!==e)):s([...r,e]))},P=t.length>0&&r.length===t.length,B=r.length>0&&r.length<t.length;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"md:hidden space-y-3",children:[t.map(e=>(0,a.jsx)(p,{asset:e,selected:r.includes(e.id),onSelect:()=>T(e.id),bulkMode:l,onPreview:()=>{c(e.id),h(!0)},onDuplicate:n?()=>n(e):void 0},e.id)),0===t.length&&(0,a.jsxs)("div",{className:"text-center py-12 bg-white dark:bg-brand-dark-blue/90 backdrop-blur-sm rounded-lg",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-brand-primary-text",children:"No assets found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-brand-secondary-text",children:"Try adjusting your search or filter criteria"})]})]}),(0,a.jsx)("div",{className:"hidden md:block bg-gray-900/5 shadow-sm rounded-lg border border-gray-600 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{ref:S,className:"w-full divide-y divide-gray-300 border-collapse",children:[(0,a.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800",children:(0,a.jsxs)("tr",{className:"divide-x divide-gray-300",children:[l&&(0,a.jsxs)("th",{className:"px-3 py-3 text-center border-r border-gray-600 relative",style:I("checkbox"),children:[(0,a.jsx)("input",{type:"checkbox",checked:P,ref:e=>{e&&(e.indeterminate=B)},onChange:()=>{s&&(r.length===t.length?s([]):s(t.map(e=>e.id)))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded"}),(0,a.jsx)("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800",onMouseDown:e=>R(e,"checkbox")})]}),(0,a.jsxs)("th",{className:"px-3 py-3 text-center text-xs font-semibold text-gray-600 dark:text-brand-secondary-text uppercase tracking-wider border-r border-gray-600 relative",style:I("asset"),children:["Asset",(0,a.jsx)("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800",onMouseDown:e=>R(e,"asset")})]}),(0,a.jsxs)("th",{className:"px-3 py-3 text-center text-xs font-semibold text-gray-600 dark:text-brand-secondary-text uppercase tracking-wider border-r border-gray-600 relative",style:I("category"),children:["Category",(0,a.jsx)("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800",onMouseDown:e=>R(e,"category")})]}),(0,a.jsxs)("th",{className:"px-3 py-3 text-center text-xs font-semibold text-gray-600 dark:text-brand-secondary-text uppercase tracking-wider border-r border-gray-600 relative",style:I("status"),children:["Status",(0,a.jsx)("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800",onMouseDown:e=>R(e,"status")})]}),(0,a.jsxs)("th",{className:"px-3 py-3 text-center text-xs font-semibold text-gray-600 dark:text-brand-secondary-text uppercase tracking-wider border-r border-gray-600 relative",style:I("condition"),children:["Condition",(0,a.jsx)("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800",onMouseDown:e=>R(e,"condition")})]}),(0,a.jsxs)("th",{className:"px-3 py-3 text-center text-xs font-semibold text-gray-600 dark:text-brand-secondary-text uppercase tracking-wider border-r border-gray-600 relative",style:I("location"),children:["Location",(0,a.jsx)("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800",onMouseDown:e=>R(e,"location")})]}),(0,a.jsxs)("th",{className:"px-3 py-3 text-center text-xs font-semibold text-gray-600 dark:text-brand-secondary-text uppercase tracking-wider border-r border-gray-600 relative",style:I("client"),children:["Client",(0,a.jsx)("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800",onMouseDown:e=>R(e,"client")})]}),(0,a.jsxs)("th",{className:"px-3 py-3 text-center text-xs font-semibold text-gray-600 dark:text-brand-secondary-text uppercase tracking-wider border-r border-gray-600 relative",style:I("value"),children:["Value",(0,a.jsx)("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800",onMouseDown:e=>R(e,"value")})]}),(0,a.jsx)("th",{className:"px-3 py-3 text-center text-xs font-semibold text-gray-600 dark:text-brand-secondary-text uppercase tracking-wider relative",style:I("actions"),children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-gray-900/5 divide-y divide-gray-300",children:t.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover transition-colors ".concat(r.includes(e.id)?"bg-blue-50":""," ").concat("CHECKED_OUT"===e.status?"border-l-4 border-orange-500 bg-orange-100/40":""),children:[l&&(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap border-r border-gray-600 text-center",style:I("checkbox"),children:(0,a.jsx)("input",{type:"checkbox",checked:r.includes(e.id),onChange:()=>T(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-600 rounded"})}),(0,a.jsx)("td",{className:"px-3 py-3 border-r border-gray-600",style:I("asset"),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 mr-2 flex-shrink-0",children:e.imageUrl?(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-10 h-10 object-cover rounded-lg border border-gray-700 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>O(e.id)}):(0,a.jsx)("div",{className:"w-10 h-10 bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded-lg flex items-center justify-center cursor-pointer transition-colors",onClick:()=>O(e.id),children:(0,a.jsx)("span",{className:"text-sm",children:v[e.category]||"\uD83D\uDCE6"})})}),(0,a.jsx)("div",{className:"min-w-0 flex-1 max-w-48",children:(0,a.jsxs)("button",{onClick:()=>O(e.id),className:"text-left w-full",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-brand-primary-text hover transition-colors break-words",children:e.name}),(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-brand-secondary-text truncate",children:e.serialNumber||"No serial number"}),e.description&&(0,a.jsx)("div",{className:"text-xs text-gray-600 dark:text-brand-secondary-text mt-0.5 leading-relaxed",children:e.description})]})})]})}),(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap border-r border-gray-600 text-center",style:I("category"),children:(0,a.jsx)("span",{className:"text-sm text-brand-primary-text capitalize",children:e.category.toLowerCase().replace("_"," ")})}),(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap border-r border-gray-600 text-center",style:I("status"),children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold uppercase tracking-wide border ".concat(y[e.status]),children:e.status.replace("_"," ")})}),(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap border-r border-gray-600 text-center",style:I("condition"),children:(0,a.jsx)("span",{className:"text-sm font-medium text-brand-primary-text",children:e.condition.replace("_"," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase())})}),(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap border-r border-gray-600 text-center",style:I("location"),children:(0,a.jsx)("div",{className:"text-sm text-brand-primary-text",children:e.location||"-"})}),(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap border-r border-gray-600 text-center",style:I("client"),children:(0,a.jsx)("div",{className:"text-sm text-brand-primary-text",children:(null==(t=e.client)?void 0:t.name)?(0,a.jsx)("div",{className:"font-medium",children:e.client.name}):(0,a.jsx)("span",{className:"text-brand-secondary-text",children:"-"})})}),(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap border-r border-gray-600 text-center",style:I("value"),children:(0,a.jsx)("div",{className:"text-sm text-brand-primary-text",children:e.currentValue?"$".concat(e.currentValue.toLocaleString()):e.purchasePrice?"$".concat(e.purchasePrice.toLocaleString()):"-"})}),(0,a.jsx)("td",{className:"px-1 py-3 whitespace-nowrap text-center text-sm font-medium",style:I("actions"),children:(0,a.jsx)(i(),{href:"/assets/".concat(e.id),className:"px-2 py-1 text-brand-orange hover:text-brand-orange-soft dark:text-brand-orange dark:hover:text-brand-orange-soft bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded transition-colors font-medium text-xs",children:"View"})})]},e.id)})})]})})}),(0,a.jsx)(m,{assetId:d,isOpen:x,onClose:()=>{h(!1),c(null)}})]})}function j(e){let{filters:t,onFiltersChange:r,onApply:s,onReset:n,isExpanded:l,onToggle:i}=e,[d,c]=(0,o.useState)([]),[x,m]=(0,o.useState)([]),[u,h]=(0,o.useState)(!1);(0,o.useEffect)(()=>{b(),g()},[]);let b=async()=>{try{h(!0);let e=await fetch("/api/clients?active=true&limit=100");if(e.ok){let t=await e.json();c(t.clients||[])}}catch(e){console.error("Error fetching clients:",e)}finally{h(!1)}},g=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let t=await e.json();m(t.categories||[])}}catch(e){console.error("Error fetching categories:",e)}},p=(e,a)=>{r({...t,[e]:a})},y=Object.values(t).some(e=>""!==e);return(0,a.jsxs)("div",{className:"bg-gray-900/5 rounded-lg shadow border border-gray-700",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-brand-primary-text",children:"Search & Filters"}),y&&(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[Object.values(t).filter(e=>""!==e).length," active"]})]}),(0,a.jsx)("button",{onClick:i,className:"text-gray-600 dark:text-brand-secondary-text hover transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5 transform transition-transform ".concat(l?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),(0,a.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quick Filters"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>{r({...t,status:"AVAILABLE"===t.status?"":"AVAILABLE"}),s()},className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("AVAILABLE"===t.status?"bg-green-100 text-green-800 border border-green-200":"bg-gray-900 hover text-brand-primary-text border border-gray-600 shadow-sm"),children:"\uD83D\uDFE2 Available"}),(0,a.jsx)("button",{onClick:()=>{r({...t,status:"CHECKED_OUT"===t.status?"":"CHECKED_OUT"}),s()},className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("CHECKED_OUT"===t.status?"bg-amber-100 text-amber-800 border border-amber-200":"bg-gray-900 hover text-brand-primary-text border border-gray-600 shadow-sm"),children:"\uD83D\uDFE1 Checked Out"}),(0,a.jsx)("button",{onClick:()=>{r({...t,status:"IN_MAINTENANCE"===t.status?"":"IN_MAINTENANCE"}),s()},className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("IN_MAINTENANCE"===t.status?"bg-red-100 text-red-800 border border-red-200":"bg-gray-900 hover text-brand-primary-text border border-gray-600 shadow-sm"),children:"\uD83D\uDD34 In Maintenance"}),x.slice(0,2).map(e=>(0,a.jsxs)("button",{onClick:()=>{r({...t,category:t.category===e.id?"":e.id}),s()},className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(t.category===e.id?"bg-blue-100 text-blue-800 border border-blue-200":"bg-gray-900 hover text-brand-primary-text border border-gray-600 shadow-sm"),children:[e.icon," ",e.name]},e.id)),(0,a.jsx)("button",{onClick:()=>{r({...t,condition:"NEEDS_REPAIR"===t.condition?"":"NEEDS_REPAIR"}),s()},className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("NEEDS_REPAIR"===t.condition?"bg-orange-100 text-orange-800 border border-orange-200":"bg-gray-900 hover text-brand-primary-text border border-gray-600 shadow-sm"),children:"\uD83D\uDD27 Needs Repair"}),(0,a.jsx)("button",{onClick:()=>{if(t.startDate&&t.endDate)r({...t,startDate:"",endDate:""});else{let e=new Date,a=new Date(e.getTime()-2592e6);r({...t,startDate:a.toISOString().split("T")[0],endDate:e.toISOString().split("T")[0]})}s()},className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(t.startDate&&t.endDate?"bg-purple-100 text-purple-800 border border-purple-200":"bg-gray-900 hover text-brand-primary-text border border-gray-600 shadow-sm"),children:"\uD83D\uDCC5 Recent (30 days)"})]})]})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-300 mb-1",children:"Search Assets"}),(0,a.jsx)("input",{type:"text",id:"search",value:t.search,onChange:e=>p("search",e.target.value),placeholder:"Search by name, serial number, barcode, manufacturer...",className:"w-full border border-gray-600 rounded-md px-3 py-2 bg-gray-900 text-brand-primary-text placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,a.jsx)("button",{onClick:s,className:"bg-blue-600 hover text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Search"}),y&&(0,a.jsx)("button",{onClick:n,className:"text-gray-600 dark:text-brand-secondary-text hover px-4 py-2 text-sm font-medium transition-colors",children:"Clear All"})]})]})}),l&&(0,a.jsxs)("div",{className:"p-4 border-t border-gray-700 bg-gray-900/5/50",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-300 mb-1",children:"Category"}),(0,a.jsxs)("select",{id:"category",value:t.category,onChange:e=>p("category",e.target.value),className:"w-full border border-gray-600 rounded-md px-3 py-2 bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"All Categories"}),x.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-300 mb-1",children:"Status"}),(0,a.jsxs)("select",{id:"status",value:t.status,onChange:e=>p("status",e.target.value),className:"w-full border border-gray-600 rounded-md px-3 py-2 bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"All Status"}),(0,a.jsx)("option",{value:"AVAILABLE",children:"Available"}),(0,a.jsx)("option",{value:"CHECKED_OUT",children:"Checked Out"}),(0,a.jsx)("option",{value:"IN_MAINTENANCE",children:"In Maintenance"}),(0,a.jsx)("option",{value:"RETIRED",children:"Retired"}),(0,a.jsx)("option",{value:"MISSING",children:"Missing"}),(0,a.jsx)("option",{value:"RESERVED",children:"Reserved"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"condition",className:"block text-sm font-medium text-gray-300 mb-1",children:"Condition"}),(0,a.jsxs)("select",{id:"condition",value:t.condition,onChange:e=>p("condition",e.target.value),className:"w-full border border-gray-600 rounded-md px-3 py-2 bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"All Conditions"}),(0,a.jsx)("option",{value:"EXCELLENT",children:"Excellent"}),(0,a.jsx)("option",{value:"GOOD",children:"Good"}),(0,a.jsx)("option",{value:"FAIR",children:"Fair"}),(0,a.jsx)("option",{value:"POOR",children:"Poor"}),(0,a.jsx)("option",{value:"NEEDS_REPAIR",children:"Needs Repair"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-300 mb-1",children:"Location"}),(0,a.jsx)("input",{type:"text",id:"location",value:t.location,onChange:e=>p("location",e.target.value),placeholder:"Enter location",className:"w-full border border-gray-600 rounded-md px-3 py-2 bg-gray-900 text-brand-primary-text placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"manufacturer",className:"block text-sm font-medium text-gray-300 mb-1",children:"Manufacturer"}),(0,a.jsx)("input",{type:"text",id:"manufacturer",value:t.manufacturer,onChange:e=>p("manufacturer",e.target.value),placeholder:"Enter manufacturer",className:"w-full border border-gray-600 rounded-md px-3 py-2 bg-gray-900 text-brand-primary-text placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"client",className:"block text-sm font-medium text-gray-300 mb-1",children:"Client"}),(0,a.jsxs)("select",{id:"client",value:t.client,onChange:e=>p("client",e.target.value),disabled:u,className:"w-full border border-gray-600 rounded-md px-3 py-2 bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50",children:[(0,a.jsx)("option",{value:"",children:"All Clients"}),d.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]}),u&&(0,a.jsx)("div",{className:"text-xs text-white/50 hover:text-white/80 transition-colors mt-1",children:"Loading clients..."})]}),(0,a.jsxs)("div",{className:"md:col-span-2 lg:col-span-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Price Range"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"number",min:"0",step:"0.01",value:t.minPrice,onChange:e=>p("minPrice",e.target.value),placeholder:"Min $",className:"w-full min-w-0 border border-gray-600 rounded-md px-3 py-2 bg-gray-900 text-brand-primary-text placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-brand-secondary-text text-sm flex-shrink-0",children:"to"}),(0,a.jsx)("input",{type:"number",min:"0",step:"0.01",value:t.maxPrice,onChange:e=>p("maxPrice",e.target.value),placeholder:"Max $",className:"w-full min-w-0 border border-gray-600 rounded-md px-3 py-2 bg-gray-900 text-brand-primary-text placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Purchase Date Range"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("input",{type:"date",value:t.startDate,onChange:e=>p("startDate",e.target.value),className:"flex-1 border border-gray-600 rounded-md px-3 py-2 bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("span",{className:"text-gray-600 dark:text-brand-secondary-text text-sm px-1 flex-shrink-0",children:"to"}),(0,a.jsx)("input",{type:"date",value:t.endDate,onChange:e=>p("endDate",e.target.value),className:"flex-1 border border-gray-600 rounded-md px-3 py-2 bg-gray-900 text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-4 pt-4 border-t border-gray-600",children:[(0,a.jsx)("button",{onClick:n,className:"px-4 py-2 border border-gray-600 rounded-md text-sm font-medium text-gray-300 hover bg-gray-900 transition-colors",children:"Reset Filters"}),(0,a.jsx)("button",{onClick:s,className:"bg-blue-600 hover text-white px-6 py-2 rounded-md text-sm font-medium transition-colors",children:"Apply Filters"})]})]})]})}var k=r(19659);function N(e){let{onAssetFound:t,placeholder:r="Search by barcode or QR code...",className:s=""}=e,[l,i]=(0,o.useState)(""),[d,c]=(0,o.useState)(!1),[x,m]=(0,o.useState)(!1),[u,h]=(0,o.useState)(""),b=(0,n.useRouter)(),g=async e=>{if(e.trim()){m(!0),h("");try{let r=await fetch("/api/assets/search?q=".concat(encodeURIComponent(e.trim())));if(r.ok){let e=await r.json();if(0===e.length)return void h("No asset found with this code");let a=e[0];t?t(a.id):b.push("/assets/".concat(a.id)),i("")}else h("Failed to search for asset")}catch(e){console.error("Search error:",e),h("An error occurred while searching")}finally{m(!1)}}};return(0,a.jsxs)("div",{className:"relative ".concat(s),children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),g(l)},className:"flex",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:r,className:"w-full pl-10 pr-4 py-2 border border-gray-600 rounded-l-md bg-gray-900 text-brand-primary-text placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/50 hover:text-white/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,a.jsx)("button",{type:"button",onClick:()=>c(!0),className:"px-3 py-2 bg-gray-100 dark:bg-gray-800 hover border border-l-0 border-gray-600 text-gray-300 transition-colors",title:"Scan QR Code or Barcode",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),(0,a.jsx)("button",{type:"submit",disabled:x||!l.trim(),className:"px-4 py-2 bg-blue-600 hover disabled:opacity-50 text-white rounded-r-md text-sm font-medium transition-colors",children:x?(0,a.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Search"})]}),u&&(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 p-2 bg-red-50 border border-red-200 rounded-md z-10",children:(0,a.jsx)("p",{className:"text-sm text-red-800",children:u})}),(0,a.jsx)(k.A,{isOpen:d,onClose:()=>c(!1),onScanSuccess:(e,t)=>{console.log("Scanned: ".concat(e," (").concat(t,")")),c(!1),i(e),g(e)},onScanError:e=>{console.error("Scan error:",e),h("Camera scanning error. Please try manual entry.")}})]})}function w(e){let{isOpen:t,onClose:r,onSuccess:s}=e,[n,l]=(0,o.useState)(null),[i,d]=(0,o.useState)(!1),[c,x]=(0,o.useState)(null),m=(0,o.useRef)(null),u=async()=>{if(n){d(!0),x(null);try{let e=new FormData;e.append("file",n);let t=await fetch("/api/assets/import",{method:"POST",body:e}),r=await t.json();t.ok?(x(r),r.successful>0&&s()):x({total:0,successful:0,failed:1,errors:[r.error||"Import failed"]})}catch(e){x({total:0,successful:0,failed:1,errors:["Network error occurred during import"]})}finally{d(!1)}}},h=()=>{l(null),x(null),d(!1),m.current&&(m.current.value=""),r()};return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsx)("div",{className:"bg-gray-900/5 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-brand-primary-text",children:"Import Assets from Excel"}),(0,a.jsx)("button",{onClick:h,className:"text-white/50 hover:text-white/80 transition-colors hover transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"inline-flex items-center px-4 py-2 rounded-full text-sm font-medium ".concat(0===c.failed?"bg-green-100 text-green-800":0===c.successful?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:0===c.failed?"Import Successful":0===c.successful?"Import Failed":"Partial Import"})}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c.total}),(0,a.jsx)("div",{className:"text-sm text-blue-800",children:"Total Rows"})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c.successful}),(0,a.jsx)("div",{className:"text-sm text-green-800",children:"Successful"})]}),(0,a.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:c.failed}),(0,a.jsx)("div",{className:"text-sm text-red-800",children:"Failed"})]})]}),c.errors.length>0&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-red-900 mb-2",children:"Errors:"}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto",children:c.errors.map((e,t)=>(0,a.jsx)("div",{className:"text-sm text-red-800 py-1",children:e},t))})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Import Instructions"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:"• Upload an Excel file (.xlsx or .xls) with asset data"}),(0,a.jsx)("li",{children:"• The file must have a header row with column names"}),(0,a.jsxs)("li",{children:["• Required column: ",(0,a.jsx)("strong",{children:"name"}),' (or variations like "asset name", "item name")']}),(0,a.jsx)("li",{children:"• Accepted categories: CAMERA, LENS, LIGHTING, AUDIO, COMPUTER, STORAGE, ACCESSORY, FURNITURE, SOFTWARE, OTHER"}),(0,a.jsx)("li",{children:"• Valid statuses: AVAILABLE, CHECKED_OUT, IN_MAINTENANCE, RETIRED, MISSING, RESERVED"}),(0,a.jsx)("li",{children:"• Valid conditions: EXCELLENT, GOOD, FAIR, POOR, NEEDS_REPAIR"}),(0,a.jsx)("li",{children:"• Duplicate asset names will be skipped"}),(0,a.jsx)("li",{children:"• Download the template below for the correct format"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-900/5 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-brand-primary-text",children:"Need a template?"}),(0,a.jsx)("p",{className:"text-sm text-brand-primary-text",children:"Download a sample CSV file with the correct format"})]}),(0,a.jsx)("button",{onClick:()=>{let e=new Blob([[["name","description","category","manufacturer","model","serialNumber","barcode","location","purchaseDate","purchasePrice","currentValue","condition","status","notes"],["Canon EOS R5","Professional mirrorless camera","CAMERA","Canon","EOS R5","CAN123456","BAR001","Studio A","2023-01-15","3899.99","3500.00","EXCELLENT","AVAILABLE","Main camera for photo shoots"],["Sony 24-70mm Lens","Professional zoom lens","LENS","Sony","24-70mm f/2.8","SON789012","BAR002","Studio A","2023-02-20","2200.00","2000.00","GOOD","AVAILABLE","Primary lens for video work"],["LED Light Panel","Professional lighting equipment","LIGHTING","Aputure","AL-MX","APU345678","BAR003","Studio B","2023-03-10","299.99","280.00","EXCELLENT","CHECKED_OUT","Portable LED panel"],["MacBook Pro M3","Editing workstation","COMPUTER","Apple",'MacBook Pro 16"',"APP456789","BAR004","Edit Bay 1","2023-04-05","2999.00","2800.00","GOOD","IN_MAINTENANCE","Main editing machine"],["Rode Microphone","Professional audio equipment","AUDIO","Rode","VideoMic Pro Plus","ROD567890","BAR005","Audio Room","2023-05-12","329.00","300.00","FAIR","AVAILABLE","On-camera microphone"]].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="asset-import-template.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)},className:"px-4 py-2 text-sm font-medium text-blue-600 hover border border-blue-300 rounded-md hover transition-colors",children:"Download Template"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Select Excel File"}),(0,a.jsx)("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600 border-dashed rounded-md hover:border-gray-400:border-gray-500 transition-colors",children:(0,a.jsxs)("div",{className:"space-y-1 text-center",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-white/50 hover:text-white/80 transition-colors",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,a.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,a.jsxs)("div",{className:"flex text-sm text-brand-primary-text",children:[(0,a.jsxs)("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-gray-900/5 rounded-md font-medium text-blue-600 hover focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[(0,a.jsx)("span",{children:"Upload a file"}),(0,a.jsx)("input",{id:"file-upload",ref:m,name:"file-upload",type:"file",accept:".xlsx,.xls",className:"sr-only",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];r&&(l(r),x(null))}})]}),(0,a.jsx)("p",{className:"pl-1",children:"or drag and drop"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-brand-secondary-text",children:"Excel files (.xlsx, .xls) up to 10MB"})]})}),n&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("span",{className:"text-sm text-green-800",children:n.name})]}),(0,a.jsx)("button",{onClick:()=>l(null),className:"text-green-600 hover",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-700",children:[(0,a.jsx)("button",{onClick:h,className:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-900 border border-gray-600 rounded-md hover transition-colors",children:c?"Close":"Cancel"}),!c&&n&&(0,a.jsx)("button",{onClick:u,disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-colors",children:i?"Importing...":"Import Assets"})]})]})})}):null}function C(e){let{selectedCount:t,onBulkAction:r,onCancel:s}=e,[n,l]=(0,o.useState)(!1),[i,d]=(0,o.useState)(!1),c=[{value:"AVAILABLE",label:"Available",color:"text-emerald-600"},{value:"CHECKED_OUT",label:"Checked Out",color:"text-amber-600"},{value:"IN_MAINTENANCE",label:"In Maintenance",color:"text-red-600"},{value:"RETIRED",label:"Retired",color:"text-white/50 hover:text-white/80 transition-colors"},{value:"MISSING",label:"Missing",color:"text-red-600"},{value:"RESERVED",label:"Reserved",color:"text-blue-600"}],x=e=>{r("changeStatus",{status:e}),l(!1)};return(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-700 px-4 py-3",children:[(0,a.jsxs)("div",{className:"hidden md:flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:[t," asset",1!==t?"s":""," selected"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>l(!n),className:"inline-flex items-center px-3 py-1.5 border border-blue-300 dark:border-blue-600 text-sm font-medium rounded-md text-blue-700 dark:text-blue-200 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:["Change Status",(0,a.jsx)("svg",{className:"ml-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&(0,a.jsx)("div",{className:"absolute z-10 mt-1 w-48 bg-white dark:bg-gray-800 shadow-lg border border-gray-300 dark:border-gray-600 rounded-md py-1",children:c.map(e=>(0,a.jsx)("button",{onClick:()=>x(e.value),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,a.jsx)("span",{className:"font-medium ".concat(e.color),children:e.label})},e.value))})]}),(0,a.jsxs)("button",{onClick:()=>r("export"),className:"inline-flex items-center px-3 py-1.5 border border-blue-300 dark:border-blue-600 text-sm font-medium rounded-md text-blue-700 dark:text-blue-200 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)("svg",{className:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),(0,a.jsxs)("button",{onClick:()=>d(!0),className:"inline-flex items-center px-3 py-1.5 border border-red-300 dark:border-red-600 text-sm font-medium rounded-md text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,a.jsx)("svg",{className:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]}),(0,a.jsx)("button",{onClick:s,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium",children:"Cancel"})]}),(0,a.jsxs)("div",{className:"md:hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:[t," selected"]}),(0,a.jsx)("button",{onClick:s,className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium",children:"Cancel"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>l(!n),className:"w-full flex items-center justify-center px-4 py-3 border border-blue-300 dark:border-blue-600 text-sm font-medium rounded-lg text-blue-700 dark:text-blue-200 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-gray-700 active:scale-95 touch-manipulation transition-all",children:[(0,a.jsx)("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Change Status",(0,a.jsx)("svg",{className:"ml-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&(0,a.jsx)("div",{className:"absolute z-10 mt-1 w-full bg-white dark:bg-gray-800 shadow-lg border border-gray-300 dark:border-gray-600 rounded-lg py-1 max-h-60 overflow-y-auto",children:c.map(e=>(0,a.jsx)("button",{onClick:()=>x(e.value),className:"block w-full text-left px-4 py-3 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 active:scale-95 touch-manipulation",children:(0,a.jsx)("span",{className:"font-medium ".concat(e.color),children:e.label})},e.value))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("button",{onClick:()=>r("export"),className:"flex items-center justify-center px-4 py-3 border border-blue-300 dark:border-blue-600 text-sm font-medium rounded-lg text-blue-700 dark:text-blue-200 bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-gray-700 active:scale-95 touch-manipulation transition-all",children:[(0,a.jsx)("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export"]}),(0,a.jsxs)("button",{onClick:()=>d(!0),className:"flex items-center justify-center px-4 py-3 border border-red-300 dark:border-red-600 text-sm font-medium rounded-lg text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/20 active:scale-95 touch-manipulation transition-all",children:[(0,a.jsx)("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]}),i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-brand-dark-blue/95 backdrop-blur-sm border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-brand-primary-text",children:"Delete Selected Assets"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-brand-secondary-text mt-1",children:["Are you sure you want to delete ",t," asset",1!==t?"s":"","? This action cannot be undone."]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>d(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 active:scale-95 touch-manipulation transition-all",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{r("delete"),d(!1)},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 border border-transparent rounded-lg active:scale-95 touch-manipulation transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Delete"})]})]})})]})}function E(){let{data:e,status:t}=(0,s.useSession)(),r=(0,n.useRouter)(),[l,c]=(0,o.useState)([]),[x,m]=(0,o.useState)(!0),[u,h]=(0,o.useState)({search:"",category:"",status:"",condition:"",minPrice:"",maxPrice:"",startDate:"",endDate:"",location:"",manufacturer:"",client:""}),[b,g]=(0,o.useState)(!1),[p,y]=(0,o.useState)({page:1,limit:12,total:0,pages:0}),[v,k]=(0,o.useState)(!1),[E,L]=(0,o.useState)(!1),[A,S]=(0,o.useState)(!1),[R,D]=(0,o.useState)([]),[M,I]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if("loading"!==t){if("unauthenticated"===t)return void r.push("/auth/signin");O()}},[t,r,u,p.page]);let O=async()=>{try{let e=new URLSearchParams({page:p.page.toString(),limit:p.limit.toString(),...u.search&&{search:u.search},...u.category&&{category:u.category},...u.status&&{status:u.status},...u.condition&&{condition:u.condition},...u.location&&{location:u.location},...u.manufacturer&&{manufacturer:u.manufacturer},...u.client&&{client:u.client},...u.minPrice&&{minPrice:u.minPrice},...u.maxPrice&&{maxPrice:u.maxPrice},...u.startDate&&{startDate:u.startDate},...u.endDate&&{endDate:u.endDate}}),t=await fetch("/api/assets?".concat(e));if(t.ok){let e=await t.json();c(e.assets),y(t=>({...t,...e.pagination}))}}catch(e){console.error("Failed to fetch assets:",e)}finally{m(!1)}},T=()=>{y(e=>({...e,page:1}))},P=()=>{h({search:"",category:"",status:"",condition:"",minPrice:"",maxPrice:"",startDate:"",endDate:"",location:"",manufacturer:"",client:""}),y(e=>({...e,page:1}))},B=async()=>{k(!0);try{let r=new URLSearchParams({...u.search&&{search:u.search},...u.category&&{category:u.category},...u.status&&{status:u.status},...u.condition&&{condition:u.condition},...u.location&&{location:u.location},...u.manufacturer&&{manufacturer:u.manufacturer},...u.client&&{client:u.client},...u.minPrice&&{minPrice:u.minPrice},...u.maxPrice&&{maxPrice:u.maxPrice},...u.startDate&&{startDate:u.startDate},...u.endDate&&{endDate:u.endDate}}),a=await fetch("/api/assets/export?".concat(r));if(a.ok){var e,t;let r=await a.blob(),s=window.URL.createObjectURL(r),n=document.createElement("a");n.href=s,n.download=(null==(t=a.headers.get("Content-Disposition"))||null==(e=t.split("filename=")[1])?void 0:e.replace(/"/g,""))||"assets.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(s)}}catch(e){console.error("Export failed:",e)}finally{k(!1)}},V=async(e,t)=>{I(!0);try{if("export"===e){let e=await fetch("/api/assets/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"export",assetIds:R})});if(e.ok){var r,a;let t=await e.blob(),s=window.URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download=(null==(a=e.headers.get("Content-Disposition"))||null==(r=a.split("filename=")[1])?void 0:r.replace(/"/g,""))||"selected-assets.csv",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(s)}else{let t=await e.json();alert("Export failed: "+t.error)}}else{let r=await fetch("/api/assets/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,assetIds:R,data:t})});if(r.ok){let e=await r.json();alert(e.message||"Action completed successfully"),O(),D([]),S(!1)}else{let e=await r.json();alert("Action failed: "+e.error)}}}catch(e){console.error("Bulk action failed:",e),alert("Bulk action failed. Please try again.")}finally{I(!1)}},U=()=>{S(!A),D([])};return"loading"===t||x?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,a.jsx)(d.A,{}),(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-orange"})})]}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,a.jsx)(d.A,{}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"hidden md:flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)("div",{className:"p-2 bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-brand-orange dark:text-brand-orange",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-brand-primary-text dark:to-gray-200 bg-clip-text text-transparent",children:"Assets"})]}),(0,a.jsxs)("p",{className:"text-gray-800 dark:text-brand-secondary-text ml-11 max-w-2xl",children:["Manage your inventory assets (",p.total," total)"]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)(i(),{href:"/assets/cart",className:"bg-brand-orange hover:bg-primary-600 text-brand-primary-text px-4 py-2 rounded-md text-sm font-medium inline-flex items-center transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6H19M7 13v0a2 2 0 002 2h8.5m-10.5-2v-2a2 2 0 012-2h8.5"})}),"Scan to Cart"]}),(0,a.jsxs)("button",{onClick:U,className:"px-4 py-2 rounded-md text-sm font-medium inline-flex items-center transition-colors ".concat(A?"bg-brand-orange hover:bg-primary-600 text-brand-primary-text":"bg-gray-100 hover:bg-white/10 text-gray-700 dark:bg-white/5 dark:hover:bg-white/10 dark:text-gray-200"),children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),A?"Exit Bulk Mode":"Bulk Actions"]}),(0,a.jsxs)("button",{onClick:()=>L(!0),className:"bg-primary-600 hover:bg-primary-700 text-brand-primary-text px-4 py-2 rounded-md text-sm font-medium inline-flex items-center transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),"Import Excel"]}),(0,a.jsx)("button",{onClick:B,disabled:v,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-brand-primary-text px-4 py-2 rounded-md text-sm font-medium inline-flex items-center transition-colors",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V4a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Excel"]})}),(0,a.jsxs)(i(),{href:"/assets/new",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium inline-flex items-center",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Asset"]})]})]}),(0,a.jsxs)("div",{className:"md:hidden",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-brand-orange dark:text-brand-orange",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-brand-primary-text dark:to-gray-200 bg-clip-text text-transparent",children:"Assets"}),(0,a.jsxs)("p",{className:"text-sm text-gray-800 dark:text-brand-secondary-text",children:[p.total," total assets"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,a.jsxs)(i(),{href:"/assets/cart",className:"bg-brand-orange hover:bg-primary-600 text-brand-primary-text px-4 py-3 rounded-lg text-sm font-medium flex items-center justify-center transition-colors active:scale-95 touch-manipulation",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6H19M7 13v0a2 2 0 002 2h8.5m-10.5-2v-2a2 2 0 012-2h8.5"})}),"Scan to Cart"]}),(0,a.jsxs)("button",{onClick:U,className:"px-4 py-3 rounded-lg text-sm font-medium flex items-center justify-center transition-colors active:scale-95 touch-manipulation ".concat(A?"bg-brand-orange hover:bg-primary-600 text-brand-primary-text":"bg-gray-100 hover:bg-white/10 text-gray-700 dark:bg-white/5 dark:hover:bg-white/10 dark:text-gray-200"),children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),A?"Exit Bulk":"Bulk Actions"]}),(0,a.jsxs)("button",{onClick:()=>L(!0),className:"bg-primary-600 hover:bg-primary-700 text-brand-primary-text px-4 py-3 rounded-lg text-sm font-medium flex items-center justify-center transition-colors active:scale-95 touch-manipulation",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),"Import Excel"]}),(0,a.jsxs)(i(),{href:"/assets/new",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg text-sm font-medium flex items-center justify-center active:scale-95 touch-manipulation",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Asset"]})]}),(0,a.jsx)("button",{onClick:B,disabled:v,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-brand-primary-text px-4 py-3 rounded-lg text-sm font-medium flex items-center justify-center transition-colors active:scale-95 touch-manipulation",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Exporting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V4a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Excel"]})})]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(N,{className:""})}),(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(j,{filters:u,onFiltersChange:h,onApply:T,onReset:P,isExpanded:b,onToggle:()=>g(!b)})}),(0,a.jsxs)("div",{className:"md:hidden mb-4",children:[(0,a.jsxs)("button",{onClick:()=>g(!b),className:"w-full bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 border border-gray-600 rounded-lg px-4 py-3 text-sm font-medium text-gray-200 flex items-center justify-between transition-colors active:scale-95 touch-manipulation",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})}),(0,a.jsx)("span",{children:Object.values(u).some(e=>e&&""!==e)?"Filters Applied":"Show Filters"})]}),(0,a.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(b?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(j,{filters:u,onFiltersChange:h,onApply:T,onReset:P,isExpanded:b,onToggle:()=>g(!b)})})]}),A&&R.length>0&&(0,a.jsx)(C,{selectedCount:R.length,onBulkAction:V,onCancel:()=>{D([]),S(!1)}}),(0,a.jsx)(f,{assets:l,selectedAssets:R,onSelectionChange:D,bulkMode:A,onDuplicate:e=>{var t,a;let s=new URLSearchParams({duplicate:"true",name:e.name||"",description:e.description||"",category:e.category,manufacturer:e.manufacturer||"",model:e.model||"",condition:e.condition,location:e.location||"",purchasePrice:(null==(t=e.purchasePrice)?void 0:t.toString())||"",currentValue:(null==(a=e.currentValue)?void 0:a.toString())||"",notes:e.notes||""});r.push("/assets/new?".concat(s.toString()))}}),l.length>0&&p.pages>1&&(0,a.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",(p.page-1)*p.limit+1," to"," ",Math.min(p.page*p.limit,p.total)," of"," ",p.total," results"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>y(e=>({...e,page:e.page-1})),disabled:1===p.page,className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-white/10 dark:hover:bg-white/10 bg-gray-900/5 text-gray-900 dark:text-brand-primary-text disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),(0,a.jsxs)("span",{className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-gray-900/5 text-slate-700 dark:text-slate-300",children:[p.page," of ",p.pages]}),(0,a.jsx)("button",{onClick:()=>y(e=>({...e,page:e.page+1})),disabled:p.page===p.pages,className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md hover:bg-white/10 dark:hover:bg-white/10 bg-gray-900/5 text-gray-900 dark:text-brand-primary-text disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]}),0===l.length&&!x&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-white/50 hover:text-white/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-brand-primary-text",children:"No assets found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-700 dark:text-brand-secondary-text",children:Object.values(u).some(e=>""!==e)?"Try adjusting your filters":"Get started by adding your first asset"}),!Object.values(u).some(e=>""!==e)&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(i(),{href:"/assets/new",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-slate-600 hover:bg-white/10 dark:bg-white/5 dark:hover:bg-white/10 transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Asset"]})})]})]})}),(0,a.jsx)(w,{isOpen:E,onClose:()=>L(!1),onSuccess:()=>{L(!1),O()}})]}):null}}},e=>{e.O(0,[5604,2108,7244,8015,8947,6438,8441,5964,7358],()=>e(e.s=23683)),_N_E=e.O()}]);