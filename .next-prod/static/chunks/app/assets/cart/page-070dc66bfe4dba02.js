(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8453],{13506:(e,t,s)=>{Promise.resolve().then(s.bind(s,59728))},32383:()=>{},59728:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(95155),a=s(12108),n=s(35695),l=s(12115),i=s(6874),o=s.n(i),c=s(48947),d=s(62432),m=s(19659),x=s(98273),h=s(26597),u=s(3925),p=s(91540),g=s(59434);function b(e){let{isOpen:t,onClose:s,onConfirm:n}=e;(0,x.K)(t);let{state:i,getCheckInItems:o,getCheckOutItems:c}=(0,d._)(),{data:m}=(0,a.useSession)(),[b,f]=(0,l.useState)(!1),[v,j]=(0,l.useState)({}),[y,N]=(0,l.useState)({}),[w,k]=(0,l.useState)([]),[C,L]=(0,l.useState)(null),[S,I]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{t&&(I(!0),fetch("/api/clients?active=true&limit=100").then(e=>e.json()).then(e=>{k(e.clients||[])}).catch(e=>{console.error("Failed to load clients:",e)}).finally(()=>{I(!1)}))},[t]),!t)return null;let A=o(),M=c(),T=e=>y[e]?null:v[e]||null,E=async()=>{f(!0);try{M.forEach(e=>{let t=T(e.assetId);e.expectedReturnDate=t?new Date(t).toISOString():void 0});let e=await n();e.success?0===e.errors.length||alert("Processed with some errors:\n".concat(e.errors.join("\n"))):alert("Failed to process transactions:\n".concat(e.errors.join("\n")))}catch(e){console.error("Processing error:",e),alert("An error occurred while processing the transactions")}finally{f(!1)}},O=()=>i.items.reduce((e,t)=>e+(t.asset.currentValue||t.asset.purchasePrice||0),0);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:s}),(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-gray-900 backdrop-blur-xl rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col border border-gray-700",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-brand-primary-text",children:"Confirm Transactions"}),(0,r.jsxs)("p",{className:"text-sm text-brand-secondary-text mt-1",children:["Review all assets before processing ",i.items.length," transaction",1!==i.items.length?"s":""]})]}),(0,r.jsx)("button",{onClick:s,disabled:b,className:"text-gray-400 hover:text-gray-200 transition-colors disabled:opacity-50",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-blue-900/20 rounded-lg border border-blue-600/50 p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"bg-blue-900/30 p-2 rounded-lg flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("label",{htmlFor:"client-select",className:"block text-sm font-semibold text-brand-primary-text mb-2",children:"Client (Optional)"}),(0,r.jsx)("p",{className:"text-xs text-brand-secondary-text mb-3",children:"Associate these transactions with a client. This will appear on all documents and reports."}),(0,r.jsxs)("select",{id:"client-select",value:(null==C?void 0:C.id)||"",onChange:e=>{L(w.find(t=>t.id===e.target.value)||null)},disabled:S||b,className:"block w-full px-4 py-2.5 bg-gray-800 border border-blue-600/30 rounded-lg text-brand-primary-text focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 hover:border-blue-500/50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)("option",{value:"",children:S?"Loading clients...":"No client (default)"}),w.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]}),C&&(0,r.jsxs)("div",{className:"mt-2 text-xs text-blue-400 flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Selected: ",C.name]})]})]})}),M.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"bg-orange-900/30 p-2 rounded-lg mr-3",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-brand-primary-text",children:["Assets to Check Out (",M.length,")"]}),(0,r.jsx)("p",{className:"text-sm text-brand-secondary-text",children:"These assets will be marked as checked out"})]})]}),(0,r.jsx)("div",{className:"bg-orange-900/20 rounded-lg border border-orange-600/50 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-orange-600/30",children:[(0,r.jsx)("thead",{className:"bg-orange-900/30",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-400 uppercase tracking-wider",children:"Asset"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-400 uppercase tracking-wider",children:"Assigned To"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-400 uppercase tracking-wider",children:"Return Date"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-400 uppercase tracking-wider",children:"Value"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-orange-600/30",children:M.map(e=>{var t,s,a;return(0,r.jsxs)("tr",{className:"hover:bg-orange-900/10",children:[(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 mr-3 flex-shrink-0",children:e.asset.imageUrl?(0,r.jsx)("img",{src:e.asset.imageUrl,alt:e.asset.name,className:"w-10 h-10 object-cover rounded-lg border border-gray-600"}):(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm",children:"\uD83D\uDCE6"})})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-brand-primary-text truncate",children:e.asset.name}),(0,r.jsxs)("p",{className:"text-xs text-brand-secondary-text truncate",children:[(0,g.AU)(e.asset.category)," • ",e.asset.serialNumber||"No S/N"]}),e.notes&&(0,r.jsxs)("p",{className:"text-xs text-gray-300 mt-1 italic",children:['"',e.notes,'"']})]})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm text-brand-primary-text",children:e.assignedUserName||(null==m||null==(t=m.user)?void 0:t.name)||(null==m||null==(s=m.user)?void 0:s.email)||"Current User"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("input",{type:"date",value:v[e.assetId]||"",onChange:t=>{var s,r;return s=e.assetId,r=t.target.value,void(j(e=>({...e,[s]:r})),N(e=>({...e,[s]:!1})))},disabled:y[e.assetId],min:new Date().toISOString().split("T")[0],className:"block w-full px-3 py-1.5 bg-gray-900/50 border border-orange-600/30 rounded-md text-sm text-orange-100 placeholder-orange-400/50 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500/50 focus:bg-gray-900/70 hover:border-orange-500/50 hover:bg-gray-900/70 transition-all duration-200 disabled:opacity-40 disabled:cursor-not-allowed disabled:border-gray-700/50 disabled:text-gray-500 disabled:bg-gray-900/30 [&::-webkit-calendar-picker-indicator]:filter [&::-webkit-calendar-picker-indicator]:invert [&::-webkit-calendar-picker-indicator]:opacity-70 [&::-webkit-calendar-picker-indicator]:hover:opacity-100 [&::-webkit-calendar-picker-indicator]:cursor-pointer"}),(0,r.jsxs)("label",{className:"flex items-center text-xs text-orange-300 cursor-pointer hover:text-orange-200 transition-colors",children:[(0,r.jsx)("input",{type:"checkbox",checked:y[e.assetId]||!1,onChange:t=>{var s,r;return s=e.assetId,r=t.target.checked,void(N(e=>({...e,[s]:r})),r&&j(e=>({...e,[s]:null})))},className:"mr-2 rounded bg-gray-800 border-orange-600/50 text-orange-500 focus:ring-2 focus:ring-orange-500 focus:ring-offset-0 checked:bg-orange-600 checked:border-orange-600 hover:border-orange-500 transition-colors"}),"No return date"]})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm font-medium text-brand-primary-text",children:e.asset.currentValue||e.asset.purchasePrice?"$".concat(null==(a=e.asset.currentValue||e.asset.purchasePrice)?void 0:a.toLocaleString()):"-"})})]},e.assetId)})})]})})})]}),A.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"bg-green-900/30 p-2 rounded-lg mr-3",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-brand-primary-text",children:["Assets to Check In (",A.length,")"]}),(0,r.jsx)("p",{className:"text-sm text-brand-secondary-text",children:"These assets will be returned and marked as available"})]})]}),(0,r.jsx)("div",{className:"bg-green-900/20 rounded-lg border border-green-600/50 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-green-600/30",children:[(0,r.jsx)("thead",{className:"bg-green-900/30",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-400 uppercase tracking-wider",children:"Asset"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-400 uppercase tracking-wider",children:"Current Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-400 uppercase tracking-wider",children:"Return Notes"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-400 uppercase tracking-wider",children:"Value"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-green-600/30",children:A.map(e=>{var t;return(0,r.jsxs)("tr",{className:"hover:bg-orange-900/10",children:[(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 mr-3 flex-shrink-0",children:e.asset.imageUrl?(0,r.jsx)("img",{src:e.asset.imageUrl,alt:e.asset.name,className:"w-10 h-10 object-cover rounded-lg border border-gray-600"}):(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm",children:"\uD83D\uDCE6"})})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-brand-primary-text truncate",children:e.asset.name}),(0,r.jsxs)("p",{className:"text-xs text-brand-secondary-text truncate",children:[(0,g.AU)(e.asset.category)," • ",e.asset.serialNumber||"No S/N"]})]})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-900/30 text-yellow-400",children:(0,g.me)(e.asset.status)})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm text-brand-primary-text",children:e.notes||"No notes"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm font-medium text-brand-primary-text",children:e.asset.currentValue||e.asset.purchasePrice?"$".concat(null==(t=e.asset.currentValue||e.asset.purchasePrice)?void 0:t.toLocaleString()):"-"})})]},e.assetId)})})]})})})]})]})}),(0,r.jsxs)("div",{className:"p-6 border-t border-gray-700 bg-gray-800/50",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsx)("div",{className:"text-sm text-brand-primary-text",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Total Items:"})," ",i.items.length]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Total Value:"})," $",O().toLocaleString()]}),M.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Check-outs:"})," ",M.length]}),A.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Check-ins:"})," ",A.length]})]})})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,r.jsx)("div",{className:"relative inline-block",children:(0,r.jsxs)("button",{onClick:()=>{var e,t;let s=new Date,r=s.toISOString().split("T")[0],a=[];a.push(["EQUIPMENT CHECKOUT LIST"]),a.push(["Generated: ".concat(s.toLocaleString())]),a.push(["User: ".concat((null==m||null==(e=m.user)?void 0:e.name)||"Unknown"," (").concat((null==m||null==(t=m.user)?void 0:t.email)||"N/A",")")]),C&&a.push(["Client: ".concat(C.name," (").concat(C.code,")")]),a.push([]);let n=[];n.push(["Transaction Type","Asset Name","Serial Number","Category","User","Return Date","Value","Notes"]),M.forEach(e=>{var t;let s=e.asset.currentValue||e.asset.purchasePrice||0,r=T(e.assetId);n.push(["CHECK OUT",e.asset.name,e.asset.serialNumber||"N/A",(0,g.AU)(e.asset.category),e.assignedUserName||(null==m||null==(t=m.user)?void 0:t.name)||"N/A",r?new Date(r).toLocaleDateString():"No return date",s,e.notes||""])}),A.forEach(e=>{var t;let s=e.asset.currentValue||e.asset.purchasePrice||0;n.push(["CHECK IN",e.asset.name,e.asset.serialNumber||"N/A",(0,g.AU)(e.asset.category),(null==m||null==(t=m.user)?void 0:t.name)||"Current User",new Date().toLocaleDateString(),s,e.notes||""])});let l=u.Wp.book_new(),i=u.Wp.aoa_to_sheet([...a,[],...n]);u.Wp.book_append_sheet(l,i,"Checkout List");let o=new Blob([u.M9(l,{bookType:"xlsx",type:"array"})],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,p.saveAs)(o,"checkout-list-".concat(r,".xlsx"))},disabled:b,className:"flex items-center px-3 py-2 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 text-white rounded-md text-sm font-medium disabled:cursor-not-allowed transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download List (.xlsx)"]})}),(0,r.jsxs)("button",{onClick:()=>{let e=new Date().toISOString().split("T")[0],t="Type,Asset Name,Serial Number,Category,User,Return Date,Value,Notes\n";M.forEach(e=>{var s;let r=e.asset.currentValue||e.asset.purchasePrice||0,a=T(e.assetId);t+='"CHECK OUT","'.concat(e.asset.name,'","').concat(e.asset.serialNumber||"N/A",'","').concat((0,g.AU)(e.asset.category),'","').concat(e.assignedUserName||(null==m||null==(s=m.user)?void 0:s.name)||"N/A",'","').concat(a?new Date(a).toLocaleDateString():"No return date",'","').concat(r,'","').concat(e.notes||"",'"\n')}),A.forEach(e=>{var s;let r=e.asset.currentValue||e.asset.purchasePrice||0;t+='"CHECK IN","'.concat(e.asset.name,'","').concat(e.asset.serialNumber||"N/A",'","').concat((0,g.AU)(e.asset.category),'","').concat((null==m||null==(s=m.user)?void 0:s.name)||"Current User",'","').concat(new Date().toLocaleDateString(),'","').concat(r,'","').concat(e.notes||"",'"\n')});let s=new Blob([t],{type:"text/csv;charset=utf-8;"});(0,p.saveAs)(s,"checkout-list-".concat(e,".csv"))},disabled:b,className:"flex items-center px-3 py-2 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 text-white rounded-md text-sm font-medium disabled:cursor-not-allowed transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v1a1 1 0 01-1 1H6a1 1 0 01-1-1v-1m4-8v8m4-8v8m4-8v8M9 3h6a2 2 0 012 2v1H7V5a2 2 0 012-2z"})}),"Download List (.csv)"]}),(0,r.jsxs)("button",{onClick:()=>{var e,t;let s=new Date,r=s.toISOString().split("T")[0],a=O(),n=new h.Ay({orientation:"portrait",unit:"mm",format:"a4"});n.setFontSize(20),n.setFont("helvetica","bold"),n.setTextColor(255,102,0),n.text("LSVR WAREHOUSE",105,20,{align:"center"}),n.setFontSize(16),n.setTextColor(0,0,0),n.text("EQUIPMENT QUOTE",105,30,{align:"center"}),n.setFontSize(10),n.setFont("helvetica","normal"),n.text("Date: ".concat(s.toLocaleDateString()),20,45),n.text("Time: ".concat(s.toLocaleTimeString()),20,50),n.text("Quote #: ".concat(Date.now().toString().slice(-8)),20,55),n.text("User: ".concat((null==m||null==(e=m.user)?void 0:e.name)||"Unknown"),120,45),n.text("Email: ".concat((null==m||null==(t=m.user)?void 0:t.email)||"N/A"),120,50),C&&n.text("Client: ".concat(C.name),120,55),n.setLineWidth(.5);let l=C?65:60;n.line(20,l,190,l);let o=C?75:70;if(n.setFont("helvetica","bold"),n.setFontSize(10),n.text("Item",20,o),n.text("Category",100,o),n.text("Serial #",135,o),n.text("Value",170,o),n.setLineWidth(.2),n.line(20,o+2,190,o+2),o+=8,n.setFont("helvetica","normal"),n.setFontSize(9),i.items.forEach(e=>{let t=e.asset.currentValue||e.asset.purchasePrice||0,s=n.splitTextToSize(e.asset.name,75);n.text(s,20,o),n.text((0,g.AU)(e.asset.category),100,o),n.text(e.asset.serialNumber||"N/A",135,o),n.text("$".concat(t.toLocaleString()),170,o),(o+=Math.max(6,5*s.length))>260&&(n.addPage(),o=20)}),o+=5,n.setLineWidth(.5),n.line(20,o,190,o),o+=8,n.setFont("helvetica","bold"),n.setFontSize(11),M.length>0){n.text("Items Checking Out: ".concat(M.length),20,o);let e=M.reduce((e,t)=>e+(t.asset.currentValue||t.asset.purchasePrice||0),0);n.text("Checkout Value: $".concat(e.toLocaleString()),80,o),n.setTextColor(128,128,128),n.text("|",115,o),n.setTextColor(0,0,0),n.setFontSize(12),n.text("TOTAL VALUE:",125,o),n.setTextColor(255,102,0),n.text("$".concat(a.toLocaleString()),170,o),n.setTextColor(0,0,0),n.setFontSize(11),o+=6}A.length>0&&(n.text("Items Checking In: ".concat(A.length),20,o),o+=6),n.setTextColor(128,128,128),n.setFontSize(8),n.setFont("helvetica","italic"),n.text("This quote is valid for reference purposes only.",105,270,{align:"center"}),n.text("Generated by LSVR Inventory Management System",105,275,{align:"center"}),n.text("Page 1",105,285,{align:"center"}),n.save("equipment-quote-".concat(r,".pdf"))},disabled:b,className:"flex items-center px-3 py-2 bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white rounded-md text-sm font-medium disabled:cursor-not-allowed transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Download Quote (PDF)"]}),(0,r.jsx)("div",{className:"text-xs text-gray-400 hover:text-gray-300 transition-colors flex items-center ml-2",children:"\uD83D\uDCA1 Save these documents for your records"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:s,disabled:b,className:"flex-1 px-4 py-2 border border-gray-600 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:E,disabled:b,className:"flex-1 px-4 py-2 bg-brand-orange hover:bg-orange-600 disabled:opacity-50 text-white rounded-md text-sm font-medium disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l-3-2.647z"})]}),"Processing ",i.items.length," Transaction",1!==i.items.length?"s":"","..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Confirm & Process All Transactions"]})})]}),(0,r.jsx)("div",{className:"mt-3 text-xs text-brand-secondary-text text-center",children:"⚠️ This action cannot be undone. Please review all details carefully."})]})]})})]})}function f(e){let{onPresetSelect:t,onAddMissingItems:s,onOpenSubstitutions:a,isDetecting:n=!1}=e,{state:i}=(0,d._)(),[o,c]=(0,l.useState)([]),[m,x]=(0,l.useState)(!1),[h,u]=(0,l.useState)(!0);(0,l.useEffect)(()=>{if(0===i.items.length)return void c([]);p()},[i.items]);let p=async()=>{if(0!==i.items.length){x(!0);try{let t=i.items.map(e=>e.assetId),s=await fetch("/api/presets/detect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assetIds:t})});if(s.ok){var e;let t=await s.json();c(t.matches||[]),(null==(e=t.matches)?void 0:e.length)>0&&t.matches[0].matchPercentage>=70&&u(!0)}}catch(e){console.error("Failed to detect presets:",e)}finally{x(!1)}}};return 0===i.items.length||0===o.length?null:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("button",{onClick:()=>u(!h),className:"flex items-center space-x-3 text-left",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-100 to-purple-200 rounded-lg",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Detected Presets"}),(0,r.jsxs)("p",{className:"text-sm text-brand-primary-text",children:[o.length," preset",1!==o.length?"s":""," match your scanned items"]})]}),(0,r.jsx)("svg",{className:"w-5 h-5 text-white/50 hover:text-white/80 transition-colors transition-transform duration-200 ".concat(h?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),m&&(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"})]}),h&&(0,r.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-xl border border-gray-600/50 shadow-sm",children:(0,r.jsx)("div",{className:"p-6 space-y-4",children:o.map((e,n)=>{var l,i;return(0,r.jsx)("div",{className:"relative overflow-hidden rounded-xl border transition-all duration-200 hover:shadow-md ".concat(e.matchPercentage>=90?"bg-gradient-to-r from-green-50 to-green-100/50 border-green-200/50":e.matchPercentage>=70?"bg-gradient-to-r from-blue-50 to-blue-100/50 border-blue-200/50":"bg-gradient-to-r from-orange-50 to-orange-100/50 border-orange-200/50"),children:(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-brand-primary-text",children:e.preset.name}),(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ".concat((l=e.matchPercentage)>=90?"bg-green-100 text-green-800":l>=70?"bg-blue-100 text-blue-800":l>=50?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"),children:[e.matchPercentage,"% match"]}),e.preset.category&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-brand-primary-text",children:e.preset.category})]}),e.preset.description&&(0,r.jsx)("p",{className:"text-sm text-brand-primary-text mb-3",children:e.preset.description})]})}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,r.jsxs)("span",{className:"text-brand-primary-text",children:["Progress: ",e.matchedItems," of ",e.totalItems," items"]}),(0,r.jsxs)("span",{className:"font-semibold ".concat((i=e.matchPercentage)>=90?"text-green-600":i>=70?"text-blue-600":i>=50?"text-yellow-600":"text-orange-600"),children:[e.matchPercentage,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat(e.matchPercentage>=90?"bg-gradient-to-r from-green-500 to-green-600":e.matchPercentage>=70?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-orange-500 to-orange-600"),style:{width:"".concat(e.matchPercentage,"%")}})})]}),e.missingItems.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h5",{className:"text-sm font-semibold text-gray-300 mb-2",children:["Missing Items (",e.missingItems.length,"):"]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.missingItems.slice(0,5).map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(e.isRequired?"bg-red-100 text-red-800":"bg-gray-100 dark:bg-gray-800 text-brand-primary-text"),children:[e.name," ",e.quantity>1&&"(".concat(e.quantity,")"),e.isRequired&&" *"]},e.id)),e.missingItems.length>5&&(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-brand-primary-text",children:["+",e.missingItems.length-5," more"]})]})]}),e.availableSubstitutions&&e.availableSubstitutions.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h5",{className:"text-sm font-semibold text-green-700 mb-2",children:"Available Substitutions:"}),(0,r.jsxs)("div",{className:"text-xs text-green-600",children:[e.availableSubstitutions.length," item",1!==e.availableSubstitutions.length?"s":""," have substitute options"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 pt-3 border-t border-gray-700/50",children:[e.matchPercentage>=50&&(0,r.jsx)("button",{onClick:()=>null==t?void 0:t(e.preset.id),className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-[1.02] text-sm",children:"Complete This Preset"}),e.missingItems.length>0&&(0,r.jsx)("button",{onClick:()=>null==s?void 0:s(e.preset.id,e.missingItems),className:"px-4 py-2 border border-gray-600 text-gray-300 hover rounded-lg font-medium transition-all duration-200 text-sm",children:"Add Missing Items"}),e.availableSubstitutions&&e.availableSubstitutions.length>0&&(0,r.jsx)("button",{onClick:()=>null==a?void 0:a(e.preset.id,e.preset.name,e.availableSubstitutions),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-[1.02] text-sm",children:"View Substitutions"})]})]})},e.preset.id)})})})]})}function v(e){let{isOpen:t,onClose:s,onConfirm:a,availableSubstitutions:n,presetName:i}=e;(0,x.K)(t);let[o,c]=(0,l.useState)({}),[d,m]=(0,l.useState)(!1);if(!t)return null;let h=async()=>{m(!0);try{await a(o),s()}catch(e){console.error("Failed to apply substitutions:",e)}finally{m(!1)}},u=Object.keys(o).length,p=n.length;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-gray-900/5 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-brand-primary-text",children:"Item Substitutions"}),(0,r.jsxs)("p",{className:"text-sm text-brand-primary-text mt-1",children:['Select substitute items for "',i,'"']})]}),(0,r.jsx)("button",{onClick:s,className:"text-white/50 hover:text-white/80 transition-colors hover transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"px-6 py-4 bg-gray-900/5/30",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("span",{className:"text-brand-primary-text",children:["Substitutions selected: ",u," of ",p]}),(0,r.jsxs)("span",{className:"font-medium text-purple-600",children:[Math.round(u/p*100),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(u/p*100,"%")}})})]}),(0,r.jsx)("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:(0,r.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,r.jsxs)("div",{className:"border border-gray-600 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("h3",{className:"font-medium text-brand-primary-text flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Missing: ",e.itemName]}),(0,r.jsx)("p",{className:"text-sm text-brand-primary-text",children:"Select a substitute item from the available options:"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center p-3 border border-gray-600 rounded-lg hover cursor-pointer transition-colors",children:[(0,r.jsx)("input",{type:"radio",name:"substitute-".concat(e.itemId),value:"",checked:!o[e.itemId],onChange:()=>{let t={...o};delete t[e.itemId],c(t)},className:"w-4 h-4 text-purple-600 border-gray-600 focus:ring-purple-500 focus:ring-2"}),(0,r.jsx)("span",{className:"ml-3 text-sm text-gray-300",children:"Skip this item (proceed without substitute)"})]}),e.substitutes.map(t=>(0,r.jsxs)("label",{className:"flex items-center p-3 border border-gray-600 rounded-lg hover cursor-pointer transition-colors",children:[(0,r.jsx)("input",{type:"radio",name:"substitute-".concat(e.itemId),value:t.id,checked:o[e.itemId]===t.id,onChange:()=>{var s,r;return s=e.itemId,r=t.id,void c(e=>({...e,[s]:r}))},className:"w-4 h-4 text-purple-600 border-gray-600 focus:ring-purple-500 focus:ring-2"}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-brand-primary-text",children:t.name}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("AVAILABLE"===t.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:t.status})]}),t.description&&(0,r.jsx)("p",{className:"text-xs text-brand-primary-text mt-1",children:t.description})]})]},t.id))]})]},e.itemId))})}),(0,r.jsx)("div",{className:"px-6 py-4 border-t border-gray-700 bg-gray-900/5/30",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm text-brand-primary-text",children:u>0&&(0,r.jsxs)(r.Fragment,{children:["Selected ",u," substitute",1!==u?"s":""]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{onClick:s,className:"px-4 py-2 border border-gray-600 text-gray-300 hover rounded-lg font-medium transition-all duration-200",children:"Cancel"}),(0,r.jsx)("button",{onClick:h,disabled:d,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l-3-2.647z"})]}),"Applying..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Apply Substitutions"]})})]})]})})]})})}function j(){let{data:e,status:t}=(0,a.useSession)(),s=(0,n.useRouter)(),{state:i,removeItem:x,clearCart:h,processCart:u,addItem:p,canAddItem:j,getCheckInItems:y,getCheckOutItems:N}=(0,d._)(),[w,k]=(0,l.useState)(""),[C,L]=(0,l.useState)(!1),[S,I]=(0,l.useState)(!1),[A,M]=(0,l.useState)(""),[T,E]=(0,l.useState)(""),[O,V]=(0,l.useState)("CHECK_OUT"),[D,P]=(0,l.useState)(!1),[U,W]=(0,l.useState)(!1),[_,H]=(0,l.useState)(!1),[B,z]=(0,l.useState)(null),F=e=>{if(e.description&&""!==e.description.trim())return e.description;let t="".concat(e.manufacturer||""," ").concat(e.model||"").trim();return t&&"null"!==t&&"Generic"!==t?t:e.name&&""!==e.name.trim()?e.name:"Asset ".concat(e.id)};(0,l.useEffect)(()=>{if("loading"!==t&&"unauthenticated"===t)return void s.push("/auth/signin")},[t,s]);let R=async e=>{if(e.trim()){I(!0),M(""),E("");try{let t=await fetch("/api/assets/search?q=".concat(encodeURIComponent(e.trim())));if(t.ok){let e=await t.json();if(0===e.length)return void M("No asset found with this code");let s=e[0];if("CHECK_OUT"===O&&"AVAILABLE"!==s.status)return void M("Cannot check out ".concat(F(s)," - currently ").concat(s.status.toLowerCase().replace("_"," ")));if("CHECK_IN"===O&&"CHECKED_OUT"!==s.status)return void M("Cannot check in ".concat(F(s)," - currently ").concat(s.status.toLowerCase().replace("_"," ")));let r=j(s,O);if(!r.canAdd)return void M(r.reason||"Cannot add this asset to cart");p(s,O)?(E("✅ ".concat(F(s)," added to ").concat(O.toLowerCase().replace("_"," ")," queue")),k(""),setTimeout(()=>E(""),3e3),setTimeout(()=>{W(!0),setTimeout(()=>W(!1),1500)},500)):M("Failed to add asset to cart")}else M("Failed to search for asset")}catch(e){console.error("Search error:",e),M("An error occurred while searching")}finally{I(!1)}}},K=async()=>{let e=await u();return e.success&&0===e.errors.length&&(P(!1),s.push("/assets"),setTimeout(()=>{alert("✅ Successfully processed ".concat(i.items.length," transaction").concat(1!==i.items.length?"s":"","!"))},100)),e},q=async e=>{try{let t=await fetch("/api/presets/".concat(e));if(t.ok){let e=await t.json(),s=i.items.map(e=>e.assetId),r=e.items.filter(e=>e.assetId&&!s.includes(e.assetId));if(r.length>0){let t="Add ".concat(r.length,' missing items from "').concat(e.name,'" preset?');confirm(t)&&await Q(r)}else E('✅ All items from "'.concat(e.name,'" preset are already in your cart!')),setTimeout(()=>E(""),3e3)}}catch(e){console.error("Failed to load preset:",e),M("Failed to load preset details")}},G=async(e,t)=>{try{let s=await fetch("/api/presets/".concat(e));if(s.ok){let e=(await s.json()).items.filter(e=>t.some(t=>t.id===e.id));e.length>0&&await Q(e)}}catch(e){console.error("Failed to add missing items:",e),M("Failed to add missing items")}},Q=async e=>{let t=0,s=0;for(let r of e)r.assetId&&(p(r.asset,O)?t++:s++);t>0&&(E("✅ Added ".concat(t," item").concat(1!==t?"s":""," from preset!")),setTimeout(()=>E(""),3e3)),s>0&&(M("⚠️ Failed to add ".concat(s," item").concat(1!==s?"s":""," (already in cart or unavailable)")),setTimeout(()=>M(""),5e3))},$=async e=>{if(B)try{let t=0;for(let[s,r]of Object.entries(e))if(r){let e=await fetch("/api/assets/".concat(r));if(e.ok){let s=await e.json();p(s,O)&&t++}}t>0&&(E("✅ Added ".concat(t," substitute item").concat(1!==t?"s":"",' from "').concat(B.presetName,'" preset!')),setTimeout(()=>E(""),3e3)),z(null)}catch(e){console.error("Failed to add substitutions:",e),M("Failed to add substitute items")}};if("loading"===t)return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-brand-dark-blue via-gray-925 to-brand-black",children:[(0,r.jsx)(c.A,{}),(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-orange"})})]});if(!e)return null;let J=y(),X=N();return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-brand-dark-blue via-gray-925 to-brand-black",children:[(0,r.jsx)(c.A,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-3 sm:py-6 lg:py-8 px-3 sm:px-4 lg:px-8",children:[(0,r.jsx)("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("div",{className:"p-1.5 sm:p-2 bg-white/5 hover:bg-white/10 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6H19M7 13v0a2 2 0 002 2h8.5m-10.5-2v-2a2 2 0 012-2h8.5"})})}),(0,r.jsx)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold bg-gradient-to-r from-white to-brand-secondary-text bg-clip-text text-transparent",children:"Transaction Cart"})]}),(0,r.jsx)("p",{className:"text-xs sm:text-sm lg:text-base text-brand-secondary-text ml-9 sm:ml-11 hidden sm:block",children:"Streamline your asset management with bulk operations"})]}),(0,r.jsxs)(o(),{href:"/assets",className:"inline-flex items-center justify-center px-3 py-2 sm:px-4 sm:py-2.5 bg-gray-900/5 border border-gray-600 rounded-lg text-gray-300 hover font-medium transition-all duration-200 shadow-sm hover:shadow-md text-sm sm:text-base w-full sm:w-auto",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1.5 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]})]})}),(0,r.jsxs)("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[(0,r.jsx)("div",{className:"order-1 lg:order-1 lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-gray-900/5 backdrop-blur-sm rounded-xl sm:rounded-2xl border border-gray-600/50 shadow-lg p-3 sm:p-5 lg:p-8 lg:sticky lg:top-6 transition-all duration-300",children:[(0,r.jsxs)("div",{className:"mb-4 sm:mb-6",children:[(0,r.jsxs)("h2",{className:"text-base sm:text-lg font-semibold text-brand-primary-text mb-3 sm:mb-4 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2 sm:mr-3"}),"Transaction Mode"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 bg-gray-900/5 rounded-xl p-1.5 border border-gray-600",children:[(0,r.jsxs)("button",{onClick:()=>V("CHECK_OUT"),className:"px-3 py-2.5 sm:px-4 sm:py-3 text-xs sm:text-sm font-semibold rounded-lg transition-all duration-200 flex flex-col sm:flex-row items-center justify-center touch-manipulation ".concat("CHECK_OUT"===O?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/25 transform scale-[1.02]":"text-gray-300 hover:bg-gray-800 bg-gray-800"),children:[(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 mb-1 sm:mb-0 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,r.jsx)("span",{className:"text-xs sm:text-sm",children:"Check Out"})]}),(0,r.jsxs)("button",{onClick:()=>V("CHECK_IN"),className:"px-3 py-2.5 sm:px-4 sm:py-3 text-xs sm:text-sm font-semibold rounded-lg transition-all duration-200 flex flex-col sm:flex-row items-center justify-center touch-manipulation ".concat("CHECK_IN"===O?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/25 transform scale-[1.02]":"text-gray-300 hover:bg-gray-800 bg-gray-800"),children:[(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 mb-1 sm:mb-0 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{className:"text-xs sm:text-sm",children:"Check In"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"}),(0,r.jsx)("h3",{className:"text-base font-semibold text-brand-primary-text",children:"Add Items"})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),R(w)},className:"space-y-3",children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("input",{type:"text",value:w,onChange:e=>k(e.target.value),placeholder:"Scan or enter ID",className:"w-full pl-10 pr-10 py-3 sm:py-3.5 border-2 border-gray-600 rounded-xl bg-gray-900/5 text-brand-primary-text placeholder-gray-600 focus:outline-none focus:border-blue-500/50 transition-all duration-200 text-sm font-medium text-center touch-manipulation",autoFocus:!0}),(0,r.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),(0,r.jsx)("button",{type:"button",onClick:()=>L(!0),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 text-gray-400 hover:text-gray-300 rounded-lg transition-colors touch-manipulation",title:"Open camera scanner",children:(0,r.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),(0,r.jsx)("button",{type:"submit",disabled:S||!w.trim(),className:"w-full px-4 py-3 text-white rounded-xl font-semibold transition-all duration-200 flex items-center justify-center shadow-md active:scale-95 disabled:transform-none disabled:opacity-50 disabled:cursor-not-allowed text-sm touch-manipulation ".concat("CHECK_OUT"===O?"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 shadow-orange-500/25 hover:shadow-orange-500/40":"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 shadow-green-500/25 hover:shadow-green-500/40"),children:S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-4 h-4 animate-spin mr-2",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l-3-2.647z"})]}),"Searching..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add to ","CHECK_OUT"===O?"Checkout":"Checkin"," Queue"]})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-xs text-brand-secondary-text leading-relaxed",children:"Scan with camera or manually enter asset identifiers"})})]}),A&&(0,r.jsx)("div",{className:"p-4 bg-gradient-to-r bg-red-900/20 border border-red-600/50 rounded-xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:(0,r.jsxs)("p",{className:"text-sm text-red-400 flex items-center font-medium",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),A]})}),T&&(0,r.jsx)("div",{className:"p-4 bg-green-900/20 border border-green-600/50 rounded-xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:(0,r.jsxs)("p",{className:"text-sm text-green-400 flex items-center font-medium",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),T]})})]})]})}),(0,r.jsxs)("div",{className:"order-2 lg:order-2 lg:col-span-2",children:[(0,r.jsx)(f,{onPresetSelect:q,onAddMissingItems:G,onOpenSubstitutions:(e,t,s)=>{z({presetId:e,presetName:t,substitutions:s}),H(!0)},isDetecting:U}),(0,r.jsxs)("div",{className:"bg-gray-900/5 backdrop-blur-sm rounded-xl sm:rounded-2xl border border-gray-600/50 shadow-lg",children:[(0,r.jsx)("div",{className:"p-3 sm:p-5 lg:p-8 border-b border-gray-600/50",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"}),(0,r.jsxs)("h2",{className:"text-base sm:text-lg font-bold text-brand-primary-text",children:["Cart Items (",i.items.length,")"]})]}),(0,r.jsxs)("div",{className:"text-sm text-brand-primary-text ml-5 flex flex-wrap gap-2",children:[X.length>0&&(0,r.jsxs)("span",{className:"inline-flex items-center px-2 sm:px-3 py-1 rounded-full text-xs font-medium bg-orange-900/30 text-orange-400",children:[X.length," to check out"]}),J.length>0&&(0,r.jsxs)("span",{className:"inline-flex items-center px-2 sm:px-3 py-1 rounded-full text-xs font-medium bg-green-900/30 text-green-400",children:[J.length," to check in"]})]})]}),i.items.length>0&&(0,r.jsx)("button",{onClick:h,className:"w-full sm:w-auto px-4 sm:px-6 py-2.5 sm:py-3 text-red-400 hover:bg-gray-800 bg-gray-800 rounded-xl transition-all duration-200 text-sm font-semibold shadow-sm hover:shadow-md transform hover:scale-[1.02] active:scale-95 border border-red-600/50 touch-manipulation",children:"Clear All"})]})}),(0,r.jsx)("div",{className:"p-3 sm:p-5 lg:p-8",children:0===i.items.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-blue-900/30 to-purple-900/30 rounded-2xl flex items-center justify-center mb-6",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold bg-gradient-to-r from-white to-brand-secondary-text bg-clip-text text-transparent mb-3",children:"Ready to scan"}),(0,r.jsx)("p",{className:"text-brand-primary-text max-w-sm mx-auto leading-relaxed",children:"Use the scanner or enter asset codes to start building your cart"})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[X.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"p-2 bg-white/5 hover:bg-white/10 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,r.jsxs)("h3",{className:"text-xl font-bold text-orange-400",children:["Check Out Queue (",X.length,")"]})]}),(0,r.jsx)("div",{className:"bg-orange-900/20 rounded-xl border border-orange-600/50 overflow-hidden",children:X.map((e,t)=>{var s;return(0,r.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 hover transition-all duration-200 space-y-3 sm:space-y-0 ".concat(t!==X.length-1?"border-b border-orange-600/30":""),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:e.asset.imageUrl?(0,r.jsx)("img",{src:e.asset.imageUrl,alt:F(e.asset),className:"w-12 h-12 object-cover rounded-lg border border-orange-600/50"}):(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-900/30 to-orange-800/30 rounded-lg flex items-center justify-center border border-orange-600/50",children:(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDCE6"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-brand-primary-text text-base mb-1",children:e.asset.name}),e.asset.description&&(0,r.jsx)("p",{className:"text-xs text-gray-400 overflow-hidden leading-relaxed",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.asset.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-brand-primary-text",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),(0,g.AU)(e.asset.category)]}),e.asset.serialNumber&&(0,r.jsxs)("span",{className:"flex items-center truncate",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"S/N: ",e.asset.serialNumber]}),e.asset.location&&(0,r.jsxs)("span",{className:"flex items-center truncate",children:[(0,r.jsxs)("svg",{className:"w-3 h-3 mr-1 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.asset.location]}),(e.asset.currentValue||e.asset.purchasePrice)&&(0,r.jsxs)("span",{className:"flex items-center font-medium text-orange-400 col-span-2",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Value: $",null==(s=e.asset.currentValue||e.asset.purchasePrice)?void 0:s.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between sm:justify-end space-x-2 flex-shrink-0 w-full sm:w-auto",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-orange-400 bg-orange-900/30 px-2 py-1 rounded-full",children:"Checking Out"}),(0,r.jsx)("button",{onClick:()=>x(e.assetId),className:"text-red-400 hover p-2 rounded-lg hover transition-all duration-200 transform hover:scale-110 active:scale-95 touch-manipulation",title:"Remove from cart",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},e.assetId)})})]}),J.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"p-2 bg-white/5 hover:bg-white/10 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("h3",{className:"text-xl font-bold text-green-400",children:["Check In Queue (",J.length,")"]})]}),(0,r.jsx)("div",{className:"bg-green-900/20 rounded-xl border border-green-600/50 overflow-hidden",children:J.map((e,t)=>{var s;return(0,r.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-3 sm:p-4 hover transition-all duration-200 space-y-3 sm:space-y-0 ".concat(t!==J.length-1?"border-b border-green-600/30":""),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:e.asset.imageUrl?(0,r.jsx)("img",{src:e.asset.imageUrl,alt:F(e.asset),className:"w-12 h-12 object-cover rounded-lg border border-green-600/50"}):(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-900/30 to-green-800/30 rounded-lg flex items-center justify-center border border-green-600/50",children:(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDCE6"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-brand-primary-text text-base mb-1",children:e.asset.name}),e.asset.description&&(0,r.jsx)("p",{className:"text-xs text-gray-400 overflow-hidden leading-relaxed",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.asset.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-brand-primary-text",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),(0,g.AU)(e.asset.category)]}),e.asset.serialNumber&&(0,r.jsxs)("span",{className:"flex items-center truncate",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"S/N: ",e.asset.serialNumber]}),e.asset.location&&(0,r.jsxs)("span",{className:"flex items-center truncate",children:[(0,r.jsxs)("svg",{className:"w-3 h-3 mr-1 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.asset.location]}),(e.asset.currentValue||e.asset.purchasePrice)&&(0,r.jsxs)("span",{className:"flex items-center font-medium text-green-400 col-span-2",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Value: $",null==(s=e.asset.currentValue||e.asset.purchasePrice)?void 0:s.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between sm:justify-end space-x-2 flex-shrink-0 w-full sm:w-auto",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-green-400 bg-green-900/30 px-2 py-1 rounded-full",children:"Checking In"}),(0,r.jsx)("button",{onClick:()=>x(e.assetId),className:"text-red-400 hover p-2 rounded-lg hover transition-all duration-200 transform hover:scale-110 active:scale-95 touch-manipulation",title:"Remove from cart",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},e.assetId)})})]})]})}),i.items.length>0&&(0,r.jsx)("div",{className:"p-4 sm:p-6 lg:p-8 border-t border-gray-600/50 bg-gradient-to-r from-gray-900/50 to-gray-800/30 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,r.jsx)("div",{className:"text-sm text-brand-primary-text",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"font-semibold text-brand-primary-text text-base sm:text-lg",children:i.items.length}),(0,r.jsx)("span",{className:"ml-1 text-sm sm:text-base",children:"total items ready to process"})]})]})}),(0,r.jsxs)("button",{onClick:()=>P(!0),className:"w-full sm:w-auto px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl font-semibold transition-all duration-200 flex items-center justify-center shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 transform hover:scale-[1.02] active:scale-95 text-sm sm:text-base touch-manipulation",children:[(0,r.jsx)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 mr-2 sm:mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Process All Transactions"]})]})})]})]})]})]}),(0,r.jsx)(m.A,{isOpen:C,onClose:()=>L(!1),onScanSuccess:(e,t)=>{console.log("Scanned: ".concat(e," (").concat(t,")")),L(!1),k(e),R(e)},onScanError:e=>{console.error("Scan error:",e),M("Camera scanning error. Please try manual entry.")}}),(0,r.jsx)(b,{isOpen:D,onClose:()=>P(!1),onConfirm:K}),(0,r.jsx)(v,{isOpen:_,onClose:()=>{H(!1),z(null)},onConfirm:$,availableSubstitutions:(null==B?void 0:B.substitutions)||[],presetName:(null==B?void 0:B.presetName)||""})]})}},62432:(e,t,s)=>{"use strict";s.d(t,{_:()=>m,e:()=>d});var r=s(95155),a=s(12115),n=s(12108);let l=(0,a.createContext)(void 0),i="asset-cart";function o(e,t){switch(t.type){case"ADD_ITEM":let s=e.items.findIndex(e=>e.assetId===t.payload.assetId);if(s>=0){let r=[...e.items];return r[s]={...t.payload,addedAt:new Date().toISOString()},{...e,items:r}}return{...e,items:[...e.items,{...t.payload,addedAt:new Date().toISOString()}]};case"REMOVE_ITEM":return{...e,items:e.items.filter(e=>e.assetId!==t.payload.assetId)};case"UPDATE_ITEM":return{...e,items:e.items.map(e=>e.assetId===t.payload.assetId?{...e,...t.payload.updates}:e)};case"CLEAR_CART":return{...e,items:[],lastProcessedAt:new Date().toISOString()};case"SET_PROCESSING":return{...e,isProcessing:t.payload.isProcessing};case"LOAD_FROM_STORAGE":return t.payload;default:return e}}let c={items:[],isProcessing:!1};function d(e){let{children:t}=e,[s,d]=(0,a.useReducer)(o,c),{data:m}=(0,n.useSession)();(0,a.useEffect)(()=>{try{let t=localStorage.getItem(i);if(t){var e;let s=JSON.parse(t),r=(null==(e=s.items)?void 0:e.filter(e=>{let t=new Date(e.addedAt);return(new Date().getTime()-t.getTime())/36e5<24}))||[];d({type:"LOAD_FROM_STORAGE",payload:{...s,items:r,isProcessing:!1}})}}catch(e){console.error("Failed to load cart from storage:",e)}},[]),(0,a.useEffect)(()=>{try{localStorage.setItem(i,JSON.stringify(s))}catch(e){console.error("Failed to save cart to storage:",e)}},[s]);let x=(0,a.useCallback)((e,t)=>{let r=s.items.find(t=>t.assetId===e.id);if(r&&r.action===t)return{canAdd:!1,reason:"Asset is already in cart for ".concat(t.toLowerCase().replace("_"," "))};if("CHECK_OUT"===t){if("AVAILABLE"!==e.status)return{canAdd:!1,reason:"Asset is ".concat(e.status.toLowerCase().replace("_"," ")," and cannot be checked out")}}else if("CHECK_IN"===t&&"CHECKED_OUT"!==e.status)return{canAdd:!1,reason:"Asset is ".concat(e.status.toLowerCase().replace("_"," ")," and cannot be checked in")};return{canAdd:!0}},[s.items]),h=(0,a.useCallback)((e,t)=>{let s=x(e,t);if(!s.canAdd)return console.warn("Cannot add item to cart:",s.reason),!1;let r={assetId:e.id,asset:e,action:t};return"CHECK_OUT"===t&&(null==m?void 0:m.user)&&(r.assignedUserId=m.user.id,r.assignedUserName=m.user.name||m.user.email||"Current User"),d({type:"ADD_ITEM",payload:r}),!0},[x,m]),u=(0,a.useCallback)(e=>{d({type:"REMOVE_ITEM",payload:{assetId:e}})},[]),p=(0,a.useCallback)((e,t)=>{d({type:"UPDATE_ITEM",payload:{assetId:e,updates:t}})},[]),g=(0,a.useCallback)(()=>{d({type:"CLEAR_CART"})},[]),b=(0,a.useCallback)(async()=>{if(0===s.items.length)return{success:!1,errors:["Cart is empty"]};d({type:"SET_PROCESSING",payload:{isProcessing:!0}});try{var e,t;let r=s.items.filter(e=>"CHECK_IN"===e.action),a=s.items.filter(e=>"CHECK_OUT"===e.action),n=[],l=0;if(r.length>0)try{let t=await fetch("/api/transactions/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"CHECK_IN",items:r.map(e=>({assetId:e.assetId,notes:e.notes}))})});if(t.ok){let s=await t.json();l+=s.processed||0,(null==(e=s.errors)?void 0:e.length)>0&&n.push(...s.errors)}else{let e=await t.json();n.push("Check-in failed: ".concat(e.error))}}catch(e){n.push("Check-in error: ".concat(e.message))}if(a.length>0)try{let e=await fetch("/api/transactions/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"CHECK_OUT",items:a.map(e=>({assetId:e.assetId,notes:e.notes,expectedReturnDate:e.expectedReturnDate,assignedUserId:e.assignedUserId}))})});if(e.ok){let s=await e.json();l+=s.processed||0,(null==(t=s.errors)?void 0:t.length)>0&&n.push(...s.errors)}else{let t=await e.json();n.push("Check-out failed: ".concat(t.error))}}catch(e){n.push("Check-out error: ".concat(e.message))}let i=l>0;return i&&0===n.length&&g(),{success:i,errors:n}}catch(e){return console.error("Cart processing error:",e),{success:!1,errors:["Failed to process cart"]}}finally{d({type:"SET_PROCESSING",payload:{isProcessing:!1}})}},[s.items,g]),f=(0,a.useCallback)(()=>s.items.length,[s.items]),v=(0,a.useCallback)(e=>s.items.some(t=>t.assetId===e),[s.items]),j=(0,a.useCallback)(()=>s.items.filter(e=>"CHECK_IN"===e.action),[s.items]),y=(0,a.useCallback)(()=>s.items.filter(e=>"CHECK_OUT"===e.action),[s.items]);return(0,r.jsx)(l.Provider,{value:{state:s,addItem:h,removeItem:u,updateItem:p,clearCart:g,processCart:b,getItemCount:f,hasItem:v,getCheckInItems:j,getCheckOutItems:y,canAddItem:x},children:t})}function m(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},83686:()=>{},98273:(e,t,s)=>{"use strict";s.d(t,{K:()=>a});var r=s(12115);function a(e){(0,r.useEffect)(()=>{if(!e)return;let t=document.body.style.overflow,s=document.body.style.paddingRight,r=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",r>0&&(document.body.style.paddingRight="".concat(r,"px")),()=>{document.body.style.overflow=t,document.body.style.paddingRight=s}},[e])}}},e=>{e.O(0,[5604,3524,5033,3930,2108,7244,8015,1576,8947,9659,8441,5964,7358],()=>e(e.s=13506)),_N_E=e.O()}]);