(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8453],{13506:(e,t,s)=>{Promise.resolve().then(s.bind(s,59728))},59728:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(95155),a=s(12108),n=s(35695),i=s(12115),o=s(6874),l=s.n(o),c=s(48947),d=s(62432),m=s(19659);function x(e){let{isOpen:t,onClose:s,onConfirm:n}=e,{state:o,getCheckInItems:l,getCheckOutItems:c}=(0,d._)(),{data:m}=(0,a.useSession)(),[x,h]=(0,i.useState)(!1);if(!t)return null;let u=l(),g=c(),p=async()=>{h(!0);try{let e=await n();e.success?0===e.errors.length||alert("Processed with some errors:\n".concat(e.errors.join("\n"))):alert("Failed to process transactions:\n".concat(e.errors.join("\n")))}catch(e){console.error("Processing error:",e),alert("An error occurred while processing the transactions")}finally{h(!1)}},b=()=>o.items.reduce((e,t)=>e+(t.asset.currentValue||t.asset.purchasePrice||0),0);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:s}),(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-gray-900/5 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-brand-primary-text",children:"Confirm Transactions"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-brand-secondary-text mt-1",children:["Review all assets before processing ",o.items.length," transaction",1!==o.items.length?"s":""]})]}),(0,r.jsx)("button",{onClick:s,disabled:x,className:"text-white/50 hover:text-white/80 transition-colors hover disabled:opacity-50",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[g.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"bg-orange-100 p-2 rounded-lg mr-3",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-brand-primary-text",children:["Assets to Check Out (",g.length,")"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-brand-secondary-text",children:"These assets will be marked as checked out"})]})]}),(0,r.jsx)("div",{className:"bg-orange-50 rounded-lg border border-orange-200 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-orange-300",children:[(0,r.jsx)("thead",{className:"bg-orange-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider",children:"Asset"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider",children:"Assigned To"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider",children:"Return Date"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider",children:"Value"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-orange-300",children:g.map(e=>{var t,s,a;return(0,r.jsxs)("tr",{className:"hover",children:[(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 mr-3 flex-shrink-0",children:e.asset.imageUrl?(0,r.jsx)("img",{src:e.asset.imageUrl,alt:e.asset.name,className:"w-10 h-10 object-cover rounded-lg border border-gray-600"}):(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-900/5 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm",children:"\uD83D\uDCE6"})})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-brand-primary-text truncate",children:e.asset.name}),(0,r.jsxs)("p",{className:"text-xs text-gray-600 dark:text-brand-secondary-text truncate",children:[e.asset.category.replace("_"," ")," • ",e.asset.serialNumber||"No S/N"]}),e.notes&&(0,r.jsxs)("p",{className:"text-xs text-gray-300 mt-1 italic",children:['"',e.notes,'"']})]})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm text-brand-primary-text",children:e.assignedUserName||(null==m||null==(t=m.user)?void 0:t.name)||(null==m||null==(s=m.user)?void 0:s.email)||"Current User"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm text-brand-primary-text",children:e.expectedReturnDate?new Date(e.expectedReturnDate).toLocaleDateString():"No date set"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm font-medium text-brand-primary-text",children:e.asset.currentValue||e.asset.purchasePrice?"$".concat(null==(a=e.asset.currentValue||e.asset.purchasePrice)?void 0:a.toLocaleString()):"-"})})]},e.assetId)})})]})})})]}),u.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"bg-green-100 p-2 rounded-lg mr-3",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-brand-primary-text",children:["Assets to Check In (",u.length,")"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-brand-secondary-text",children:"These assets will be returned and marked as available"})]})]}),(0,r.jsx)("div",{className:"bg-green-50 rounded-lg border border-green-200 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-green-300",children:[(0,r.jsx)("thead",{className:"bg-green-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-800 uppercase tracking-wider",children:"Asset"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-800 uppercase tracking-wider",children:"Current Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-800 uppercase tracking-wider",children:"Return Notes"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-800 uppercase tracking-wider",children:"Value"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-green-300",children:u.map(e=>{var t;return(0,r.jsxs)("tr",{className:"hover",children:[(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 mr-3 flex-shrink-0",children:e.asset.imageUrl?(0,r.jsx)("img",{src:e.asset.imageUrl,alt:e.asset.name,className:"w-10 h-10 object-cover rounded-lg border border-gray-600"}):(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-900/5 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm",children:"\uD83D\uDCE6"})})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-brand-primary-text truncate",children:e.asset.name}),(0,r.jsxs)("p",{className:"text-xs text-gray-600 dark:text-brand-secondary-text truncate",children:[e.asset.category.replace("_"," ")," • ",e.asset.serialNumber||"No S/N"]})]})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:e.asset.status.replace("_"," ")})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm text-brand-primary-text",children:e.notes||"No notes"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("div",{className:"text-sm font-medium text-brand-primary-text",children:e.asset.currentValue||e.asset.purchasePrice?"$".concat(null==(t=e.asset.currentValue||e.asset.purchasePrice)?void 0:t.toLocaleString()):"-"})})]},e.assetId)})})]})})})]})]})}),(0,r.jsxs)("div",{className:"p-6 border-t border-gray-700 bg-gray-900/5/50",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsx)("div",{className:"text-sm text-brand-primary-text",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Total Items:"})," ",o.items.length]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Total Value:"})," $",b().toLocaleString()]}),g.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Check-outs:"})," ",g.length]}),u.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Check-ins:"})," ",u.length]})]})})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,r.jsxs)("button",{onClick:()=>{var e,t;let s=new Date().toLocaleString(),r=b(),a="EQUIPMENT CHECKOUT LIST\n";a+="Generated: ".concat(s,"\n"),a+="User: ".concat((null==m||null==(e=m.user)?void 0:e.name)||"Unknown"," (").concat((null==m||null==(t=m.user)?void 0:t.email)||"N/A",")\n"),a+="\n".concat("=".repeat(60),"\n\n"),g.length>0&&(a+="CHECKING OUT (".concat(g.length," items):\n"),a+="".concat("-".repeat(40),"\n"),g.forEach((e,t)=>{let s=e.asset.currentValue||e.asset.purchasePrice||0;a+="".concat(t+1,". ").concat(e.asset.name,"\n"),a+="   Serial: ".concat(e.asset.serialNumber||"N/A","\n"),a+="   Category: ".concat(e.asset.category.replace("_"," "),"\n"),a+="   Assigned to: ".concat(e.assignedTo||"N/A","\n"),a+="   Return by: ".concat(e.dueDate?new Date(e.dueDate).toLocaleDateString():"No due date","\n"),a+="   Value: $".concat(s.toLocaleString(),"\n"),e.notes&&(a+="   Notes: ".concat(e.notes,"\n")),a+="\n"}),a+="Checkout Total Value: $".concat(g.reduce((e,t)=>e+(t.asset.currentValue||t.asset.purchasePrice||0),0).toLocaleString(),"\n\n")),u.length>0&&(a+="CHECKING IN (".concat(u.length," items):\n"),a+="".concat("-".repeat(40),"\n"),u.forEach((e,t)=>{let s=e.asset.currentValue||e.asset.purchasePrice||0;a+="".concat(t+1,". ").concat(e.asset.name,"\n"),a+="   Serial: ".concat(e.asset.serialNumber||"N/A","\n"),a+="   Category: ".concat(e.asset.category.replace("_"," "),"\n"),a+="   Value: $".concat(s.toLocaleString(),"\n"),e.notes&&(a+="   Return notes: ".concat(e.notes,"\n")),a+="\n"})),a+="".concat("-".repeat(60),"\n"),a+="TOTAL TRANSACTION VALUE: $".concat(r.toLocaleString(),"\n"),a+="\n",a+="User Signature: _________________________ Date: _______\n",a+="\n",a+="Return Instructions:\n",a+="1. Use this list to identify items for return\n",a+="2. Scan QR codes or enter asset IDs in the cart\n",a+='3. Select "CHECK IN" for each item\n',a+="4. Process the return transaction\n",a+="\n";let n=new Blob([a+="For questions, contact the inventory administrator.\n"],{type:"text/plain"}),i=window.URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download="checkout-list-".concat(new Date().toISOString().split("T")[0],"-").concat(Date.now(),".txt"),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(i)},disabled:x,className:"flex items-center px-3 py-2 bg-purple-600 hover disabled:opacity-50 text-white rounded-md text-sm font-medium disabled:cursor-not-allowed transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Checkout List"]}),(0,r.jsxs)("button",{onClick:()=>{var e,t;let s=new Date().toLocaleString(),r=b(),a="EQUIPMENT CHECKOUT QUOTE\n";a+="Generated: ".concat(s,"\n"),a+="For: ".concat((null==m||null==(e=m.user)?void 0:e.name)||"Unknown"," (").concat((null==m||null==(t=m.user)?void 0:t.email)||"N/A",")\n"),a+="\n".concat("=".repeat(60),"\n\n"),a+="ITEM BREAKDOWN:\n",a+="".concat("-".repeat(60),"\n"),a+="".concat("Item".padEnd(30)," ").concat("Category".padEnd(15)," ").concat("Value".padStart(10),"\n"),a+="".concat("-".repeat(60),"\n"),o.items.forEach(e=>{let t=e.asset.currentValue||e.asset.purchasePrice||0,s=e.asset.name.length>29?e.asset.name.substring(0,26)+"...":e.asset.name,r=e.asset.category.replace("_"," ");a+="".concat(s.padEnd(30)," ").concat(r.padEnd(15)," $").concat(t.toLocaleString().padStart(9),"\n")}),a+="".concat("-".repeat(60),"\n"),a+="".concat("TOTAL VALUE:".padEnd(45)," $").concat(r.toLocaleString().padStart(9),"\n"),a+="".concat("-".repeat(60),"\n\n"),a+="CHECKOUT DETAILS:\n",g.length>0&&(a+="• Items checking out: ".concat(g.length,"\n"),a+="• Checkout value: $".concat(g.reduce((e,t)=>e+(t.asset.currentValue||t.asset.purchasePrice||0),0).toLocaleString(),"\n")),u.length>0&&(a+="• Items checking in: ".concat(u.length,"\n")),a+="\nThis quote is valid for reference purposes.\n",a+="Actual checkout requires confirmation and processing.\n";let n=new Blob([a+="\nGenerated by LSVR Inventory Management System\n"],{type:"text/plain"}),i=window.URL.createObjectURL(n),l=document.createElement("a");l.href=i,l.download="equipment-quote-".concat(new Date().toISOString().split("T")[0],"-").concat(Date.now(),".txt"),document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(i)},disabled:x,className:"flex items-center px-3 py-2 bg-green-600 hover disabled:opacity-50 text-white rounded-md text-sm font-medium disabled:cursor-not-allowed transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Download Quote"]}),(0,r.jsx)("div",{className:"text-xs text-white/50 hover:text-white/80 transition-colors flex items-center ml-2",children:"\uD83D\uDCA1 Use the checkout list to easily return these items later"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:s,disabled:x,className:"flex-1 px-4 py-2 border border-gray-600 rounded-md text-sm font-medium text-gray-300 hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:p,disabled:x,className:"flex-1 px-4 py-2 bg-brand-orange hover disabled:opacity-50 text-white rounded-md text-sm font-medium disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l-3-2.647z"})]}),"Processing ",o.items.length," Transaction",1!==o.items.length?"s":"","..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Confirm & Process All Transactions"]})})]}),(0,r.jsx)("div",{className:"mt-3 text-xs text-gray-600 dark:text-brand-secondary-text text-center",children:"⚠️ This action cannot be undone. Please review all details carefully."})]})]})})]})}function h(e){let{onPresetSelect:t,onAddMissingItems:s,onOpenSubstitutions:a,isDetecting:n=!1}=e,{state:o}=(0,d._)(),[l,c]=(0,i.useState)([]),[m,x]=(0,i.useState)(!1),[h,u]=(0,i.useState)(!0);(0,i.useEffect)(()=>{if(0===o.items.length)return void c([]);g()},[o.items]);let g=async()=>{if(0!==o.items.length){x(!0);try{let t=o.items.map(e=>e.assetId),s=await fetch("/api/presets/detect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assetIds:t})});if(s.ok){var e;let t=await s.json();c(t.matches||[]),(null==(e=t.matches)?void 0:e.length)>0&&t.matches[0].matchPercentage>=70&&u(!0)}}catch(e){console.error("Failed to detect presets:",e)}finally{x(!1)}}};return 0===o.items.length||0===l.length?null:(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("button",{onClick:()=>u(!h),className:"flex items-center space-x-3 text-left",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-100 to-purple-200 rounded-lg",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Detected Presets"}),(0,r.jsxs)("p",{className:"text-sm text-brand-primary-text",children:[l.length," preset",1!==l.length?"s":""," match your scanned items"]})]}),(0,r.jsx)("svg",{className:"w-5 h-5 text-white/50 hover:text-white/80 transition-colors transition-transform duration-200 ".concat(h?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),m&&(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"})]}),h&&(0,r.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-xl border border-gray-600/50 shadow-sm",children:(0,r.jsx)("div",{className:"p-6 space-y-4",children:l.map((e,n)=>{var i,o;return(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-xl border transition-all duration-200 hover:shadow-md ".concat(e.matchPercentage>=90?"bg-gradient-to-r from-green-50 to-green-100/50 border-green-200/50":e.matchPercentage>=70?"bg-gradient-to-r from-blue-50 to-blue-100/50 border-blue-200/50":"bg-gradient-to-r from-orange-50 to-orange-100/50 border-orange-200/50"),children:[(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-brand-primary-text",children:e.preset.name}),(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ".concat((i=e.matchPercentage)>=90?"bg-green-100 text-green-800":i>=70?"bg-blue-100 text-blue-800":i>=50?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"),children:[e.matchPercentage,"% match"]}),e.preset.category&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-brand-primary-text",children:e.preset.category})]}),e.preset.description&&(0,r.jsx)("p",{className:"text-sm text-brand-primary-text mb-3",children:e.preset.description})]})}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,r.jsxs)("span",{className:"text-brand-primary-text",children:["Progress: ",e.matchedItems," of ",e.totalItems," items"]}),(0,r.jsxs)("span",{className:"font-semibold ".concat((o=e.matchPercentage)>=90?"text-green-600":o>=70?"text-blue-600":o>=50?"text-yellow-600":"text-orange-600"),children:[e.matchPercentage,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat(e.matchPercentage>=90?"bg-gradient-to-r from-green-500 to-green-600":e.matchPercentage>=70?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-orange-500 to-orange-600"),style:{width:"".concat(e.matchPercentage,"%")}})})]}),e.missingItems.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("h5",{className:"text-sm font-semibold text-gray-300 mb-2",children:["Missing Items (",e.missingItems.length,"):"]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.missingItems.slice(0,5).map(e=>(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(e.isRequired?"bg-red-100 text-red-800":"bg-gray-100 dark:bg-gray-800 text-brand-primary-text"),children:[e.name," ",e.quantity>1&&"(".concat(e.quantity,")"),e.isRequired&&" *"]},e.id)),e.missingItems.length>5&&(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-brand-primary-text",children:["+",e.missingItems.length-5," more"]})]})]}),e.availableSubstitutions&&e.availableSubstitutions.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h5",{className:"text-sm font-semibold text-green-700 mb-2",children:"Available Substitutions:"}),(0,r.jsxs)("div",{className:"text-xs text-green-600",children:[e.availableSubstitutions.length," item",1!==e.availableSubstitutions.length?"s":""," have substitute options"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 pt-3 border-t border-gray-700/50",children:[e.matchPercentage>=50&&(0,r.jsx)("button",{onClick:()=>null==t?void 0:t(e.preset.id),className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-[1.02] text-sm",children:"Complete This Preset"}),e.missingItems.length>0&&(0,r.jsx)("button",{onClick:()=>null==s?void 0:s(e.preset.id,e.missingItems),className:"px-4 py-2 border border-gray-600 text-gray-300 hover rounded-lg font-medium transition-all duration-200 text-sm",children:"Add Missing Items"}),e.availableSubstitutions&&e.availableSubstitutions.length>0&&(0,r.jsx)("button",{onClick:()=>null==a?void 0:a(e.preset.id,e.preset.name,e.availableSubstitutions),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-[1.02] text-sm",children:"View Substitutions"})]})]}),e.preset.priority>0&&(0,r.jsx)("div",{className:"absolute top-3 right-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:[(0,r.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,r.jsxs)("span",{children:["Priority ",e.preset.priority]})]})})]},e.preset.id)})})})]})}function u(e){let{isOpen:t,onClose:s,onConfirm:a,availableSubstitutions:n,presetName:o}=e,[l,c]=(0,i.useState)({}),[d,m]=(0,i.useState)(!1);if(!t)return null;let x=async()=>{m(!0);try{await a(l),s()}catch(e){console.error("Failed to apply substitutions:",e)}finally{m(!1)}},h=Object.keys(l).length,u=n.length;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-gray-900/5 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-brand-primary-text",children:"Item Substitutions"}),(0,r.jsxs)("p",{className:"text-sm text-brand-primary-text mt-1",children:['Select substitute items for "',o,'"']})]}),(0,r.jsx)("button",{onClick:s,className:"text-white/50 hover:text-white/80 transition-colors hover transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"px-6 py-4 bg-gray-900/5/30",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("span",{className:"text-brand-primary-text",children:["Substitutions selected: ",h," of ",u]}),(0,r.jsxs)("span",{className:"font-medium text-purple-600",children:[Math.round(h/u*100),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(h/u*100,"%")}})})]}),(0,r.jsx)("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:(0,r.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,r.jsxs)("div",{className:"border border-gray-600 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("h3",{className:"font-medium text-brand-primary-text flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Missing: ",e.itemName]}),(0,r.jsx)("p",{className:"text-sm text-brand-primary-text",children:"Select a substitute item from the available options:"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center p-3 border border-gray-600 rounded-lg hover cursor-pointer transition-colors",children:[(0,r.jsx)("input",{type:"radio",name:"substitute-".concat(e.itemId),value:"",checked:!l[e.itemId],onChange:()=>{let t={...l};delete t[e.itemId],c(t)},className:"w-4 h-4 text-purple-600 border-gray-600 focus:ring-purple-500 focus:ring-2"}),(0,r.jsx)("span",{className:"ml-3 text-sm text-gray-300",children:"Skip this item (proceed without substitute)"})]}),e.substitutes.map(t=>(0,r.jsxs)("label",{className:"flex items-center p-3 border border-gray-600 rounded-lg hover cursor-pointer transition-colors",children:[(0,r.jsx)("input",{type:"radio",name:"substitute-".concat(e.itemId),value:t.id,checked:l[e.itemId]===t.id,onChange:()=>{var s,r;return s=e.itemId,r=t.id,void c(e=>({...e,[s]:r}))},className:"w-4 h-4 text-purple-600 border-gray-600 focus:ring-purple-500 focus:ring-2"}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-brand-primary-text",children:t.name}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("AVAILABLE"===t.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:t.status})]}),t.description&&(0,r.jsx)("p",{className:"text-xs text-brand-primary-text mt-1",children:t.description})]})]},t.id))]})]},e.itemId))})}),(0,r.jsx)("div",{className:"px-6 py-4 border-t border-gray-700 bg-gray-900/5/30",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm text-brand-primary-text",children:h>0&&(0,r.jsxs)(r.Fragment,{children:["Selected ",h," substitute",1!==h?"s":""]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{onClick:s,className:"px-4 py-2 border border-gray-600 text-gray-300 hover rounded-lg font-medium transition-all duration-200",children:"Cancel"}),(0,r.jsx)("button",{onClick:x,disabled:d,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l-3-2.647z"})]}),"Applying..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Apply Substitutions"]})})]})]})})]})})}function g(){let{data:e,status:t}=(0,a.useSession)(),s=(0,n.useRouter)(),{state:o,removeItem:g,clearCart:p,processCart:b,addItem:j,canAddItem:f,getCheckInItems:v,getCheckOutItems:N}=(0,d._)(),[y,w]=(0,i.useState)(""),[k,C]=(0,i.useState)(!1),[L,S]=(0,i.useState)(!1),[M,I]=(0,i.useState)(""),[_,A]=(0,i.useState)(""),[V,T]=(0,i.useState)("CHECK_OUT"),[E,B]=(0,i.useState)(!1),[W,P]=(0,i.useState)(!1),[U,D]=(0,i.useState)(!1),[H,O]=(0,i.useState)(null),z=e=>{if(e.description&&""!==e.description.trim())return e.description;let t="".concat(e.manufacturer||""," ").concat(e.model||"").trim();return t&&"null"!==t&&"Generic"!==t?t:e.name&&""!==e.name.trim()?e.name:"Asset ".concat(e.id)};(0,i.useEffect)(()=>{if("loading"!==t&&"unauthenticated"===t)return void s.push("/auth/signin")},[t,s]);let R=async e=>{if(e.trim()){S(!0),I(""),A("");try{let t=await fetch("/api/assets/search?q=".concat(encodeURIComponent(e.trim())));if(t.ok){let e=await t.json();if(0===e.length)return void I("No asset found with this code");let s=e[0];if("CHECK_OUT"===V&&"AVAILABLE"!==s.status)return void I("Cannot check out ".concat(z(s)," - currently ").concat(s.status.toLowerCase().replace("_"," ")));if("CHECK_IN"===V&&"CHECKED_OUT"!==s.status)return void I("Cannot check in ".concat(z(s)," - currently ").concat(s.status.toLowerCase().replace("_"," ")));let r=f(s,V);if(!r.canAdd)return void I(r.reason||"Cannot add this asset to cart");j(s,V)?(A("✅ ".concat(z(s)," added to ").concat(V.toLowerCase().replace("_"," ")," queue")),w(""),setTimeout(()=>A(""),3e3),setTimeout(()=>{P(!0),setTimeout(()=>P(!1),1500)},500)):I("Failed to add asset to cart")}else I("Failed to search for asset")}catch(e){console.error("Search error:",e),I("An error occurred while searching")}finally{S(!1)}}},F=async()=>{let e=await b();return e.success&&0===e.errors.length&&(B(!1),s.push("/assets"),setTimeout(()=>{alert("✅ Successfully processed ".concat(o.items.length," transaction").concat(1!==o.items.length?"s":"","!"))},100)),e},K=async e=>{try{let t=await fetch("/api/presets/".concat(e));if(t.ok){let e=await t.json(),s=o.items.map(e=>e.assetId),r=e.items.filter(e=>e.assetId&&!s.includes(e.assetId));if(r.length>0){let t="Add ".concat(r.length,' missing items from "').concat(e.name,'" preset?');confirm(t)&&await q(r)}else A('✅ All items from "'.concat(e.name,'" preset are already in your cart!')),setTimeout(()=>A(""),3e3)}}catch(e){console.error("Failed to load preset:",e),I("Failed to load preset details")}},$=async(e,t)=>{try{let s=await fetch("/api/presets/".concat(e));if(s.ok){let e=(await s.json()).items.filter(e=>t.some(t=>t.id===e.id));e.length>0&&await q(e)}}catch(e){console.error("Failed to add missing items:",e),I("Failed to add missing items")}},q=async e=>{let t=0,s=0;for(let r of e)r.assetId&&(j(r.asset,V)?t++:s++);t>0&&(A("✅ Added ".concat(t," item").concat(1!==t?"s":""," from preset!")),setTimeout(()=>A(""),3e3)),s>0&&(I("⚠️ Failed to add ".concat(s," item").concat(1!==s?"s":""," (already in cart or unavailable)")),setTimeout(()=>I(""),5e3))},Q=async e=>{if(H)try{let t=0;for(let[s,r]of Object.entries(e))if(r){let e=await fetch("/api/assets/".concat(r));if(e.ok){let s=await e.json();j(s,V)&&t++}}t>0&&(A("✅ Added ".concat(t," substitute item").concat(1!==t?"s":"",' from "').concat(H.presetName,'" preset!')),setTimeout(()=>A(""),3e3)),O(null)}catch(e){console.error("Failed to add substitutions:",e),I("Failed to add substitute items")}};if("loading"===t)return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,r.jsx)(c.A,{}),(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-orange"})})]});if(!e)return null;let G=v(),J=N();return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,r.jsx)(c.A,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)("div",{className:"p-2 bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6H19M7 13v0a2 2 0 002 2h8.5m-10.5-2v-2a2 2 0 012-2h8.5"})})}),(0,r.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-brand-secondary-text bg-clip-text text-transparent",children:"Asset Transaction Cart"})]}),(0,r.jsx)("p",{className:"text-brand-primary-text ml-11 max-w-2xl",children:"Streamline your asset management with bulk check-in and check-out operations"})]}),(0,r.jsxs)(l(),{href:"/assets",className:"inline-flex items-center px-4 py-2.5 bg-gray-900/5 border border-gray-600 rounded-lg text-gray-300 hover font-medium transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Assets"]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-gray-900/5 backdrop-blur-sm rounded-2xl border border-gray-600/50 shadow-xl shadow-gray-200/20 p-8 sticky top-6 transition-all duration-300 hover:shadow-2xl hover:shadow-gray-200/30:shadow-gray-900/60",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-brand-primary-text mb-6 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),"Transaction Mode"]}),(0,r.jsxs)("div",{className:"bg-gray-900/5 rounded-xl p-1.5 border border-gray-600",children:[(0,r.jsxs)("button",{onClick:()=>T("CHECK_OUT"),className:"flex-1 px-6 py-4 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center w-full ".concat("CHECK_OUT"===V?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/25 transform scale-[1.02]":"text-brand-primary-text hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800"),children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Check Out Assets"]}),(0,r.jsxs)("button",{onClick:()=>T("CHECK_IN"),className:"flex-1 px-6 py-4 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center w-full mt-2 ".concat("CHECK_IN"===V?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/25 transform scale-[1.02]":"text-brand-primary-text hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800"),children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Return Assets"]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"}),(0,r.jsx)("h3",{className:"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-brand-secondary-text bg-clip-text text-transparent",children:"Add Items"})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),R(y)},className:"space-y-5",children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"}),(0,r.jsx)("input",{type:"text",value:y,onChange:e=>w(e.target.value),placeholder:"Scan barcode or enter ID",className:"relative w-full pl-12 pr-14 py-4 border-2 border-gray-600 rounded-xl bg-gray-900/5 text-brand-primary-text placeholder-gray-600 focus:outline-none focus:border-blue-500/50:border-blue-400/50 focus transition-all duration-200 shadow-sm focus:shadow-lg text-base font-medium text-center",autoFocus:!0}),(0,r.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white/50 hover:text-white/80 transition-colors group-focus-within transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),(0,r.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)("button",{type:"button",onClick:()=>C(!0),className:"p-1 text-white/50 hover:text-white/80 transition-colors hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800 rounded-md transition-all duration-200 transform hover:scale-110",title:"Open camera scanner",children:(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]}),(0,r.jsx)("button",{type:"submit",disabled:L||!y.trim(),className:"w-full px-6 py-4 text-white rounded-xl font-semibold transition-all duration-200 flex items-center justify-center shadow-lg transform hover:scale-[1.02] disabled:transform-none disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap ".concat("CHECK_OUT"===V?"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 shadow-orange-500/25 hover:shadow-orange-500/40":"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 shadow-green-500/25 hover:shadow-green-500/40"),children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-5 h-5 animate-spin mr-3",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l-3-2.647z"})]}),"Searching..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add to ","CHECK_OUT"===V?"Checkout":"Checkin"," Queue"]})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-brand-secondary-text leading-relaxed",children:"Scan with camera or manually enter asset identifiers"})})]}),M&&(0,r.jsx)("div",{className:"p-4 bg-gradient-to-r from-red-50 to-red-100/50 border border-red-200 rounded-xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:(0,r.jsxs)("p",{className:"text-sm text-red-800 flex items-center font-medium",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),M]})}),_&&(0,r.jsx)("div",{className:"p-4 bg-gradient-to-r from-green-50 to-green-100/50 border border-green-200 rounded-xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:(0,r.jsxs)("p",{className:"text-sm text-green-800 flex items-center font-medium",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),_]})})]})]})}),(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsx)(h,{onPresetSelect:K,onAddMissingItems:$,onOpenSubstitutions:(e,t,s)=>{O({presetId:e,presetName:t,substitutions:s}),D(!0)},isDetecting:W}),(0,r.jsxs)("div",{className:"bg-gray-900/5 backdrop-blur-sm rounded-2xl border border-gray-600/50 shadow-xl shadow-gray-200/20 transition-all duration-300 hover:shadow-2xl hover:shadow-gray-200/30:shadow-gray-900/60",children:[(0,r.jsx)("div",{className:"p-8 border-b border-gray-600/50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"}),(0,r.jsxs)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-brand-secondary-text bg-clip-text text-transparent",children:["Cart Items (",o.items.length,")"]})]}),(0,r.jsxs)("p",{className:"text-sm text-brand-primary-text ml-5",children:[J.length>0&&(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 mr-2",children:[J.length," to check out"]}),G.length>0&&(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[G.length," to check in"]})]})]}),o.items.length>0&&(0,r.jsx)("button",{onClick:p,className:"px-6 py-3 text-red-600 hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800 rounded-xl transition-all duration-200 text-sm font-semibold shadow-sm hover:shadow-md transform hover:scale-[1.02] border border-red-200",children:"Clear All"})]})}),(0,r.jsx)("div",{className:"p-8",children:0===o.items.length?(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center mb-6",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-white/50 hover:text-white/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-brand-secondary-text bg-clip-text text-transparent mb-3",children:"Ready to scan"}),(0,r.jsx)("p",{className:"text-brand-primary-text max-w-sm mx-auto leading-relaxed",children:"Use the scanner or enter asset codes to start building your cart"})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[J.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"p-2 bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,r.jsxs)("h3",{className:"text-xl font-bold text-orange-700",children:["Check Out Queue (",J.length,")"]})]}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-orange-50/30 to-orange-100/20 rounded-xl border border-orange-200/50 overflow-hidden",children:J.map((e,t)=>{var s;return(0,r.jsx)("div",{className:"flex items-center justify-between p-4 hover transition-all duration-200 ".concat(t!==J.length-1?"border-b border-orange-200/30":""),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:e.asset.imageUrl?(0,r.jsx)("img",{src:e.asset.imageUrl,alt:z(e.asset),className:"w-12 h-12 object-cover rounded-lg border border-orange-200"}):(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg flex items-center justify-center border border-orange-200",children:(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDCE6"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-brand-primary-text text-base mb-1",children:e.asset.name}),e.asset.description&&(0,r.jsx)("p",{className:"text-xs text-white/50 hover:text-white/80 transition-colors overflow-hidden leading-relaxed",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.asset.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-brand-primary-text",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.asset.category.replace("_"," ")]}),e.asset.serialNumber&&(0,r.jsxs)("span",{className:"flex items-center truncate",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"S/N: ",e.asset.serialNumber]}),e.asset.location&&(0,r.jsxs)("span",{className:"flex items-center truncate",children:[(0,r.jsxs)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.asset.location]}),(e.asset.currentValue||e.asset.purchasePrice)&&(0,r.jsxs)("span",{className:"flex items-center font-medium text-orange-700 col-span-2",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Value: $",null==(s=e.asset.currentValue||e.asset.purchasePrice)?void 0:s.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-orange-700 bg-orange-900/30 px-2 py-1 rounded-full",children:"Checking Out"}),(0,r.jsx)("button",{onClick:()=>g(e.assetId),className:"text-red-400 hover p-2 rounded-lg hover transition-all duration-200 transform hover:scale-110",title:"Remove from cart",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},e.assetId)})})]}),G.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"p-2 bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("h3",{className:"text-xl font-bold text-green-700",children:["Check In Queue (",G.length,")"]})]}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-50/30 to-green-100/20 rounded-xl border border-green-200/50 overflow-hidden",children:G.map((e,t)=>{var s;return(0,r.jsx)("div",{className:"flex items-center justify-between p-4 hover transition-all duration-200 ".concat(t!==G.length-1?"border-b border-green-200/30":""),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:e.asset.imageUrl?(0,r.jsx)("img",{src:e.asset.imageUrl,alt:z(e.asset),className:"w-12 h-12 object-cover rounded-lg border border-green-200"}):(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-green-200 rounded-lg flex items-center justify-center border border-green-200",children:(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDCE6"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-brand-primary-text text-base mb-1",children:e.asset.name}),e.asset.description&&(0,r.jsx)("p",{className:"text-xs text-white/50 hover:text-white/80 transition-colors overflow-hidden leading-relaxed",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.asset.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-brand-primary-text",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.asset.category.replace("_"," ")]}),e.asset.serialNumber&&(0,r.jsxs)("span",{className:"flex items-center truncate",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"S/N: ",e.asset.serialNumber]}),e.asset.location&&(0,r.jsxs)("span",{className:"flex items-center truncate",children:[(0,r.jsxs)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.asset.location]}),(e.asset.currentValue||e.asset.purchasePrice)&&(0,r.jsxs)("span",{className:"flex items-center font-medium text-green-700 col-span-2",children:[(0,r.jsx)("svg",{className:"w-3 h-3 mr-1 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Value: $",null==(s=e.asset.currentValue||e.asset.purchasePrice)?void 0:s.toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-green-700 bg-green-100 px-2 py-1 rounded-full",children:"Checking In"}),(0,r.jsx)("button",{onClick:()=>g(e.assetId),className:"text-red-400 hover p-2 rounded-lg hover transition-all duration-200 transform hover:scale-110",title:"Remove from cart",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},e.assetId)})})]})]})}),o.items.length>0&&(0,r.jsx)("div",{className:"p-8 border-t border-gray-600/50 bg-gradient-to-r from-gray-50/50 to-gray-100/30 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm text-brand-primary-text",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"font-semibold text-brand-primary-text text-lg",children:o.items.length}),(0,r.jsx)("span",{className:"ml-1",children:"total items ready to process"})]})]})}),(0,r.jsxs)("button",{onClick:()=>B(!0),className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl font-semibold transition-all duration-200 flex items-center shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 transform hover:scale-[1.02]",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Process All Transactions"]})]})})]})]})]})]}),(0,r.jsx)(m.A,{isOpen:k,onClose:()=>C(!1),onScanSuccess:(e,t)=>{console.log("Scanned: ".concat(e," (").concat(t,")")),C(!1),w(e),R(e)},onScanError:e=>{console.error("Scan error:",e),I("Camera scanning error. Please try manual entry.")}}),(0,r.jsx)(x,{isOpen:E,onClose:()=>B(!1),onConfirm:F}),(0,r.jsx)(u,{isOpen:U,onClose:()=>{D(!1),O(null)},onConfirm:Q,availableSubstitutions:(null==H?void 0:H.substitutions)||[],presetName:(null==H?void 0:H.presetName)||""})]})}}},e=>{e.O(0,[5604,2108,7244,8015,8947,6438,8441,5964,7358],()=>e(e.s=13506)),_N_E=e.O()}]);