(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7905],{33676:(e,t,s)=>{Promise.resolve().then(s.bind(s,42671))},35695:(e,t,s)=>{"use strict";var r=s(18999);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},42671:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(95155),a=s(12115),i=s(12108),n=s(35695);function o(){let{data:e,status:t}=(0,i.useSession)(),s=(0,n.useRouter)(),[o,c]=(0,a.useState)([]),[l,d]=(0,a.useState)([]),[x,m]=(0,a.useState)(!0),[u,g]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null),[b,y]=(0,a.useState)({name:"",description:""}),[f,v]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),[w,k]=(0,a.useState)({name:"",description:""});(0,a.useEffect)(()=>{var r,a;"unauthenticated"===t?s.push("/auth/signin"):(null==e||null==(r=e.user)?void 0:r.role)!=="ADMIN"&&(null==e||null==(a=e.user)?void 0:a.role)!=="MANAGER"?s.push("/dashboard"):"authenticated"===t&&C()},[t,e,s]);let C=async()=>{try{let[e,t]=await Promise.all([fetch("/api/preset-categories"),fetch("/api/preset-departments")]);if(e.ok){let t=await e.json();c(t.categories||[])}if(t.ok){let e=await t.json();d(e.departments||[])}}catch(e){console.error("Error fetching data:",e)}finally{m(!1)}},E=async()=>{try{let e=p?"/api/preset-categories/".concat(p.id):"/api/preset-categories",t=p?"PUT":"POST";(await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok&&(g(!1),C())}catch(e){console.error("Error saving category:",e)}},A=async e=>{try{(await fetch("/api/preset-categories/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,isActive:!e.isActive})})).ok&&C()}catch(e){console.error("Error toggling category status:",e)}},S=async e=>{if(confirm("Are you sure you want to delete this category?"))try{(await fetch("/api/preset-categories/".concat(e),{method:"DELETE"})).ok&&C()}catch(e){console.error("Error deleting category:",e)}},P=async()=>{try{let e=j?"/api/preset-departments/".concat(j.id):"/api/preset-departments",t=j?"PUT":"POST";(await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).ok&&(v(!1),C())}catch(e){console.error("Error saving department:",e)}},D=async e=>{try{(await fetch("/api/preset-departments/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,isActive:!e.isActive})})).ok&&C()}catch(e){console.error("Error toggling department status:",e)}},T=async e=>{if(confirm("Are you sure you want to delete this department?"))try{(await fetch("/api/preset-departments/".concat(e),{method:"DELETE"})).ok&&C()}catch(e){console.error("Error deleting department:",e)}};return x?(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8 text-white",children:"Preset Configuration"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"card-over-pattern p-6 rounded-xl border border-gray-700/50",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Categories"}),(0,r.jsx)("button",{onClick:()=>{y({name:"",description:""}),h(null),g(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Add Category"})]}),(0,r.jsx)("div",{className:"space-y-3",children:o.map(e=>(0,r.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 hover:border-gray-600 transition-colors",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-medium text-white",children:e.name}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:e.description})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.isActive?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:e.isActive?"Active":"Inactive"})})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,r.jsx)("button",{onClick:()=>{y({name:e.name,description:e.description||""}),h(e),g(!0)},className:"px-3 py-1 bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 rounded text-sm transition-colors",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>A(e),className:"px-3 py-1 bg-gray-600/20 hover:bg-gray-600/30 text-gray-400 rounded text-sm transition-colors",children:e.isActive?"Deactivate":"Activate"}),(0,r.jsx)("button",{onClick:()=>S(e.id),className:"px-3 py-1 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded text-sm transition-colors",children:"Delete"})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"card-over-pattern p-6 rounded-xl border border-gray-700/50",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Departments"}),(0,r.jsx)("button",{onClick:()=>{k({name:"",description:""}),N(null),v(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Add Department"})]}),(0,r.jsx)("div",{className:"space-y-3",children:l.map(e=>(0,r.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 hover:border-gray-600 transition-colors",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-medium text-white",children:e.name}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:e.description})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.isActive?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:e.isActive?"Active":"Inactive"})})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,r.jsx)("button",{onClick:()=>{k({name:e.name,description:e.description||""}),N(e),v(!0)},className:"px-3 py-1 bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 rounded text-sm transition-colors",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>D(e),className:"px-3 py-1 bg-gray-600/20 hover:bg-gray-600/30 text-gray-400 rounded text-sm transition-colors",children:e.isActive?"Deactivate":"Activate"}),(0,r.jsx)("button",{onClick:()=>T(e.id),className:"px-3 py-1 bg-red-600/20 hover:bg-red-600/30 text-red-400 rounded text-sm transition-colors",children:"Delete"})]})]},e.id))})]})]}),u&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4 text-white",children:p?"Edit Category":"New Category"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),(0,r.jsx)("input",{type:"text",value:b.name,onChange:e=>y({...b,name:e.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:b.description,onChange:e=>y({...b,description:e.target.value}),rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,r.jsx)("button",{onClick:E,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Save"}),(0,r.jsx)("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Cancel"})]})]})}),f&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold mb-4 text-white",children:j?"Edit Department":"New Department"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),(0,r.jsx)("input",{type:"text",value:w.name,onChange:e=>k({...w,name:e.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:w.description,onChange:e=>k({...w,description:e.target.value}),rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,r.jsx)("button",{onClick:P,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Save"}),(0,r.jsx)("button",{onClick:()=>v(!1),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Cancel"})]})]})})]})}}},e=>{e.O(0,[2108,8441,5964,7358],()=>e(e.s=33676)),_N_E=e.O()}]);