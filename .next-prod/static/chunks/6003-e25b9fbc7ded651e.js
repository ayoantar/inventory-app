"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6003],{6003:(e,r,t)=>{t.d(r,{A:()=>d});var s=t(95155),a=t(12115),o=t(47650),n=t(98273);let l=["Camera Kit","Audio Setup","Lighting Kit","Conference Setup","Video Production","Photography","Live Streaming","Event Setup"],i=()=>"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9));function d(e){let{preset:r,isOpen:t,onClose:d,onSave:c}=e;(0,n.K)(t);let[m,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(""),[g,b]=(0,a.useState)({name:"",description:"",category:"",isActive:!0,notes:""}),[p,y]=(0,a.useState)([]);(0,a.useEffect)(()=>{r&&t&&(b({name:r.name,description:r.description||"",category:r.category||"",isActive:r.isActive,notes:r.notes||""}),r.items&&Array.isArray(r.items)?y(r.items.map(e=>({id:e.id,tempId:i(),assetId:e.assetId,category:e.category,name:e.name,quantity:e.quantity,isRequired:e.isRequired,priority:e.priority,notes:e.notes,asset:e.asset}))):y([]),h(""))},[r,t]);let f=()=>{h(""),d()},v=e=>{let{name:r,value:t,type:s}=e.target;b(a=>({...a,[r]:"checkbox"===s?e.target.checked:t}))},j=(e,r,t)=>{let s=[...p];s[e]={...s[e],[r]:t},y(s)},N=async e=>{if(e.preventDefault(),!r)return;if(h(""),!g.name.trim())return void h("Please enter a preset name");let t=p.filter(e=>e.name&&e.name.trim());if(0===t.length)return void h("Please add at least one item to the preset");let s=t.map(e=>{let{tempId:r,...t}=e;return t});u(!0);try{let e=await fetch("/api/presets/".concat(r.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...g,items:s})});if(e.ok){let r=await e.json();c(r),f()}else{let r=await e.json();h(r.error||"Failed to update preset")}}catch(e){console.error("Failed to update preset:",e),h("Failed to update preset. Please try again.")}finally{u(!1)}};if(!t)return null;let k=(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md",onClick:f}),(0,s.jsxs)("div",{className:"relative bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800 rounded-2xl shadow-2xl border border-gray-700/50 w-full max-w-6xl max-h-[95vh] overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-200",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"relative px-6 py-4 border-b border-gray-700/50 bg-gradient-to-r from-gray-800/80 to-gray-900/80 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-lg border border-blue-500/20",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-white",children:"Edit Preset"}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Modify configuration and items"})]})]}),(0,s.jsx)("button",{onClick:f,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-lg transition-all duration-200",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,s.jsxs)("div",{className:"px-6 py-4",children:[x&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-500/30 rounded-xl backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-red-300",children:"Error"}),(0,s.jsx)("p",{className:"text-sm text-red-200/80 mt-1",children:x})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-700/50",children:[(0,s.jsx)("div",{className:"p-1.5 bg-blue-500/10 rounded-lg",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsx)("h3",{className:"text-base font-semibold text-white",children:"Basic Information"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:["Preset Name ",(0,s.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"name",value:g.name,onChange:v,required:!0,className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600/50 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all backdrop-blur-sm",placeholder:"e.g., Professional Camera Kit"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Category"}),(0,s.jsxs)("select",{name:"category",value:g.category,onChange:v,className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600/50 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all backdrop-blur-sm",children:[(0,s.jsx)("option",{value:"",children:"Select a category"}),l.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Description"}),(0,s.jsx)("textarea",{name:"description",value:g.description,onChange:v,rows:2,className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600/50 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 resize-none transition-all backdrop-blur-sm",placeholder:"Describe the purpose and typical use cases..."})]}),(0,s.jsxs)("div",{className:"flex items-center p-2.5 bg-gray-800/30 rounded-lg border border-gray-700/50",children:[(0,s.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:g.isActive,onChange:v,className:"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-2 focus:ring-blue-500/50"}),(0,s.jsx)("label",{htmlFor:"isActive",className:"ml-2 text-sm font-medium text-gray-300",children:"Active preset (available for checkout)"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between pb-2 border-b border-gray-700/50",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"p-1.5 bg-green-500/10 rounded-lg",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),(0,s.jsx)("div",{children:(0,s.jsxs)("h3",{className:"text-base font-semibold text-white",children:["Items (",p.length,")"]})})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{y([...p,{tempId:i(),name:"",quantity:1,isRequired:!0,priority:p.length,notes:""}])},className:"inline-flex items-center px-3 py-1.5 bg-green-600/90 hover:bg-green-600 text-white text-xs font-medium rounded-lg transition-all shadow-lg shadow-green-500/20",children:[(0,s.jsx)("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add"]})]}),(0,s.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:0===p.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-4 bg-gray-800/20 rounded-xl border-2 border-dashed border-gray-700/50",children:[(0,s.jsx)("svg",{className:"w-12 h-12 text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,s.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"No items added yet"}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:'Click "Add Item" to get started'})]}):p.map((e,r)=>(0,s.jsxs)("div",{className:"group flex items-center gap-3 p-2.5 bg-gray-800/40 hover:bg-gray-800/60 rounded-lg border border-gray-700/50 hover:border-gray-600/50 transition-all",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("input",{type:"text",value:e.name,onChange:e=>j(r,"name",e.target.value),required:!0,className:"w-full px-3 py-2 bg-gray-900/50 border border-gray-600/50 rounded-lg text-white text-sm placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500/50 transition-all",placeholder:"Item name"})}),(0,s.jsx)("input",{type:"number",value:e.quantity,onChange:e=>j(r,"quantity",parseInt(e.target.value)||1),min:"1",className:"w-16 px-2 py-2 bg-gray-900/50 border border-gray-600/50 rounded-lg text-white text-sm text-center focus:outline-none focus:ring-1 focus:ring-blue-500/50 transition-all"}),(0,s.jsxs)("label",{className:"flex items-center space-x-1.5 px-2.5 py-2 bg-gray-900/50 border border-gray-600/50 rounded-lg cursor-pointer hover:bg-gray-900/70 transition-all",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.isRequired,onChange:e=>j(r,"isRequired",e.target.checked),className:"w-3.5 h-3.5 text-blue-600 bg-gray-800 border-gray-600 rounded focus:ring-1 focus:ring-blue-500/50"}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-300",children:"Req"})]}),p.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>{p.length>1&&y(p.filter((e,t)=>t!==r))},className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-900/20 rounded-lg transition-all",title:"Remove item",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.tempId))})]})]}),(0,s.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700/50",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1.5",children:"Additional Notes"}),(0,s.jsx)("textarea",{name:"notes",value:g.notes,onChange:v,rows:2,className:"w-full px-3 py-2 bg-gray-800/50 border border-gray-600/50 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 resize-none transition-all backdrop-blur-sm",placeholder:"Additional notes or requirements..."})]})]})}),(0,s.jsxs)("div",{className:"px-6 py-3.5 bg-gray-800/50 border-t border-gray-700/50 flex items-center justify-between backdrop-blur-sm",children:[(0,s.jsx)("button",{type:"button",onClick:f,className:"px-5 py-2 border border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white hover:border-gray-500 rounded-lg font-medium transition-all",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:m,onClick:N,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-600 text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-xl shadow-blue-500/30 hover:shadow-blue-500/40",children:m?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l-3-2.647z"})]}),"Saving..."]}):"Save Changes"})]})]})]});return(0,o.createPortal)(k,document.body)}},98273:(e,r,t)=>{t.d(r,{K:()=>a});var s=t(12115);function a(e){(0,s.useEffect)(()=>{if(!e)return;let r=document.body.style.overflow,t=document.body.style.paddingRight,s=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",s>0&&(document.body.style.paddingRight="".concat(s,"px")),()=>{document.body.style.overflow=r,document.body.style.paddingRight=t}},[e])}}}]);