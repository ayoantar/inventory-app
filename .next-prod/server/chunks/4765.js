exports.id=4765,exports.ids=[4765],exports.modules={14765:(a,b,c)=>{"use strict";c.d(b,{j9:()=>V}),function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(d||(d={}));var d,e,f,g,h,i,j=new Map([[d.QR_CODE,"QR_CODE"],[d.AZTEC,"AZTEC"],[d.CODABAR,"CODABAR"],[d.CODE_39,"CODE_39"],[d.CODE_93,"CODE_93"],[d.CODE_128,"CODE_128"],[d.DATA_MATRIX,"DATA_MATRIX"],[d.MAXICODE,"MAXICODE"],[d.ITF,"ITF"],[d.EAN_13,"EAN_13"],[d.EAN_8,"EAN_8"],[d.PDF_417,"PDF_417"],[d.RSS_14,"RSS_14"],[d.RSS_EXPANDED,"RSS_EXPANDED"],[d.UPC_A,"UPC_A"],[d.UPC_E,"UPC_E"],[d.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);!function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"}(e||(e={})),!function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(f||(f={}));var k=function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[f.SCAN_TYPE_CAMERA,f.SCAN_TYPE_FILE],a}(),l=function(){function a(a,b){this.format=a,this.formatName=b}return a.prototype.toString=function(){return this.formatName},a.create=function(b){if(!j.has(b))throw"".concat(b," not in html5QrcodeSupportedFormatsTextMap");return new a(b,j.get(b))},a}(),m=function(){function a(){}return a.createFromText=function(a){return{decodedText:a,result:{text:a}}},a.createFromQrcodeResult=function(a){return{decodedText:a.text,result:a}},a}();!function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(g||(g={}));var n=function(){function a(){}return a.createFrom=function(a){return{errorMessage:a,type:g.UNKWOWN_ERROR}},a}(),o=function(){function a(a){this.verbose=a}return a.prototype.log=function(a){this.verbose&&console.log(a)},a.prototype.warn=function(a){this.verbose&&console.warn(a)},a.prototype.logError=function(a,b){(this.verbose||!0===b)&&console.error(a)},a.prototype.logErrors=function(a){if(0===a.length)throw"Logger#logError called without arguments";this.verbose&&console.error(a)},a}();function p(a){return null==a}var q=function(){function a(){}return a.codeParseError=function(a){return"QR code parse error, error = ".concat(a)},a.errorGettingUserMedia=function(a){return"Error getting userMedia, error = ".concat(a)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a}(),r=function(){function a(){}return a.scanningStatus=function(){return"Scanning"},a.idleStatus=function(){return"Idle"},a.errorStatus=function(){return"Error"},a.permissionStatus=function(){return"Permission"},a.noCameraFoundErrorStatus=function(){return"No Cameras"},a.lastMatch=function(a){return"Last Match: ".concat(a)},a.codeScannerTitle=function(){return"Code Scanner"},a.cameraPermissionTitle=function(){return"Request Camera Permissions"},a.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},a.noCameraFound=function(){return"No camera found"},a.scanButtonStopScanningText=function(){return"Stop Scanning"},a.scanButtonStartScanningText=function(){return"Start Scanning"},a.torchOnButton=function(){return"Switch On Torch"},a.torchOffButton=function(){return"Switch Off Torch"},a.torchOnFailedMessage=function(){return"Failed to turn on torch"},a.torchOffFailedMessage=function(){return"Failed to turn off torch"},a.scanButtonScanningStarting=function(){return"Launching Camera..."},a.textIfCameraScanSelected=function(){return"Scan an Image File"},a.textIfFileScanSelected=function(){return"Scan using camera directly"},a.selectCamera=function(){return"Select Camera"},a.fileSelectionChooseImage=function(){return"Choose Image"},a.fileSelectionChooseAnother=function(){return"Choose Another"},a.fileSelectionNoImageSelected=function(){return"No image choosen"},a.anonymousCameraPrefix=function(){return"Anonymous Camera"},a.dragAndDropMessage=function(){return"Or drop an image to scan"},a.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},a.zoom=function(){return"zoom"},a.loadingImage=function(){return"Loading image..."},a.cameraScanAltText=function(){return"Camera based scan"},a.fileScanAltText=function(){return"Fule based scan"},a}(),s=function(){function a(){}return a.poweredBy=function(){return"Powered by "},a.reportIssues=function(){return"Report issues"},a}(),t=function(){function a(){}return a.isMediaStreamConstraintsValid=function(a,b){if("object"!=typeof a){var c=typeof a;return b.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(c,"."),!0),!1}for(var d=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),e=Object.keys(a),f=0;f<e.length;f++){var g=e[f];if(d.has(g))return b.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},a}(),u=c(93182),v=function(){function a(a,b,c){if(this.formatMap=new Map([[d.QR_CODE,u.BarcodeFormat.QR_CODE],[d.AZTEC,u.BarcodeFormat.AZTEC],[d.CODABAR,u.BarcodeFormat.CODABAR],[d.CODE_39,u.BarcodeFormat.CODE_39],[d.CODE_93,u.BarcodeFormat.CODE_93],[d.CODE_128,u.BarcodeFormat.CODE_128],[d.DATA_MATRIX,u.BarcodeFormat.DATA_MATRIX],[d.MAXICODE,u.BarcodeFormat.MAXICODE],[d.ITF,u.BarcodeFormat.ITF],[d.EAN_13,u.BarcodeFormat.EAN_13],[d.EAN_8,u.BarcodeFormat.EAN_8],[d.PDF_417,u.BarcodeFormat.PDF_417],[d.RSS_14,u.BarcodeFormat.RSS_14],[d.RSS_EXPANDED,u.BarcodeFormat.RSS_EXPANDED],[d.UPC_A,u.BarcodeFormat.UPC_A],[d.UPC_E,u.BarcodeFormat.UPC_E],[d.UPC_EAN_EXTENSION,u.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!u)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=b,this.logger=c;var e=this.createZXingFormats(a),f=new Map;f.set(u.DecodeHintType.POSSIBLE_FORMATS,e),f.set(u.DecodeHintType.TRY_HARDER,!1),this.hints=f}return a.prototype.decodeAsync=function(a){var b=this;return new Promise(function(c,d){try{c(b.decode(a))}catch(a){d(a)}})},a.prototype.decode=function(a){var b=new u.MultiFormatReader(this.verbose,this.hints),c=new u.HTMLCanvasElementLuminanceSource(a),d=new u.BinaryBitmap(new u.HybridBinarizer(c)),e=b.decode(d);return{text:e.text,format:l.create(this.toHtml5QrcodeSupportedFormats(e.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(b,c,d){a.set(b,c)}),a},a.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},a.prototype.createZXingFormats=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];this.formatMap.has(d)?b.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return b},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a}(),w=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},x=function(){function a(b,c,e){if(this.formatMap=new Map([[d.QR_CODE,"qr_code"],[d.AZTEC,"aztec"],[d.CODABAR,"codabar"],[d.CODE_39,"code_39"],[d.CODE_93,"code_93"],[d.CODE_128,"code_128"],[d.DATA_MATRIX,"data_matrix"],[d.ITF,"itf"],[d.EAN_13,"ean_13"],[d.EAN_8,"ean_8"],[d.PDF_417,"pdf417"],[d.UPC_A,"upc_a"],[d.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=c,this.logger=e;var f=this.createBarcodeDetectorFormats(b);if(this.detector=new BarcodeDetector(f),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){return"BarcodeDetector"in window&&(new BarcodeDetector({formats:["qr_code"]}),!0)},a.prototype.decodeAsync=function(a){var b,c,d,e;return b=this,c=void 0,d=void 0,e=function(){var b,c;return w(this,function(d){switch(d.label){case 0:return[4,this.detector.detect(a)];case 1:if(!(b=d.sent())||0===b.length)throw"No barcode or QR code detected.";return[2,{text:(c=this.selectLargestBarcode(b)).rawValue,format:l.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}]}})},new(d||(d=Promise))(function(a,f){function g(a){try{i(e.next(a))}catch(a){f(a)}}function h(a){try{i(e.throw(a))}catch(a){f(a)}}function i(b){var c;b.done?a(b.value):((c=b.value)instanceof d?c:new d(function(a){a(c)})).then(g,h)}i((e=e.apply(b,c||[])).next())})},a.prototype.selectLargestBarcode=function(a){for(var b=null,c=0,d=0;d<a.length;d++){var e=a[d],f=e.boundingBox.width*e.boundingBox.height;f>c&&(c=f,b=e)}if(!b)throw"No largest barcode found";return b},a.prototype.createBarcodeDetectorFormats=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];this.formatMap.has(d)?b.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:b}},a.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},a.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(b,c,d){a.set(b,c)}),a},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a}(),y=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},z=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},A=function(){function a(a,b,c,d){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=c,b&&x.isSupported()?(this.primaryDecoder=new x(a,c,d),this.secondaryDecoder=new v(a,c,d)):this.primaryDecoder=new v(a,c,d)}return a.prototype.decodeAsync=function(a){return y(this,void 0,void 0,function(){var b;return z(this,function(c){switch(c.label){case 0:b=performance.now(),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(a)];case 2:return[2,c.sent()];case 3:return this.possiblyLogPerformance(b),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(a){return y(this,void 0,void 0,function(){var b,c;return z(this,function(d){switch(d.label){case 0:b=performance.now(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(a)];case 2:return[2,d.sent()];case 3:if(c=d.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(a)];throw c;case 4:return this.possiblyLogPerformance(b),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(a){if(this.verbose){var b=performance.now()-a;this.executionResults.push(b),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var a=0,b=0,c=this.executionResults;b<c.length;b++)a+=c[b];var d=a/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a}(),B=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),C=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},D=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},E=function(){function a(a,b){this.name=a,this.track=b}return a.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},a.prototype.apply=function(a){var b={};return b[this.name]=a,this.track.applyConstraints({advanced:[b]})},a.prototype.value=function(){var a=this.track.getSettings();return this.name in a?a[this.name]:null},a}(),F=function(a){function b(b){return a.call(this,"zoom",b)||this}return B(b,a),b}(function(a){function b(b,c){return a.call(this,b,c)||this}return B(b,a),b.prototype.min=function(){return this.getCapabilities().min},b.prototype.max=function(){return this.getCapabilities().max},b.prototype.step=function(){return this.getCapabilities().step},b.prototype.apply=function(a){var b={};return b[this.name]=a,this.track.applyConstraints({advanced:[b]})},b.prototype.getCapabilities=function(){this.failIfNotSupported();var a=this.track.getCapabilities()[this.name];return{min:a.min,max:a.max,step:a.step}},b.prototype.failIfNotSupported=function(){if(!this.isSupported())throw Error("".concat(this.name," capability not supported"))},b}(E)),G=function(a){function b(b){return a.call(this,"torch",b)||this}return B(b,a),b}(E),H=function(){function a(a){this.track=a}return a.prototype.zoomFeature=function(){return new F(this.track)},a.prototype.torchFeature=function(){return new G(this.track)},a}(),I=function(){function a(a,b,c){this.isClosed=!1,this.parentElement=a,this.mediaStream=b,this.callbacks=c,this.surface=this.createVideoElement(this.parentElement.clientWidth),a.append(this.surface)}return a.prototype.createVideoElement=function(a){var b=document.createElement("video");return b.style.width="".concat(a,"px"),b.style.display="block",b.muted=!0,b.setAttribute("muted","true"),b.playsInline=!0,b},a.prototype.setupSurface=function(){var a=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var b=function(){var c=a.surface.clientWidth,d=a.surface.clientHeight;a.callbacks.onRenderSurfaceReady(c,d),a.surface.removeEventListener("playing",b)};this.surface.addEventListener("playing",b),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(b,c,d,e){return C(this,void 0,void 0,function(){var f,g;return D(this,function(h){switch(h.label){case 0:if(f=new a(b,c,e),!d.aspectRatio)return[3,2];return g={aspectRatio:d.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(g)];case 1:h.sent(),h.label=2;case 2:return f.setupSurface(),[2,f]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(a){this.failIfClosed();var b=this,c=function(){setTimeout(a,200),b.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(a){return C(this,void 0,void 0,function(){return D(this,function(b){if("aspectRatio"in a)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(a)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var a=this;return new Promise(function(b,c){var d=a.mediaStream.getVideoTracks().length,e=0;a.mediaStream.getVideoTracks().forEach(function(c){a.mediaStream.removeTrack(c),c.stop(),++e>=d&&(a.isClosed=!0,a.parentElement.removeChild(a.surface),b())})})},a.prototype.getCapabilities=function(){return new H(this.getFirstTrackOrFail())},a}(),J=function(){function a(a){this.mediaStream=a}return a.prototype.render=function(a,b,c){return C(this,void 0,void 0,function(){return D(this,function(d){return[2,I.create(a,this.mediaStream,b,c)]})})},a.create=function(b){return C(this,void 0,void 0,function(){var c;return D(this,function(d){switch(d.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return c={audio:!1,video:b},[4,navigator.mediaDevices.getUserMedia(c)];case 1:return[2,new a(d.sent())]}})})},a}(),K=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},L=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},M=function(){function a(){}return a.failIfNotSupported=function(){return K(this,void 0,void 0,function(){return L(this,function(b){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(a){return K(this,void 0,void 0,function(){return L(this,function(b){return[2,J.create(a)]})})},a}(),N=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},O=function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var b=MediaStreamTrack;return MediaStreamTrack&&b.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var b=q.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(b=q.insecureContextCameraQueryError()),Promise.reject(b)},a.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var a=location.host.split(":")[0];return"127.0.0.1"===a||"localhost"===a},a.getCamerasFromMediaDevices=function(){var a,b,c,d;return a=this,b=void 0,c=void 0,d=function(){var a,b,c,d,e,f,g;return N(this,function(h){switch(h.label){case 0:return a=function(a){for(var b=a.getVideoTracks(),c=0;c<b.length;c++){var d=b[c];d.enabled=!1,d.stop(),a.removeTrack(d)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return b=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(e=0,c=h.sent(),d=[],f=c;e<f.length;e++)"videoinput"===(g=f[e]).kind&&d.push({id:g.deviceId,label:g.label});return a(b),[2,d]}})},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(a,b){MediaStreamTrack.getSources(function(b){for(var c=[],d=0;d<b.length;d++){var e=b[d];"video"===e.kind&&c.push({id:e.id,label:e.label})}a(c)})})},a}();!function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"}(h||(h={}));var P=function(){function a(){this.state=h.NOT_STARTED,this.onGoingTransactionNewState=h.UNKNOWN}return a.prototype.directTransition=function(a){this.failIfTransitionOngoing(),this.validateTransition(a),this.state=a},a.prototype.startTransition=function(a){return this.failIfTransitionOngoing(),this.validateTransition(a),this.onGoingTransactionNewState=a,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===h.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var a=this.onGoingTransactionNewState;this.onGoingTransactionNewState=h.UNKNOWN,this.directTransition(a)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===h.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=h.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==h.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(a){switch(this.state){case h.UNKNOWN:throw"Transition from unknown is not allowed";case h.NOT_STARTED:this.failIfNewStateIs(a,[h.PAUSED]);case h.SCANNING:case h.PAUSED:}},a.prototype.failIfNewStateIs=function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])throw"Cannot transition from ".concat(this.state," to ").concat(a)},a}(),Q=function(){function a(a){this.stateManager=a}return a.prototype.startTransition=function(a){return this.stateManager.startTransition(a)},a.prototype.directTransition=function(a){this.stateManager.directTransition(a)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===h.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==h.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===h.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===h.PAUSED},a}(),R=function(){function a(){}return a.create=function(){return new Q(new P)},a}(),S=function(){var a=function(b,c){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(b,c)};return function(b,c){if("function"!=typeof c&&null!==c)throw TypeError("Class extends value "+String(c)+" is not a constructor or null");function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),T=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return S(b,a),b.DEFAULT_WIDTH=300,b.DEFAULT_WIDTH_OFFSET=2,b.FILE_SCAN_MIN_HEIGHT=300,b.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,b.MIN_QR_BOX_SIZE=50,b.SHADED_LEFT=1,b.SHADED_RIGHT=2,b.SHADED_TOP=3,b.SHADED_BOTTOM=4,b.SHADED_REGION_ELEMENT_ID="qr-shaded-region",b.VERBOSE=!1,b.BORDER_SHADER_DEFAULT_COLOR="#ffffff",b.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",b}(k),U=function(){function a(a,b){this.logger=b,this.fps=T.SCAN_DEFAULT_FPS,a?(a.fps&&(this.fps=a.fps),this.disableFlip=!0===a.disableFlip,this.qrbox=a.qrbox,this.aspectRatio=a.aspectRatio,this.videoConstraints=a.videoConstraints):this.disableFlip=T.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?t.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!p(this.qrbox)},a.create=function(b,c){return new a(b,c)},a}(),V=function(){function a(a,b){var c;if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.elementId=a,this.verbose=!1,"boolean"==typeof b?this.verbose=!0===b:b&&(c=b,this.verbose=!0===c.verbose,c.experimentalFeatures),this.logger=new o(this.verbose),this.qrcode=new A(this.getSupportedFormats(b),this.getUseBarCodeDetectorIfSupported(c),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=R.create()}return a.prototype.start=function(a,b,c,d){var e,f=this;if(!a)throw"cameraIdOrConfig is required";if(!c||"function"!=typeof c)throw"qrCodeSuccessCallback is required and should be a function.";e=d||(this.verbose?this.logger.log:function(){});var g=U.create(b,this.logger);this.clearElement();var i=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?i=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var j=i,k=document.getElementById(this.elementId);k.clientWidth?k.clientWidth:T.DEFAULT_WIDTH,k.style.position="relative",this.shouldScan=!0,this.element=k;var l=this,m=this.stateManagerProxy.startTransition(h.SCANNING);return new Promise(function(b,d){var h=j?g.videoConstraints:l.createVideoConstraints(a);if(!h){m.cancel(),d("videoConstraints should be defined");return}var i={};(!j||g.aspectRatio)&&(i.aspectRatio=g.aspectRatio);var k={onRenderSurfaceReady:function(a,b){l.setupUi(a,b,g),l.isScanning=!0,l.foreverScan(g,c,e)}};M.failIfNotSupported().then(function(a){a.create(h).then(function(a){return a.render(f.element,i,k).then(function(a){l.renderedCamera=a,m.execute(),b(null)}).catch(function(a){m.cancel(),d(a)})}).catch(function(a){m.cancel(),d(q.errorGettingUserMedia(a))})}).catch(function(a){m.cancel(),d(q.cameraStreamingNotSupported())})})},a.prototype.pause=function(a){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(h.PAUSED),this.showPausedState(),(p(a)||!0!==a)&&(a=!1),a&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var a=this,b=function(){a.stateManagerProxy.directTransition(h.SCANNING),a.hidePausedState()};if(!this.renderedCamera.isPaused())return void b();this.renderedCamera.resume(function(){b()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var a=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var b=this.stateManagerProxy.startTransition(h.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var c=function(){if(a.element){var b=document.getElementById(T.SHADED_REGION_ELEMENT_ID);b&&a.element.removeChild(b)}},d=this;return this.renderedCamera.close().then(function(){return d.renderedCamera=null,d.element&&(d.element.removeChild(d.canvasElement),d.canvasElement=null),c(),d.qrRegion&&(d.qrRegion=null),d.context&&(d.context=null),b.execute(),d.hidePausedState(),d.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(a,b){return this.scanFileV2(a,b).then(function(a){return a.decodedText})},a.prototype.scanFileV2=function(a,b){var c=this;if(!a||!(a instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(p(b)&&(b=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(d,e){c.possiblyCloseLastScanImageFile(),c.clearElement(),c.lastScanImageFile=URL.createObjectURL(a);var f=new Image;f.onload=function(){var a=f.width,g=f.height,h=document.getElementById(c.elementId),i=h.clientWidth?h.clientWidth:T.DEFAULT_WIDTH,j=Math.max(h.clientHeight?h.clientHeight:g,T.FILE_SCAN_MIN_HEIGHT),k=c.computeCanvasDrawConfig(a,g,i,j);if(b){var l=c.createCanvasElement(i,j,"qr-canvas-visible");l.style.display="inline-block",h.appendChild(l);var n=l.getContext("2d");if(!n)throw"Unable to get 2d context from canvas";n.canvas.width=i,n.canvas.height=j,n.drawImage(f,0,0,a,g,k.x,k.y,k.width,k.height)}var o=T.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(f.width,k.width),q=Math.max(f.height,k.height),r=p+2*o,s=q+2*o,t=c.createCanvasElement(r,s);h.appendChild(t);var u=t.getContext("2d");if(!u)throw"Unable to get 2d context from canvas";u.canvas.width=r,u.canvas.height=s,u.drawImage(f,0,0,a,g,o,o,p,q);try{c.qrcode.decodeRobustlyAsync(t).then(function(a){d(m.createFromQrcodeResult(a))}).catch(e)}catch(a){e("QR code parse error, error = ".concat(a))}},f.onerror=e,f.onabort=e,f.onstalled=e,f.onsuspend=e,f.src=URL.createObjectURL(a)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return O.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(a){if(a){if(!t.isMediaStreamConstraintsValid(a,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(a)},a.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(a){var b=[d.QR_CODE,d.AZTEC,d.CODABAR,d.CODE_39,d.CODE_93,d.CODE_128,d.DATA_MATRIX,d.MAXICODE,d.ITF,d.EAN_13,d.EAN_8,d.PDF_417,d.RSS_14,d.RSS_EXPANDED,d.UPC_A,d.UPC_E,d.UPC_EAN_EXTENSION];if(!a||"boolean"==typeof a||!a.formatsToSupport)return b;if(!Array.isArray(a.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===a.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var c=[],e=0,f=a.formatsToSupport;e<f.length;e++){var g=f[e];Object.values(d).includes(g)?c.push(g):this.logger.warn("Invalid format: ".concat(g," passed in config, ignoring."))}if(0===c.length)throw"None of formatsToSupport match supported values.";return c},a.prototype.getUseBarCodeDetectorIfSupported=function(a){if(p(a))return!0;if(!p(a.useBarCodeDetectorIfSupported))return!1!==a.useBarCodeDetectorIfSupported;if(p(a.experimentalFeatures))return!0;var b=a.experimentalFeatures;return!!p(b.useBarCodeDetectorIfSupported)||!1!==b.useBarCodeDetectorIfSupported},a.prototype.validateQrboxSize=function(a,b,c){var d,e=c.qrbox;this.validateQrboxConfig(e);var f=this.toQrdimensions(a,b,e),g=function(a){if(a<T.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(T.MIN_QR_BOX_SIZE,"px.")};g(f.width),g(f.height),(d=f.width)>a&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=a),f.width=d},a.prototype.validateQrboxConfig=function(a){if("number"!=typeof a&&"function"!=typeof a&&(void 0===a.width||void 0===a.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(a,b,c){if("number"==typeof c)return{width:c,height:c};if("function"==typeof c)try{return c(a,b)}catch(a){throw Error("qrbox config was passed as a function but it failed with unknown error"+a)}return c},a.prototype.setupUi=function(a,b,c){c.isShadedBoxEnabled()&&this.validateQrboxSize(a,b,c);var d=p(c.qrbox)?{width:a,height:b}:c.qrbox;this.validateQrboxConfig(d);var e=this.toQrdimensions(a,b,d);e.height>b&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=c.isShadedBoxEnabled()&&e.height<=b,g=f?this.getShadedRegionBounds(a,b,e):{x:0,y:0,width:a,height:b},h=this.createCanvasElement(g.width,g.height),i=h.getContext("2d",{willReadFrequently:!0});i.canvas.width=g.width,i.canvas.height=g.height,this.element.append(h),f&&this.possiblyInsertShadingElement(this.element,a,b,e),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=i,this.canvasElement=h},a.prototype.createScannerPausedUiElement=function(a){var b=document.createElement("div");b.innerText=q.scannerPaused(),b.style.display="none",b.style.position="absolute",b.style.top="0px",b.style.zIndex="1",b.style.background="rgba(9, 9, 9, 0.46)",b.style.color="#FFECEC",b.style.textAlign="center",b.style.width="100%",a.appendChild(b),this.scannerPausedUiElement=b},a.prototype.scanContext=function(a,b){var c=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(b){return a(b.text,m.createFromQrcodeResult(b)),c.possiblyUpdateShaders(!0),!0}).catch(function(a){c.possiblyUpdateShaders(!1);var d=q.codeParseError(a);return b(d,n.createFrom(d)),!1})},a.prototype.foreverScan=function(a,b,c){var d=this;if(this.shouldScan&&this.renderedCamera){var e=this.renderedCamera.getSurface(),f=e.videoWidth/e.clientWidth,g=e.videoHeight/e.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*f,i=this.qrRegion.height*g,j=this.qrRegion.x*f,k=this.qrRegion.y*g;this.context.drawImage(e,j,k,h,i,0,0,this.qrRegion.width,this.qrRegion.height);var l=function(){d.foreverScanTimeout=setTimeout(function(){d.foreverScan(a,b,c)},d.getTimeoutFps(a.fps))};this.scanContext(b,c).then(function(e){e||!0===a.disableFlip?l():(d.context.translate(d.context.canvas.width,0),d.context.scale(-1,1),d.scanContext(b,c).finally(function(){l()}))}).catch(function(a){d.logger.logError("Error happend while scanning context",a),l()})}},a.prototype.createVideoConstraints=function(a){if("string"==typeof a)return{deviceId:{exact:a}};if("object"==typeof a){var b="facingMode",c="deviceId",d={user:!0,environment:!0},e="exact",f=function(a){if(a in d)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(a,"'")},g=Object.keys(a);if(1!==g.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var h=Object.keys(a)[0];if(h!==b&&h!==c)throw"Only '".concat(b,"' and '").concat(c,"' ")+" are supported for 'cameraIdOrConfig'";if(h===b){var i=a.facingMode;if("string"==typeof i){if(f(i))return{facingMode:i}}else if("object"==typeof i)if(e in i){if(f(i["".concat(e)]))return{facingMode:{exact:i["".concat(e)]}}}else throw"'facingMode' should be string or object with"+" ".concat(e," as key.");else{var j=typeof i;throw"Invalid type of 'facingMode' = ".concat(j)}}else{var k=a.deviceId;if("string"==typeof k)return{deviceId:k};if("object"==typeof k)if(e in k)return{deviceId:{exact:k["".concat(e)]}};else throw"'deviceId' should be string or object with"+" ".concat(e," as key.");var l=typeof k;throw"Invalid type of 'deviceId' = ".concat(l)}}var m=typeof a;throw"Invalid type of 'cameraIdOrConfig' = ".concat(m)},a.prototype.computeCanvasDrawConfig=function(a,b,c,d){if(a<=c&&b<=d)return{x:(c-a)/2,y:(d-b)/2,width:a,height:b};var e=a,f=b;return a>c&&(b=c/a*b,a=c),b>d&&(a=d/b*a,b=d),this.logger.log("Image downsampled from "+"".concat(e,"X").concat(f)+" to ".concat(a,"X").concat(b,".")),this.computeCanvasDrawConfig(a,b,c,d)},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var a=document.getElementById(this.elementId);a&&(a.innerHTML="")},a.prototype.possiblyUpdateShaders=function(a){this.qrMatch!==a&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(b){b.style.backgroundColor=a?T.BORDER_SHADER_MATCH_COLOR:T.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=a)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(a,b,c){var d=document.createElement("canvas");return d.style.width="".concat(a,"px"),d.style.height="".concat(b,"px"),d.style.display="none",d.id=p(c)?"qr-canvas":c,d},a.prototype.getShadedRegionBounds=function(a,b,c){if(c.width>a||c.height>b)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(a-c.width)/2,y:(b-c.height)/2,width:c.width,height:c.height}},a.prototype.possiblyInsertShadingElement=function(a,b,c,d){if(!(b-d.width<1)&&!(c-d.height<1)){var e=document.createElement("div");e.style.position="absolute";var f=(b-d.width)/2,g=(c-d.height)/2;e.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),e.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),e.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),e.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),e.style.boxSizing="border-box",e.style.top="0px",e.style.bottom="0px",e.style.left="0px",e.style.right="0px",e.id="".concat(T.SHADED_REGION_ELEMENT_ID),b-d.width<11||c-d.height<11?this.hasBorderShaders=!1:(this.insertShaderBorders(e,40,5,-5,null,0,!0),this.insertShaderBorders(e,40,5,-5,null,0,!1),this.insertShaderBorders(e,40,5,null,-5,0,!0),this.insertShaderBorders(e,40,5,null,-5,0,!1),this.insertShaderBorders(e,5,45,-5,null,-5,!0),this.insertShaderBorders(e,5,45,null,-5,-5,!0),this.insertShaderBorders(e,5,45,-5,null,-5,!1),this.insertShaderBorders(e,5,45,null,-5,-5,!1),this.hasBorderShaders=!0),a.append(e)}},a.prototype.insertShaderBorders=function(a,b,c,d,e,f,g){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=T.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(b,"px"),h.style.height="".concat(c,"px"),null!==d&&(h.style.top="".concat(d,"px")),null!==e&&(h.style.bottom="".concat(e,"px")),g?h.style.left="".concat(f,"px"):h.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),a.appendChild(h)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(a){return 1e3/a},a}(),W="data:image/svg+xml;base64,",X=W+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Y=W+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Z=W+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",$=function(){function a(){}return a.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},a}(),_=function(){function a(){this.data=$.createDefault();var b=localStorage.getItem(a.LOCAL_STORAGE_KEY);b?this.data=JSON.parse(b):this.reset()}return a.prototype.hasCameraPermissions=function(){return this.data.hasPermission},a.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},a.prototype.setHasPermission=function(a){this.data.hasPermission=a,this.flush()},a.prototype.setLastUsedCameraId=function(a){this.data.lastUsedCameraId=a,this.flush()},a.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},a.prototype.reset=function(){this.data=$.createDefault(),this.flush()},a.prototype.flush=function(){localStorage.setItem(a.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},a.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",a}(),aa=function(){function a(){this.infoDiv=document.createElement("div")}return a.prototype.renderInto=function(a){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=s.poweredBy();var b=document.createElement("a");b.innerText="ScanApp",b.href="https://scanapp.org",b.target="new",b.style.color="white",this.infoDiv.appendChild(b);var c=document.createElement("br"),d=document.createElement("br");this.infoDiv.appendChild(c),this.infoDiv.appendChild(d);var e=document.createElement("a");e.innerText=s.reportIssues(),e.href="https://github.com/mebjas/html5-qrcode/issues",e.target="new",e.style.color="white",this.infoDiv.appendChild(e),a.appendChild(this.infoDiv)},a.prototype.show=function(){this.infoDiv.style.display="block"},a.prototype.hide=function(){this.infoDiv.style.display="none"},a}(),ab=function(){function a(a,b){this.isShowingInfoIcon=!0,this.onTapIn=a,this.onTapOut=b,this.infoIcon=document.createElement("img")}return a.prototype.renderInto=function(a){var b=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Z,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(a){return b.onHoverIn()},this.infoIcon.onmouseout=function(a){return b.onHoverOut()},this.infoIcon.onclick=function(a){return b.onClick()},a.appendChild(this.infoIcon)},a.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},a.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},a.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Z,this.infoIcon.style.opacity="0.6")},a}(),ac=function(){function a(){var a=this;this.infoDiv=new aa,this.infoIcon=new ab(function(){a.infoDiv.show()},function(){a.infoDiv.hide()})}return a.prototype.renderInto=function(a){this.infoDiv.renderInto(a),this.infoIcon.renderInto(a)},a}(),ad=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},ae=function(){function a(){}return a.hasPermissions=function(){var a,b,c,d;return a=this,b=void 0,c=void 0,d=function(){var a,b,c;return ad(this,function(d){switch(d.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(a=0,b=d.sent();a<b.length;a++)if("videoinput"===(c=b[a]).kind&&c.label)return[2,!0];return[2,!1]}})},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},a}(),af=function(){function a(a){this.supportedScanTypes=this.validateAndReturnScanTypes(a)}return a.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},a.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},a.prototype.isCameraScanRequired=function(){for(var b=0,c=this.supportedScanTypes;b<c.length;b++){var d=c[b];if(a.isCameraScanType(d))return!0}return!1},a.isCameraScanType=function(a){return a===f.SCAN_TYPE_CAMERA},a.isFileScanType=function(a){return a===f.SCAN_TYPE_FILE},a.prototype.validateAndReturnScanTypes=function(a){if(!a||0===a.length)return k.DEFAULT_SUPPORTED_SCAN_TYPE;var b=k.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(a.length>b)throw"Max ".concat(b," values expected for ")+"supportedScanTypes";for(var c=0;c<a.length;c++){var d=a[c];if(!k.DEFAULT_SUPPORTED_SCAN_TYPE.includes(d))throw"Unsupported scan type ".concat(d)}return a},a}(),ag=function(){function a(){}return a.ALL_ELEMENT_CLASS="html5-qrcode-element",a.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",a.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",a.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",a.TORCH_BUTTON_ID="html5-qrcode-button-torch",a.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",a.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",a.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",a.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",a.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",a.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",a}(),ah=function(){function a(){}return a.createElement=function(a,b){var c=document.createElement(a);return c.id=b,c.classList.add(ag.ALL_ELEMENT_CLASS),"button"===a&&c.setAttribute("type","button"),c},a}(),ai=function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},aj=function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;f&&(f=0,j[0]&&(g=0)),g;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,d=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){g=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){g.label=j[1];break}if(6===j[0]&&g.label<e[1]){g.label=e[1],e=j;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(j);break}e[2]&&g.ops.pop(),g.trys.pop();continue}j=b.call(a,g)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},ak=function(){function a(a,b,c){this.isTorchOn=!1,this.torchCapability=a,this.buttonController=b,this.onTorchActionFailureCallback=c}return a.prototype.isTorchEnabled=function(){return this.isTorchOn},a.prototype.flipState=function(){return ai(this,void 0,void 0,function(){var a,b;return aj(this,function(c){switch(c.label){case 0:this.buttonController.disable(),a=!this.isTorchOn,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.torchCapability.apply(a)];case 2:return c.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),a),[3,4];case 3:return b=c.sent(),this.propagateFailure(a,b),this.buttonController.enable(),[3,4];case 4:return[2]}})})},a.prototype.updateUiBasedOnLatestSettings=function(a,b){a===b?(this.buttonController.setText(b?r.torchOffButton():r.torchOnButton()),this.isTorchOn=b):this.propagateFailure(b),this.buttonController.enable()},a.prototype.propagateFailure=function(a,b){var c=a?r.torchOnFailedMessage():r.torchOffFailedMessage();b&&(c+="; Error = "+b),this.onTorchActionFailureCallback(c)},a.prototype.reset=function(){this.isTorchOn=!1},a}(),al=function(){function a(a,b){this.onTorchActionFailureCallback=b,this.torchButton=ah.createElement("button",ag.TORCH_BUTTON_ID),this.torchController=new ak(a,this,b)}return a.prototype.render=function(a,b){var c=this;this.torchButton.innerText=r.torchOnButton(),this.torchButton.style.display=b.display,this.torchButton.style.marginLeft=b.marginLeft;var d=this;this.torchButton.addEventListener("click",function(a){return ai(c,void 0,void 0,function(){return aj(this,function(a){switch(a.label){case 0:return[4,d.torchController.flipState()];case 1:return a.sent(),d.torchController.isTorchEnabled()?(d.torchButton.classList.remove(ag.TORCH_BUTTON_CLASS_TORCH_OFF),d.torchButton.classList.add(ag.TORCH_BUTTON_CLASS_TORCH_ON)):(d.torchButton.classList.remove(ag.TORCH_BUTTON_CLASS_TORCH_ON),d.torchButton.classList.add(ag.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),a.appendChild(this.torchButton)},a.prototype.updateTorchCapability=function(a){this.torchController=new ak(a,this,this.onTorchActionFailureCallback)},a.prototype.getTorchButton=function(){return this.torchButton},a.prototype.hide=function(){this.torchButton.style.display="none"},a.prototype.show=function(){this.torchButton.style.display="inline-block"},a.prototype.disable=function(){this.torchButton.disabled=!0},a.prototype.enable=function(){this.torchButton.disabled=!1},a.prototype.setText=function(a){this.torchButton.innerText=a},a.prototype.reset=function(){this.torchButton.innerText=r.torchOnButton(),this.torchController.reset()},a.create=function(b,c,d,e){var f=new a(c,e);return f.render(b,d),f},a}(),am=function(){function a(a,b,c){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=b?"block":"none",a.appendChild(this.fileBasedScanRegion);var d=document.createElement("label");d.setAttribute("for",this.getFileScanInputId()),d.style.display="inline-block",this.fileBasedScanRegion.appendChild(d),this.fileSelectionButton=ah.createElement("button",ag.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(a){d.click()}),d.append(this.fileSelectionButton),this.fileScanInput=ah.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",d.appendChild(this.fileScanInput);var e=this;this.fileScanInput.addEventListener("change",function(a){if(null!=a&&null!=a.target){var b=a.target;if(!b.files||0!==b.files.length){var d=b.files[0],f=d.name;e.setImageNameToButton(f),c(d)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(a){e.fileBasedScanRegion.style.border=e.fileBasedScanRegionActiveBorder(),a.stopPropagation(),a.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(a){e.fileBasedScanRegion.style.border=e.fileBasedScanRegionDefaultBorder(),a.stopPropagation(),a.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(a){e.fileBasedScanRegion.style.border=e.fileBasedScanRegionActiveBorder(),a.stopPropagation(),a.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(a){a.stopPropagation(),a.preventDefault(),e.fileBasedScanRegion.style.border=e.fileBasedScanRegionDefaultBorder();var b=a.dataTransfer;if(b){var d=b.files;if(!d||0===d.length)return;for(var g=!1,h=0;h<d.length;++h){var i=d.item(h);if(i){var j=/image.*/;if(i.type.match(j)){g=!0;var k=i.name;e.setImageNameToButton(k),c(i),f.innerText=r.dragAndDropMessage();break}}}g||(f.innerText=r.dragAndDropMessageOnlyImages())}})}return a.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},a.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},a.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},a.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},a.prototype.createFileBasedScanRegion=function(){var a=document.createElement("div");return a.style.textAlign="center",a.style.margin="auto",a.style.width="80%",a.style.maxWidth="600px",a.style.border=this.fileBasedScanRegionDefaultBorder(),a.style.padding="10px",a.style.marginBottom="10px",a},a.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},a.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},a.prototype.createDragAndDropMessage=function(){var a=document.createElement("div");return a.innerText=r.dragAndDropMessage(),a.style.fontWeight="400",a},a.prototype.setImageNameToButton=function(a){if(a.length>20){var b=a.substring(0,8),c=a.length,d=a.substring(c-8,c);a="".concat(b,"....").concat(d)}var e=r.fileSelectionChooseAnother()+" - "+a;this.fileSelectionButton.innerText=e},a.prototype.setInitialValueToButton=function(){var a=r.fileSelectionChooseImage()+" - "+r.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=a},a.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},a.create=function(b,c,d){return new a(b,c,d)},a}(),an=function(){function a(a){this.selectElement=ah.createElement("select",ag.CAMERA_SELECTION_SELECT_ID),this.cameras=a,this.options=[]}return a.prototype.render=function(a){var b=document.createElement("span");b.style.marginRight="10px";var c=this.cameras.length;if(0===c)throw Error("No cameras found");if(1===c)b.style.display="none";else{var d=r.selectCamera();b.innerText="".concat(d," (").concat(this.cameras.length,")  ")}for(var e=1,f=0,g=this.cameras;f<g.length;f++){var h=g[f],i=h.id,j=null==h.label?i:h.label;j&&""!==j||(j=[r.anonymousCameraPrefix(),e++].join(" "));var k=document.createElement("option");k.value=i,k.innerText=j,this.options.push(k),this.selectElement.appendChild(k)}b.appendChild(this.selectElement),a.appendChild(b)},a.prototype.disable=function(){this.selectElement.disabled=!0},a.prototype.isDisabled=function(){return!0===this.selectElement.disabled},a.prototype.enable=function(){this.selectElement.disabled=!1},a.prototype.getValue=function(){return this.selectElement.value},a.prototype.hasValue=function(a){for(var b=0,c=this.options;b<c.length;b++)if(c[b].value===a)return!0;return!1},a.prototype.setValue=function(a){if(!this.hasValue(a))throw Error("".concat(a," is not present in the camera list."));this.selectElement.value=a},a.prototype.hasSingleItem=function(){return 1===this.cameras.length},a.prototype.numCameras=function(){return this.cameras.length},a.create=function(b,c){var d=new a(c);return d.render(b),d},a}(),ao=function(){function a(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ah.createElement("input",ag.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return a.prototype.render=function(a,b){this.zoomElementContainer.style.display=b?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",a.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var c=r.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(c),this.rangeText.style.marginRight="10px";var d=this;this.rangeInput.addEventListener("input",function(){return d.onValueChange()}),this.rangeInput.addEventListener("change",function(){return d.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},a.prototype.onValueChange=function(){var a=r.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},a.prototype.setValues=function(a,b,c,d){this.rangeInput.min=a.toString(),this.rangeInput.max=b.toString(),this.rangeInput.step=d.toString(),this.rangeInput.value=c.toString(),this.onValueChange()},a.prototype.show=function(){this.zoomElementContainer.style.display="block"},a.prototype.hide=function(){this.zoomElementContainer.style.display="none"},a.prototype.setOnCameraZoomValueChangeCallback=function(a){this.onChangeCallback=a},a.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},a.create=function(b,c){var d=new a;return d.render(b,c),d},a}();!function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(i||(i={})),!function(){function a(a,b,c){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=a,this.config=this.createConfig(b),this.verbose=!0===c,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.scanTypeSelector=new af(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new o(this.verbose),this.persistedDataManager=new _,!0!==b.rememberLastUsedCamera&&this.persistedDataManager.reset()}a.prototype.render=function(a,b){var c,d,e=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(b,c){if(a)a(b,c);else{if(e.lastMatchFound===b)return;e.lastMatchFound=b,e.setHeaderMessage(r.lastMatch(b),i.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(a,c){b&&b(a,c)};var f=document.getElementById(this.elementId);if(!f)throw"HTML Element with id=".concat(this.elementId," not found");f.innerHTML="",this.createBasicLayout(f),this.html5Qrcode=new V(this.getScanRegionId(),(c=this.config,d=this.verbose,{formatsToSupport:c.formatsToSupport,useBarCodeDetectorIfSupported:c.useBarCodeDetectorIfSupported,experimentalFeatures:c.experimentalFeatures,verbose:d}))},a.prototype.pause=function(a){(p(a)||!0!==a)&&(a=!1),this.getHtml5QrcodeOrFail().pause(a)},a.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},a.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},a.prototype.clear=function(){var a=this,b=function(){var b=document.getElementById(a.elementId);b&&(b.innerHTML="",a.resetBasicLayout(b))};return this.html5Qrcode?new Promise(function(c,d){if(!a.html5Qrcode)return void c();a.html5Qrcode.isScanning?a.html5Qrcode.stop().then(function(d){if(!a.html5Qrcode)return void c();a.html5Qrcode.clear(),b(),c()}).catch(function(b){a.verbose&&a.logger.logError("Unable to stop qrcode scanner",b),d(b)}):(a.html5Qrcode.clear(),b(),c())}):Promise.resolve()},a.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},a.prototype.applyVideoConstraints=function(a){return this.getHtml5QrcodeOrFail().applyVideoConstraints(a)},a.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},a.prototype.createConfig=function(a){return a?(a.fps||(a.fps=k.SCAN_DEFAULT_FPS),!k.DEFAULT_REMEMBER_LAST_CAMERA_USED!==a.rememberLastUsedCamera&&(a.rememberLastUsedCamera=k.DEFAULT_REMEMBER_LAST_CAMERA_USED),a.supportedScanTypes||(a.supportedScanTypes=k.DEFAULT_SUPPORTED_SCAN_TYPE),a):{fps:k.SCAN_DEFAULT_FPS,rememberLastUsedCamera:k.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:k.DEFAULT_SUPPORTED_SCAN_TYPE}},a.prototype.createBasicLayout=function(a){a.style.position="relative",a.style.padding="0px",a.style.border="1px solid silver",this.createHeader(a);var b=document.createElement("div");b.id=this.getScanRegionId(),b.style.width="100%",b.style.minHeight="100px",b.style.textAlign="center",a.appendChild(b),af.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var c=document.createElement("div");c.id=this.getDashboardId(),c.style.width="100%",a.appendChild(c),this.setupInitialDashboard(c)},a.prototype.resetBasicLayout=function(a){a.style.border="none"},a.prototype.setupInitialDashboard=function(a){this.createSection(a),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},a.prototype.createHeader=function(a){var b=document.createElement("div");b.style.textAlign="left",b.style.margin="0px",a.appendChild(b),new ac().renderInto(b);var c=document.createElement("div");c.id=this.getHeaderMessageContainerId(),c.style.display="none",c.style.textAlign="center",c.style.fontSize="14px",c.style.padding="2px 10px",c.style.margin="4px",c.style.borderTop="1px solid #f6f6f6",b.appendChild(c)},a.prototype.createSection=function(a){var b=document.createElement("div");b.id=this.getDashboardSectionId(),b.style.width="100%",b.style.padding="10px 0px 10px 0px",b.style.textAlign="left",a.appendChild(b)},a.prototype.createCameraListUi=function(a,b,c){var d=this;d.showHideScanTypeSwapLink(!1),d.setHeaderMessage(r.cameraPermissionRequesting());var e=function(){c||d.createPermissionButton(a,b)};V.getCameras().then(function(c){d.persistedDataManager.setHasPermission(!0),d.showHideScanTypeSwapLink(!0),d.resetHeaderMessage(),c&&c.length>0?(a.removeChild(b),d.renderCameraSelection(c)):(d.setHeaderMessage(r.noCameraFound(),i.STATUS_WARNING),e())}).catch(function(a){d.persistedDataManager.setHasPermission(!1),c?c.disabled=!1:e(),d.setHeaderMessage(a,i.STATUS_WARNING),d.showHideScanTypeSwapLink(!0)})},a.prototype.createPermissionButton=function(a,b){var c=this,d=ah.createElement("button",this.getCameraPermissionButtonId());d.innerText=r.cameraPermissionTitle(),d.addEventListener("click",function(){d.disabled=!0,c.createCameraListUi(a,b,d)}),b.appendChild(d)},a.prototype.createPermissionsUi=function(a,b){var c=this;if(af.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions())return void ae.hasPermissions().then(function(d){d?c.createCameraListUi(a,b):(c.persistedDataManager.setHasPermission(!1),c.createPermissionButton(a,b))}).catch(function(d){c.persistedDataManager.setHasPermission(!1),c.createPermissionButton(a,b)});this.createPermissionButton(a,b)},a.prototype.createSectionControlPanel=function(){var a=document.getElementById(this.getDashboardSectionId()),b=document.createElement("div");a.appendChild(b);var c=document.createElement("div");c.id=this.getDashboardSectionCameraScanRegionId(),c.style.display=af.isCameraScanType(this.currentScanType)?"block":"none",b.appendChild(c);var d=document.createElement("div");d.style.textAlign="center",c.appendChild(d),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(c,d),this.renderFileScanUi(b)},a.prototype.renderFileScanUi=function(a){var b=af.isFileScanType(this.currentScanType),c=this;this.fileSelectionUi=am.create(a,b,function(a){if(!c.html5Qrcode)throw"html5Qrcode not defined";af.isFileScanType(c.currentScanType)&&(c.setHeaderMessage(r.loadingImage()),c.html5Qrcode.scanFileV2(a,!0).then(function(a){c.resetHeaderMessage(),c.qrCodeSuccessCallback(a.decodedText,a)}).catch(function(a){c.setHeaderMessage(a,i.STATUS_WARNING),c.qrCodeErrorCallback(a,n.createFrom(a))}))})},a.prototype.renderCameraSelection=function(a){var b,c=this,d=this,e=document.getElementById(this.getDashboardSectionCameraScanRegionId());e.style.textAlign="center";var f=ao.create(e,!1),g=function(a){var b=a.zoomFeature();if(b.isSupported()){f.setOnCameraZoomValueChangeCallback(function(a){b.apply(a)});var d,e,g,h=1;c.config.defaultZoomValueIfSupported&&(h=c.config.defaultZoomValueIfSupported),d=h,e=b.min(),h=d>(g=b.max())?g:d<e?e:d,f.setValues(b.min(),b.max(),h,b.step()),f.show()}},h=an.create(e,a),j=document.createElement("span"),k=ah.createElement("button",ag.CAMERA_START_BUTTON_ID);k.innerText=r.scanButtonStartScanningText(),j.appendChild(k);var l=ah.createElement("button",ag.CAMERA_STOP_BUTTON_ID);l.innerText=r.scanButtonStopScanningText(),l.style.display="none",l.disabled=!0,j.appendChild(l);var m=function(a){if(!a.torchFeature().isSupported()){b&&b.hide();return}b?b.updateTorchCapability(a.torchFeature()):b=al.create(j,a.torchFeature(),{display:"none",marginLeft:"5px"},function(a){d.setHeaderMessage(a,i.STATUS_WARNING)}),b.show()};e.appendChild(j);var n=function(a){a||(k.style.display="none"),k.innerText=r.scanButtonStartScanningText(),k.style.opacity="1",k.disabled=!1,a&&(k.style.display="inline-block")};if(k.addEventListener("click",function(a){k.innerText=r.scanButtonScanningStarting(),h.disable(),k.disabled=!0,k.style.opacity="0.5",c.scanTypeSelector.hasMoreThanOneScanType()&&d.showHideScanTypeSwapLink(!1),d.resetHeaderMessage();var b,e=h.getValue();d.persistedDataManager.setLastUsedCameraId(e),d.html5Qrcode.start(e,{fps:(b=d.config).fps,qrbox:b.qrbox,aspectRatio:b.aspectRatio,disableFlip:b.disableFlip,videoConstraints:b.videoConstraints},d.qrCodeSuccessCallback,d.qrCodeErrorCallback).then(function(a){l.disabled=!1,l.style.display="inline-block",n(!1);var b=d.html5Qrcode.getRunningTrackCameraCapabilities();!0===c.config.showTorchButtonIfSupported&&m(b),!0===c.config.showZoomSliderIfSupported&&g(b)}).catch(function(a){d.showHideScanTypeSwapLink(!0),h.enable(),n(!0),d.setHeaderMessage(a,i.STATUS_WARNING)})}),h.hasSingleItem()&&k.click(),l.addEventListener("click",function(a){if(!d.html5Qrcode)throw"html5Qrcode not defined";l.disabled=!0,d.html5Qrcode.stop().then(function(a){c.scanTypeSelector.hasMoreThanOneScanType()&&d.showHideScanTypeSwapLink(!0),h.enable(),k.disabled=!1,l.style.display="none",k.style.display="inline-block",b&&(b.reset(),b.hide()),f.removeOnCameraZoomValueChangeCallback(),f.hide(),d.insertCameraScanImageToScanRegion()}).catch(function(a){l.disabled=!1,d.setHeaderMessage(a,i.STATUS_WARNING)})}),d.persistedDataManager.getLastUsedCameraId()){var o=d.persistedDataManager.getLastUsedCameraId();h.hasValue(o)?(h.setValue(o),k.click()):d.persistedDataManager.resetLastUsedCameraId()}},a.prototype.createSectionSwap=function(){var a=this,b=r.textIfCameraScanSelected(),c=r.textIfFileScanSelected(),d=document.getElementById(this.getDashboardSectionId()),e=document.createElement("div");e.style.textAlign="center";var g=ah.createElement("span",this.getDashboardSectionSwapLinkId());g.style.textDecoration="underline",g.style.cursor="pointer",g.innerText=af.isCameraScanType(this.currentScanType)?b:c,g.addEventListener("click",function(){if(!a.sectionSwapAllowed){a.verbose&&a.logger.logError("Section swap called when not allowed");return}a.resetHeaderMessage(),a.fileSelectionUi.resetValue(),a.sectionSwapAllowed=!1,af.isCameraScanType(a.currentScanType)?(a.clearScanRegion(),a.getCameraScanRegion().style.display="none",a.fileSelectionUi.show(),g.innerText=c,a.currentScanType=f.SCAN_TYPE_FILE,a.insertFileScanImageToScanRegion()):(a.clearScanRegion(),a.getCameraScanRegion().style.display="block",a.fileSelectionUi.hide(),g.innerText=b,a.currentScanType=f.SCAN_TYPE_CAMERA,a.insertCameraScanImageToScanRegion(),a.startCameraScanIfPermissionExistsOnSwap()),a.sectionSwapAllowed=!0}),e.appendChild(g),d.appendChild(e)},a.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var a=this,b=this;if(this.persistedDataManager.hasCameraPermissions())return void ae.hasPermissions().then(function(c){if(c){var d=document.getElementById(b.getCameraPermissionButtonId());if(!d)throw a.logger.logError("Permission button not found, fail;"),"Permission button not found";d.click()}else b.persistedDataManager.setHasPermission(!1)}).catch(function(a){b.persistedDataManager.setHasPermission(!1)})},a.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},a.prototype.setHeaderMessage=function(a,b){b||(b=i.STATUS_DEFAULT);var c=this.getHeaderMessageDiv();switch(c.innerText=a,c.style.display="block",b){case i.STATUS_SUCCESS:c.style.background="rgba(106, 175, 80, 0.26)",c.style.color="#477735";break;case i.STATUS_WARNING:c.style.background="rgba(203, 36, 49, 0.14)",c.style.color="#cb2431";break;case i.STATUS_DEFAULT:default:c.style.background="rgba(0, 0, 0, 0)",c.style.color="rgb(17, 17, 17)"}},a.prototype.showHideScanTypeSwapLink=function(a){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==a&&(a=!1),this.sectionSwapAllowed=a,this.getDashboardSectionSwapLink().style.display=a?"inline-block":"none")},a.prototype.insertCameraScanImageToScanRegion=function(){var a=this,b=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){b.innerHTML="<br>",b.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(c){b.innerHTML="<br>",b.appendChild(a.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=X,this.cameraScanImage.alt=r.cameraScanAltText()},a.prototype.insertFileScanImageToScanRegion=function(){var a=this,b=document.getElementById(this.getScanRegionId());if(this.fileScanImage){b.innerHTML="<br>",b.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(c){b.innerHTML="<br>",b.appendChild(a.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Y,this.fileScanImage.alt=r.fileScanAltText()},a.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},a.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},a.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},a.prototype.getDashboardSectionSwapLinkId=function(){return ag.SCAN_TYPE_CHANGE_ANCHOR_ID},a.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},a.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},a.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},a.prototype.getCameraPermissionButtonId=function(){return ag.CAMERA_PERMISSION_BUTTON_ID},a.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},a.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},a.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}()},93182:function(a,b){(function(a){"use strict";let b;var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},z=function(a){function b(){this.constructor=c}function c(b){var c,d,e,f,g=this.constructor,h=a.call(this,b)||this;return Object.defineProperty(h,"name",{value:g.name,enumerable:!1}),c=g.prototype,(d=Object.setPrototypeOf)?d(h,c):h.__proto__=c,void 0===e&&(e=h.constructor),(f=Error.captureStackTrace)&&f(h,e),h}return y(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),c}(Error);class A extends z{constructor(a){super(a),this.message=a}getKind(){return this.constructor.kind}}A.kind="Exception";class B extends A{}B.kind="ArgumentException";class C extends A{}C.kind="IllegalArgumentException";class D{constructor(a){if(this.binarizer=a,null===a)throw new C("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(a,b){return this.binarizer.getBlackRow(a,b)}getBlackMatrix(){return(null===this.matrix||void 0===this.matrix)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(a,b,c,d){let e=this.binarizer.getLuminanceSource().crop(a,b,c,d);return new D(this.binarizer.createBinarizer(e))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let a=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new D(this.binarizer.createBinarizer(a))}rotateCounterClockwise45(){let a=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new D(this.binarizer.createBinarizer(a))}toString(){try{return this.getBlackMatrix().toString()}catch(a){return""}}}class E extends A{static getChecksumInstance(){return new E}}E.kind="ChecksumException";class F{constructor(a){this.source=a}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class G{static arraycopy(a,b,c,d,e){for(;e--;)c[d++]=a[b++]}static currentTimeMillis(){return Date.now()}}class H extends A{}H.kind="IndexOutOfBoundsException";class I extends H{constructor(a,b){super(b),this.index=a,this.message=b}}I.kind="ArrayIndexOutOfBoundsException";class J{static fill(a,b){for(let c=0,d=a.length;c<d;c++)a[c]=b}static fillWithin(a,b,c,d){J.rangeCheck(a.length,b,c);for(let e=b;e<c;e++)a[e]=d}static rangeCheck(a,b,c){if(b>c)throw new C("fromIndex("+b+") > toIndex("+c+")");if(b<0)throw new I(b);if(c>a)throw new I(c)}static asList(...a){return a}static create(a,b,c){return Array.from({length:a}).map(a=>Array.from({length:b}).fill(c))}static createInt32Array(a,b,c){return Array.from({length:a}).map(a=>Int32Array.from({length:b}).fill(c))}static equals(a,b){if(!a||!b||!a.length||!b.length||a.length!==b.length)return!1;for(let c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}static hashCode(a){if(null===a)return 0;let b=1;for(let c of a)b=31*b+c;return b}static fillUint8Array(a,b){for(let c=0;c!==a.length;c++)a[c]=b}static copyOf(a,b){return a.slice(0,b)}static copyOfUint8Array(a,b){if(a.length<=b){let c=new Uint8Array(b);return c.set(a),c}return a.slice(0,b)}static copyOfRange(a,b,c){let d=c-b,e=new Int32Array(d);return G.arraycopy(a,b,e,0,d),e}static binarySearch(a,b,c){void 0===c&&(c=J.numberComparator);let d=0,e=a.length-1;for(;d<=e;){let f=e+d>>1,g=c(b,a[f]);if(g>0)d=f+1;else{if(!(g<0))return f;e=f-1}}return-d-1}static numberComparator(a,b){return a-b}}class K{static numberOfTrailingZeros(a){let b;if(0===a)return 32;let c=31;return 0!=(b=a<<16)&&(c-=16,a=b),0!=(b=a<<8)&&(c-=8,a=b),0!=(b=a<<4)&&(c-=4,a=b),0!=(b=a<<2)&&(c-=2,a=b),c-(a<<1>>>31)}static numberOfLeadingZeros(a){if(0===a)return 32;let b=1;return a>>>16==0&&(b+=16,a<<=16),a>>>24==0&&(b+=8,a<<=8),a>>>28==0&&(b+=4,a<<=4),a>>>30==0&&(b+=2,a<<=2),b-=a>>>31}static toHexString(a){return a.toString(16)}static toBinaryString(a){return String(parseInt(String(a),2))}static bitCount(a){return a-=a>>>1&0x55555555,a=(a=(0x33333333&a)+(a>>>2&0x33333333))+(a>>>4)&0xf0f0f0f,a+=a>>>8,63&(a+=a>>>16)}static truncDivision(a,b){return Math.trunc(a/b)}static parseInt(a,b){return parseInt(a,b)}}K.MIN_VALUE_32_BITS=-0x80000000,K.MAX_VALUE=Number.MAX_SAFE_INTEGER;class L{constructor(a,b){void 0===a?(this.size=0,this.bits=new Int32Array(1)):(this.size=a,null==b?this.bits=L.makeArray(a):this.bits=b)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(a){if(a>32*this.bits.length){let b=L.makeArray(a);G.arraycopy(this.bits,0,b,0,this.bits.length),this.bits=b}}get(a){return(this.bits[Math.floor(a/32)]&1<<(31&a))!=0}set(a){this.bits[Math.floor(a/32)]|=1<<(31&a)}flip(a){this.bits[Math.floor(a/32)]^=1<<(31&a)}getNextSet(a){let b=this.size;if(a>=b)return b;let c=this.bits,d=Math.floor(a/32),e=c[d];e&=~((1<<(31&a))-1);let f=c.length;for(;0===e;){if(++d===f)return b;e=c[d]}let g=32*d+K.numberOfTrailingZeros(e);return g>b?b:g}getNextUnset(a){let b=this.size;if(a>=b)return b;let c=this.bits,d=Math.floor(a/32),e=~c[d];e&=~((1<<(31&a))-1);let f=c.length;for(;0===e;){if(++d===f)return b;e=~c[d]}let g=32*d+K.numberOfTrailingZeros(e);return g>b?b:g}setBulk(a,b){this.bits[Math.floor(a/32)]=b}setRange(a,b){if(b<a||a<0||b>this.size)throw new C;if(b===a)return;let c=Math.floor(a/32),d=Math.floor(--b/32),e=this.bits;for(let f=c;f<=d;f++){let g=f>c?0:31&a,h=(2<<(f<d?31:31&b))-(1<<g);e[f]|=h}}clear(){let a=this.bits.length,b=this.bits;for(let c=0;c<a;c++)b[c]=0}isRange(a,b,c){if(b<a||a<0||b>this.size)throw new C;if(b===a)return!0;let d=Math.floor(a/32),e=Math.floor(--b/32),f=this.bits;for(let g=d;g<=e;g++){let h=g>d?0:31&a,i=(2<<(g<e?31:31&b))-(1<<h)|0;if((f[g]&i)!==(c?i:0))return!1}return!0}appendBit(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(a,b){if(b<0||b>32)throw new C("Num bits must be between 0 and 32");this.ensureCapacity(this.size+b);for(let c=b;c>0;c--)this.appendBit((a>>c-1&1)==1)}appendBitArray(a){let b=a.size;this.ensureCapacity(this.size+b);for(let c=0;c<b;c++)this.appendBit(a.get(c))}xor(a){if(this.size!==a.size)throw new C("Sizes don't match");let b=this.bits;for(let c=0,d=b.length;c<d;c++)b[c]^=a.bits[c]}toBytes(a,b,c,d){for(let e=0;e<d;e++){let d=0;for(let b=0;b<8;b++)this.get(a)&&(d|=1<<7-b),a++;b[c+e]=d}}getBitArray(){return this.bits}reverse(){let a=new Int32Array(this.bits.length),b=Math.floor((this.size-1)/32),c=b+1,d=this.bits;for(let e=0;e<c;e++){let c=d[e];c=(c=(c=(c=(c=c>>1&0x55555555|(0x55555555&c)<<1)>>2&0x33333333|(0x33333333&c)<<2)>>4&0xf0f0f0f|(0xf0f0f0f&c)<<4)>>8&0xff00ff|(0xff00ff&c)<<8)>>16&65535|(65535&c)<<16,a[b-e]=c}if(this.size!==32*c){let b=32*c-this.size,d=a[0]>>>b;for(let e=1;e<c;e++){let c=a[e];d|=c<<32-b,a[e-1]=d,d=c>>>b}a[c-1]=d}this.bits=a}static makeArray(a){return new Int32Array(Math.floor((a+31)/32))}equals(a){return a instanceof L&&this.size===a.size&&J.equals(this.bits,a.bits)}hashCode(){return 31*this.size+J.hashCode(this.bits)}toString(){let a="";for(let b=0,c=this.size;b<c;b++)(7&b)==0&&(a+=" "),a+=this.get(b)?"X":".";return a}clone(){return new L(this.size,this.bits.slice())}}(c=n||(n={}))[c.OTHER=0]="OTHER",c[c.PURE_BARCODE=1]="PURE_BARCODE",c[c.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",c[c.TRY_HARDER=3]="TRY_HARDER",c[c.CHARACTER_SET=4]="CHARACTER_SET",c[c.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",c[c.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",c[c.ASSUME_GS1=7]="ASSUME_GS1",c[c.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",c[c.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",c[c.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS";var M=n;class N extends A{static getFormatInstance(){return new N}}N.kind="FormatException",(d=o||(o={}))[d.Cp437=0]="Cp437",d[d.ISO8859_1=1]="ISO8859_1",d[d.ISO8859_2=2]="ISO8859_2",d[d.ISO8859_3=3]="ISO8859_3",d[d.ISO8859_4=4]="ISO8859_4",d[d.ISO8859_5=5]="ISO8859_5",d[d.ISO8859_6=6]="ISO8859_6",d[d.ISO8859_7=7]="ISO8859_7",d[d.ISO8859_8=8]="ISO8859_8",d[d.ISO8859_9=9]="ISO8859_9",d[d.ISO8859_10=10]="ISO8859_10",d[d.ISO8859_11=11]="ISO8859_11",d[d.ISO8859_13=12]="ISO8859_13",d[d.ISO8859_14=13]="ISO8859_14",d[d.ISO8859_15=14]="ISO8859_15",d[d.ISO8859_16=15]="ISO8859_16",d[d.SJIS=16]="SJIS",d[d.Cp1250=17]="Cp1250",d[d.Cp1251=18]="Cp1251",d[d.Cp1252=19]="Cp1252",d[d.Cp1256=20]="Cp1256",d[d.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",d[d.UTF8=22]="UTF8",d[d.ASCII=23]="ASCII",d[d.Big5=24]="Big5",d[d.GB18030=25]="GB18030",d[d.EUC_KR=26]="EUC_KR";class O{constructor(a,b,c,...d){this.valueIdentifier=a,this.name=c,"number"==typeof b?this.values=Int32Array.from([b]):this.values=b,this.otherEncodingNames=d,O.VALUE_IDENTIFIER_TO_ECI.set(a,this),O.NAME_TO_ECI.set(c,this);let e=this.values;for(let a=0,b=e.length;a!==b;a++){let b=e[a];O.VALUES_TO_ECI.set(b,this)}for(let a of d)O.NAME_TO_ECI.set(a,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(a){if(a<0||a>=900)throw new N("incorect value");let b=O.VALUES_TO_ECI.get(a);if(void 0===b)throw new N("incorect value");return b}static getCharacterSetECIByName(a){let b=O.NAME_TO_ECI.get(a);if(void 0===b)throw new N("incorect value");return b}equals(a){return a instanceof O&&this.getName()===a.getName()}}O.VALUE_IDENTIFIER_TO_ECI=new Map,O.VALUES_TO_ECI=new Map,O.NAME_TO_ECI=new Map,O.Cp437=new O(o.Cp437,Int32Array.from([0,2]),"Cp437"),O.ISO8859_1=new O(o.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),O.ISO8859_2=new O(o.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),O.ISO8859_3=new O(o.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),O.ISO8859_4=new O(o.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),O.ISO8859_5=new O(o.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),O.ISO8859_6=new O(o.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),O.ISO8859_7=new O(o.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),O.ISO8859_8=new O(o.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),O.ISO8859_9=new O(o.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),O.ISO8859_10=new O(o.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),O.ISO8859_11=new O(o.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),O.ISO8859_13=new O(o.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),O.ISO8859_14=new O(o.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),O.ISO8859_15=new O(o.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),O.ISO8859_16=new O(o.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),O.SJIS=new O(o.SJIS,20,"SJIS","Shift_JIS"),O.Cp1250=new O(o.Cp1250,21,"Cp1250","windows-1250"),O.Cp1251=new O(o.Cp1251,22,"Cp1251","windows-1251"),O.Cp1252=new O(o.Cp1252,23,"Cp1252","windows-1252"),O.Cp1256=new O(o.Cp1256,24,"Cp1256","windows-1256"),O.UnicodeBigUnmarked=new O(o.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),O.UTF8=new O(o.UTF8,26,"UTF8","UTF-8"),O.ASCII=new O(o.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),O.Big5=new O(o.Big5,28,"Big5"),O.GB18030=new O(o.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),O.EUC_KR=new O(o.EUC_KR,30,"EUC_KR","EUC-KR");class P extends A{}P.kind="UnsupportedOperationException";class Q{static decode(a,b){let c=this.encodingName(b);return this.customDecoder?this.customDecoder(a,c):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(c)?this.decodeFallback(a,c):new TextDecoder(c).decode(a)}static shouldDecodeOnFallback(a){return!Q.isBrowser()&&"ISO-8859-1"===a}static encode(a,b){let c=this.encodingName(b);return this.customEncoder?this.customEncoder(a,c):"undefined"==typeof TextEncoder?this.encodeFallback(a):new TextEncoder().encode(a)}static isBrowser(){return"undefined"!=typeof window&&"[object Window]"===({}).toString.call(window)}static encodingName(a){return"string"==typeof a?a:a.getName()}static encodingCharacterSet(a){return a instanceof O?a:O.getCharacterSetECIByName(a)}static decodeFallback(a,b){let c=this.encodingCharacterSet(b);if(Q.isDecodeFallbackSupported(c)){let b="";for(let c=0,d=a.length;c<d;c++){let d=a[c].toString(16);d.length<2&&(d="0"+d),b+="%"+d}return decodeURIComponent(b)}if(c.equals(O.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(a.buffer));throw new P(`Encoding ${this.encodingName(b)} not supported by fallback.`)}static isDecodeFallbackSupported(a){return a.equals(O.UTF8)||a.equals(O.ISO8859_1)||a.equals(O.ASCII)}static encodeFallback(a){let b=btoa(unescape(encodeURIComponent(a))).split(""),c=[];for(let a=0;a<b.length;a++)c.push(b[a].charCodeAt(0));return new Uint8Array(c)}}class R{static castAsNonUtf8Char(a,b=null){let c=b?b.getName():this.ISO88591;return Q.decode(new Uint8Array([a]),c)}static guessEncoding(a,b){if(null!=b&&void 0!==b.get(M.CHARACTER_SET))return b.get(M.CHARACTER_SET).toString();let c=a.length,d=!0,e=!0,f=!0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=a.length>3&&239===a[0]&&187===a[1]&&191===a[2];for(let b=0;b<c&&(d||e||f);b++){let c=255&a[b];f&&(g>0?(128&c)==0?f=!1:g--:(128&c)!=0&&((64&c)==0?f=!1:(g++,(32&c)==0?h++:(g++,(16&c)==0?i++:(g++,(8&c)==0?j++:f=!1))))),d&&(c>127&&c<160?d=!1:c>159&&(c<192||215===c||247===c)&&q++),e&&(k>0?c<64||127===c||c>252?e=!1:k--:128===c||160===c||c>239?e=!1:c>160&&c<224?(l++,n=0,++m>o&&(o=m)):c>127?(k++,m=0,++n>p&&(p=n)):(m=0,n=0))}return(f&&g>0&&(f=!1),e&&k>0&&(e=!1),f&&(r||h+i+j>0))?R.UTF8:e&&(R.ASSUME_SHIFT_JIS||o>=3||p>=3)?R.SHIFT_JIS:d&&e?2===o&&2===l||10*q>=c?R.SHIFT_JIS:R.ISO88591:d?R.ISO88591:e?R.SHIFT_JIS:f?R.UTF8:R.PLATFORM_DEFAULT_ENCODING}static format(a,...b){let c=-1;return a.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(a,d,e,f,g,h){let i;if("%%"===a)return"%";if(void 0===b[++c])return;a=f?parseInt(f.substr(1)):void 0;let j=g?parseInt(g.substr(1)):void 0;switch(h){case"s":i=b[c];break;case"c":i=b[c][0];break;case"f":i=parseFloat(b[c]).toFixed(a);break;case"p":i=parseFloat(b[c]).toPrecision(a);break;case"e":i=parseFloat(b[c]).toExponential(a);break;case"x":i=parseInt(b[c]).toString(j||16);break;case"d":i=parseFloat(parseInt(b[c],j||10).toPrecision(a)).toFixed(0)}i="object"==typeof i?JSON.stringify(i):(+i).toString(j);let k=parseInt(e),l=e&&e[0]+""=="0"?"0":" ";for(;i.length<k;)i=void 0!==d?i+l:l+i;return i})}static getBytes(a,b){return Q.encode(a,b)}static getCharCode(a,b=0){return a.charCodeAt(b)}static getCharAt(a){return String.fromCharCode(a)}}R.SHIFT_JIS=O.SJIS.getName(),R.GB2312="GB2312",R.ISO88591=O.ISO8859_1.getName(),R.EUC_JP="EUC_JP",R.UTF8=O.UTF8.getName(),R.PLATFORM_DEFAULT_ENCODING=R.UTF8,R.ASSUME_SHIFT_JIS=!1;class S{constructor(a=""){this.value=a}enableDecoding(a){return this.encoding=a,this}append(a){return"string"==typeof a?this.value+=a.toString():this.encoding?this.value+=R.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this}appendChars(a,b,c){for(let d=b;b<b+c;d++)this.append(a[d]);return this}length(){return this.value.length}charAt(a){return this.value.charAt(a)}deleteCharAt(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)}setCharAt(a,b){this.value=this.value.substr(0,a)+b+this.value.substr(a+1)}substring(a,b){return this.value.substring(a,b)}setLengthToZero(){this.value=""}toString(){return this.value}insert(a,b){this.value=this.value.substr(0,a)+b+this.value.substr(a+b.length)}}class T{constructor(a,b,c,d){if(this.width=a,this.height=b,this.rowSize=c,this.bits=d,null==b&&(b=a),this.height=b,a<1||b<1)throw new C("Both dimensions must be greater than 0");null==c&&(c=Math.floor((a+31)/32)),this.rowSize=c,null==d&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(a){let b=a.length,c=a[0].length,d=new T(c,b);for(let e=0;e<b;e++){let b=a[e];for(let a=0;a<c;a++)b[a]&&d.set(a,e)}return d}static parseFromString(a,b,c){if(null===a)throw new C("stringRepresentation cannot be null");let d=Array(a.length),e=0,f=0,g=-1,h=0,i=0;for(;i<a.length;)if("\n"===a.charAt(i)||"\r"===a.charAt(i)){if(e>f){if(-1===g)g=e-f;else if(e-f!==g)throw new C("row lengths do not match");f=e,h++}i++}else if(a.substring(i,i+b.length)===b)i+=b.length,d[e]=!0,e++;else if(a.substring(i,i+c.length)===c)i+=c.length,d[e]=!1,e++;else throw new C("illegal character encountered: "+a.substring(i));if(e>f){if(-1===g)g=e-f;else if(e-f!==g)throw new C("row lengths do not match");h++}let j=new T(g,h);for(let a=0;a<e;a++)d[a]&&j.set(Math.floor(a%g),Math.floor(a/g));return j}get(a,b){let c=b*this.rowSize+Math.floor(a/32);return(this.bits[c]>>>(31&a)&1)!=0}set(a,b){let c=b*this.rowSize+Math.floor(a/32);this.bits[c]|=1<<(31&a)}unset(a,b){let c=b*this.rowSize+Math.floor(a/32);this.bits[c]&=~(1<<(31&a))}flip(a,b){let c=b*this.rowSize+Math.floor(a/32);this.bits[c]^=1<<(31&a)}xor(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new C("input matrix dimensions do not match");let b=new L(Math.floor(this.width/32)+1),c=this.rowSize,d=this.bits;for(let e=0,f=this.height;e<f;e++){let f=e*c,g=a.getRow(e,b).getBitArray();for(let a=0;a<c;a++)d[f+a]^=g[a]}}clear(){let a=this.bits,b=a.length;for(let c=0;c<b;c++)a[c]=0}setRegion(a,b,c,d){if(b<0||a<0)throw new C("Left and top must be nonnegative");if(d<1||c<1)throw new C("Height and width must be at least 1");let e=a+c,f=b+d;if(f>this.height||e>this.width)throw new C("The region must fit inside the matrix");let g=this.rowSize,h=this.bits;for(let c=b;c<f;c++){let b=c*g;for(let c=a;c<e;c++)h[b+Math.floor(c/32)]|=1<<(31&c)}}getRow(a,b){null==b||b.getSize()<this.width?b=new L(this.width):b.clear();let c=this.rowSize,d=this.bits,e=a*c;for(let a=0;a<c;a++)b.setBulk(32*a,d[e+a]);return b}setRow(a,b){G.arraycopy(b.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)}rotate180(){let a=this.getWidth(),b=this.getHeight(),c=new L(a),d=new L(a);for(let a=0,e=Math.floor((b+1)/2);a<e;a++)c=this.getRow(a,c),d=this.getRow(b-1-a,d),c.reverse(),d.reverse(),this.setRow(a,d),this.setRow(b-1-a,c)}getEnclosingRectangle(){let a=this.width,b=this.height,c=this.rowSize,d=this.bits,e=a,f=b,g=-1,h=-1;for(let a=0;a<b;a++)for(let b=0;b<c;b++){let i=d[a*c+b];if(0!==i){if(a<f&&(f=a),a>h&&(h=a),32*b<e){let a=0;for(;i<<31-a==0;)a++;32*b+a<e&&(e=32*b+a)}if(32*b+31>g){let a=31;for(;i>>>a==0;)a--;32*b+a>g&&(g=32*b+a)}}}return g<e||h<f?null:Int32Array.from([e,f,g-e+1,h-f+1])}getTopLeftOnBit(){let a=this.rowSize,b=this.bits,c=0;for(;c<b.length&&0===b[c];)c++;if(c===b.length)return null;let d=c/a,e=c%a*32,f=b[c],g=0;for(;f<<31-g==0;)g++;return e+=g,Int32Array.from([e,d])}getBottomRightOnBit(){let a=this.rowSize,b=this.bits,c=b.length-1;for(;c>=0&&0===b[c];)c--;if(c<0)return null;let d=Math.floor(c/a),e=32*Math.floor(c%a),f=b[c],g=31;for(;f>>>g==0;)g--;return e+=g,Int32Array.from([e,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(a){return a instanceof T&&this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&J.equals(this.bits,a.bits)}hashCode(){let a=this.width;return 31*(a=31*(a=31*(a=31*a+this.width)+this.height)+this.rowSize)+J.hashCode(this.bits)}toString(a="X ",b="  ",c="\n"){return this.buildToString(a,b,c)}buildToString(a,b,c){let d=new S;for(let e=0,f=this.height;e<f;e++){for(let c=0,f=this.width;c<f;c++)d.append(this.get(c,e)?a:b);d.append(c)}return d.toString()}clone(){return new T(this.width,this.height,this.rowSize,this.bits.slice())}}class U extends A{static getNotFoundInstance(){return new U}}U.kind="NotFoundException";class V extends F{constructor(a){super(a),this.luminances=V.EMPTY,this.buckets=new Int32Array(V.LUMINANCE_BUCKETS)}getBlackRow(a,b){let c=this.getLuminanceSource(),d=c.getWidth();null==b||b.getSize()<d?b=new L(d):b.clear(),this.initArrays(d);let e=c.getRow(a,this.luminances),f=this.buckets;for(let a=0;a<d;a++)f[(255&e[a])>>V.LUMINANCE_SHIFT]++;let g=V.estimateBlackPoint(f);if(d<3)for(let a=0;a<d;a++)(255&e[a])<g&&b.set(a);else{let a=255&e[0],c=255&e[1];for(let f=1;f<d-1;f++){let d=255&e[f+1];(4*c-a-d)/2<g&&b.set(f),a=c,c=d}}return b}getBlackMatrix(){let a=this.getLuminanceSource(),b=a.getWidth(),c=a.getHeight(),d=new T(b,c);this.initArrays(b);let e=this.buckets;for(let d=1;d<5;d++){let f=Math.floor(c*d/5),g=a.getRow(f,this.luminances),h=Math.floor(4*b/5);for(let a=Math.floor(b/5);a<h;a++){let b=255&g[a];e[b>>V.LUMINANCE_SHIFT]++}}let f=V.estimateBlackPoint(e),g=a.getMatrix();for(let a=0;a<c;a++){let c=a*b;for(let e=0;e<b;e++)(255&g[c+e])<f&&d.set(e,a)}return d}createBinarizer(a){return new V(a)}initArrays(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));let b=this.buckets;for(let a=0;a<V.LUMINANCE_BUCKETS;a++)b[a]=0}static estimateBlackPoint(a){let b=a.length,c=0,d=0,e=0;for(let f=0;f<b;f++)a[f]>e&&(d=f,e=a[f]),a[f]>c&&(c=a[f]);let f=0,g=0;for(let c=0;c<b;c++){let b=c-d,e=a[c]*b*b;e>g&&(f=c,g=e)}if(d>f){let a=d;d=f,f=a}if(f-d<=b/16)throw new U;let h=f-1,i=-1;for(let b=f-1;b>d;b--){let e=b-d,g=e*e*(f-b)*(c-a[b]);g>i&&(h=b,i=g)}return h<<V.LUMINANCE_SHIFT}}V.LUMINANCE_BITS=5,V.LUMINANCE_SHIFT=8-V.LUMINANCE_BITS,V.LUMINANCE_BUCKETS=1<<V.LUMINANCE_BITS,V.EMPTY=Uint8ClampedArray.from([0]);class W extends V{constructor(a){super(a),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;let a=this.getLuminanceSource(),b=a.getWidth(),c=a.getHeight();if(b>=W.MINIMUM_DIMENSION&&c>=W.MINIMUM_DIMENSION){let d=a.getMatrix(),e=b>>W.BLOCK_SIZE_POWER;(b&W.BLOCK_SIZE_MASK)!=0&&e++;let f=c>>W.BLOCK_SIZE_POWER;(c&W.BLOCK_SIZE_MASK)!=0&&f++;let g=W.calculateBlackPoints(d,e,f,b,c),h=new T(b,c);W.calculateThresholdForBlock(d,e,f,b,c,g,h),this.matrix=h}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(a){return new W(a)}static calculateThresholdForBlock(a,b,c,d,e,f,g){let h=e-W.BLOCK_SIZE,i=d-W.BLOCK_SIZE;for(let e=0;e<c;e++){let j=e<<W.BLOCK_SIZE_POWER;j>h&&(j=h);let k=W.cap(e,2,c-3);for(let c=0;c<b;c++){let e=c<<W.BLOCK_SIZE_POWER;e>i&&(e=i);let h=W.cap(c,2,b-3),l=0;for(let a=-2;a<=2;a++){let b=f[k+a];l+=b[h-2]+b[h-1]+b[h]+b[h+1]+b[h+2]}let m=l/25;W.thresholdBlock(a,e,j,m,d,g)}}}static cap(a,b,c){return a<b?b:a>c?c:a}static thresholdBlock(a,b,c,d,e,f){for(let g=0,h=c*e+b;g<W.BLOCK_SIZE;g++,h+=e)for(let e=0;e<W.BLOCK_SIZE;e++)(255&a[h+e])<=d&&f.set(b+e,c+g)}static calculateBlackPoints(a,b,c,d,e){let f=e-W.BLOCK_SIZE,g=d-W.BLOCK_SIZE,h=Array(c);for(let e=0;e<c;e++){h[e]=new Int32Array(b);let c=e<<W.BLOCK_SIZE_POWER;c>f&&(c=f);for(let f=0;f<b;f++){let b=f<<W.BLOCK_SIZE_POWER;b>g&&(b=g);let i=0,j=255,k=0;for(let e=0,f=c*d+b;e<W.BLOCK_SIZE;e++,f+=d){for(let b=0;b<W.BLOCK_SIZE;b++){let c=255&a[f+b];i+=c,c<j&&(j=c),c>k&&(k=c)}if(k-j>W.MIN_DYNAMIC_RANGE)for(e++,f+=d;e<W.BLOCK_SIZE;e++,f+=d)for(let b=0;b<W.BLOCK_SIZE;b++)i+=255&a[f+b]}let l=i>>2*W.BLOCK_SIZE_POWER;if(k-j<=W.MIN_DYNAMIC_RANGE&&(l=j/2,e>0&&f>0)){let a=(h[e-1][f]+2*h[e][f-1]+h[e-1][f-1])/4;j<a&&(l=a)}h[e][f]=l}}return h}}W.BLOCK_SIZE_POWER=3,W.BLOCK_SIZE=1<<W.BLOCK_SIZE_POWER,W.BLOCK_SIZE_MASK=W.BLOCK_SIZE-1,W.MINIMUM_DIMENSION=5*W.BLOCK_SIZE,W.MIN_DYNAMIC_RANGE=24;class X{constructor(a,b){this.width=a,this.height=b}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(a,b,c,d){throw new P("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new P("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new P("This luminance source does not support rotation by 45 degrees.")}toString(){let a=new Uint8ClampedArray(this.width),b=new S;for(let c=0;c<this.height;c++){let d=this.getRow(c,a);for(let a=0;a<this.width;a++){let c,e=255&d[a];c=e<64?"#":e<128?"+":e<192?".":" ",b.append(c)}b.append("\n")}return b.toString()}}class Y extends X{constructor(a){super(a.getWidth(),a.getHeight()),this.delegate=a}getRow(a,b){let c=this.delegate.getRow(a,b),d=this.getWidth();for(let a=0;a<d;a++)c[a]=255-(255&c[a]);return c}getMatrix(){let a=this.delegate.getMatrix(),b=this.getWidth()*this.getHeight(),c=new Uint8ClampedArray(b);for(let d=0;d<b;d++)c[d]=255-(255&a[d]);return c}isCropSupported(){return this.delegate.isCropSupported()}crop(a,b,c,d){return new Y(this.delegate.crop(a,b,c,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Y(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Y(this.delegate.rotateCounterClockwise45())}}class Z extends X{constructor(a){super(a.width,a.height),this.canvas=a,this.tempCanvasElement=null,this.buffer=Z.makeBufferFromCanvasImageData(a)}static makeBufferFromCanvasImageData(a){let b=a.getContext("2d").getImageData(0,0,a.width,a.height);return Z.toGrayscaleBuffer(b.data,a.width,a.height)}static toGrayscaleBuffer(a,b,c){let d=new Uint8ClampedArray(b*c);for(let b=0,c=0,e=a.length;b<e;b+=4,c++){let e;if(0===a[b+3])e=255;else{let c=a[b];e=306*c+601*a[b+1]+117*a[b+2]+512>>10}d[c]=e}return d}getRow(a,b){if(a<0||a>=this.getHeight())throw new C("Requested row is outside the image: "+a);let c=this.getWidth(),d=a*c;return null===b?b=this.buffer.slice(d,d+c):(b.length<c&&(b=new Uint8ClampedArray(c)),b.set(this.buffer.slice(d,d+c))),b}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(a,b,c,d){return super.crop(a,b,c,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){let a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement}rotate(a){let b=this.getTempCanvasElement(),c=b.getContext("2d"),d=a*Z.DEGREE_TO_RADIANS,e=this.canvas.width,f=this.canvas.height,g=Math.ceil(Math.abs(Math.cos(d))*e+Math.abs(Math.sin(d))*f),h=Math.ceil(Math.abs(Math.sin(d))*e+Math.abs(Math.cos(d))*f);return b.width=g,b.height=h,c.translate(g/2,h/2),c.rotate(d),c.drawImage(this.canvas,-(e/2),-(f/2)),this.buffer=Z.makeBufferFromCanvasImageData(b),this}invert(){return new Y(this)}}Z.DEGREE_TO_RADIANS=Math.PI/180;class ${constructor(a,b,c){this.deviceId=a,this.label=b,this.kind="videoinput",this.groupId=c||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var _=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};class aa{constructor(a,b=500,c){this.reader=a,this.timeBetweenScansMillis=b,this._hints=c,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!=typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(a){this._timeBetweenDecodingAttempts=a<0?0:a}set hints(a){this._hints=a||null}get hints(){return this._hints}listVideoInputDevices(){return _(this,void 0,void 0,function*(){if(!this.hasNavigator)throw Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw Error("Can't enumerate devices, method not supported.");let a=yield navigator.mediaDevices.enumerateDevices(),b=[];for(let c of a){let a="video"===c.kind?"videoinput":c.kind;if("videoinput"!==a)continue;let d=c.deviceId||c.id,e={deviceId:d,label:c.label||`Video device ${b.length+1}`,kind:a,groupId:c.groupId};b.push(e)}return b})}getVideoInputDevices(){return _(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new $(a.deviceId,a.label))})}findDeviceById(a){return _(this,void 0,void 0,function*(){let b=yield this.listVideoInputDevices();return b?b.find(b=>b.deviceId===a):null})}decodeFromInputVideoDevice(a,b){return _(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(a,b)})}decodeOnceFromVideoDevice(a,b){return _(this,void 0,void 0,function*(){return this.reset(),yield this.decodeOnceFromConstraints({video:a?{deviceId:{exact:a}}:{facingMode:"environment"}},b)})}decodeOnceFromConstraints(a,b){return _(this,void 0,void 0,function*(){let c=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeOnceFromStream(c,b)})}decodeOnceFromStream(a,b){return _(this,void 0,void 0,function*(){this.reset();let c=yield this.attachStreamToVideo(a,b);return yield this.decodeOnce(c)})}decodeFromInputVideoDeviceContinuously(a,b,c){return _(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(a,b,c)})}decodeFromVideoDevice(a,b,c){return _(this,void 0,void 0,function*(){return yield this.decodeFromConstraints({video:a?{deviceId:{exact:a}}:{facingMode:"environment"}},b,c)})}decodeFromConstraints(a,b,c){return _(this,void 0,void 0,function*(){let d=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeFromStream(d,b,c)})}decodeFromStream(a,b,c){return _(this,void 0,void 0,function*(){this.reset();let d=yield this.attachStreamToVideo(a,b);return yield this.decodeContinuously(d,c)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(a,b){return _(this,void 0,void 0,function*(){let c=this.prepareVideoElement(b);return this.addVideoSource(c,a),this.videoElement=c,this.stream=a,yield this.playVideoOnLoadAsync(c),c})}playVideoOnLoadAsync(a){return new Promise((b,c)=>this.playVideoOnLoad(a,()=>b()))}playVideoOnLoad(a,b){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(a),a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",b),this.tryPlayVideo(a)}isVideoPlaying(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2}tryPlayVideo(a){return _(this,void 0,void 0,function*(){if(this.isVideoPlaying(a))return void console.warn("Trying to play video that is already playing.");try{yield a.play()}catch(a){console.warn("It was not possible to play the video.")}})}getMediaElement(a,b){let c=document.getElementById(a);if(!c)throw new B(`element with id '${a}' not found`);if(c.nodeName.toLowerCase()!==b.toLowerCase())throw new B(`element with id '${a}' must be an ${b} element`);return c}decodeFromImage(a,b){if(!a&&!b)throw new B("either imageElement with a src set or an url must be provided");return b&&!a?this.decodeFromImageUrl(b):this.decodeFromImageElement(a)}decodeFromVideo(a,b){if(!a&&!b)throw new B("Either an element with a src set or an URL must be provided");return b&&!a?this.decodeFromVideoUrl(b):this.decodeFromVideoElement(a)}decodeFromVideoContinuously(a,b,c){if(void 0===a&&void 0===b)throw new B("Either an element with a src set or an URL must be provided");return b&&!a?this.decodeFromVideoUrlContinuously(b,c):this.decodeFromVideoElementContinuously(a,c)}decodeFromImageElement(a){if(!a)throw new B("An image element must be provided.");this.reset();let b=this.prepareImageElement(a);return this.imageElement=b,this.isImageLoaded(b)?this.decodeOnce(b,!1,!0):this._decodeOnLoadImage(b)}decodeFromVideoElement(a){let b=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(b)}decodeFromVideoElementContinuously(a,b){let c=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(c,b)}_decodeFromVideoElementSetup(a){if(!a)throw new B("A video element must be provided.");this.reset();let b=this.prepareVideoElement(a);return this.videoElement=b,b}decodeFromImageUrl(a){if(!a)throw new B("An URL must be provided.");this.reset();let b=this.prepareImageElement();this.imageElement=b;let c=this._decodeOnLoadImage(b);return b.src=a,c}decodeFromVideoUrl(a){if(!a)throw new B("An URL must be provided.");this.reset();let b=this.prepareVideoElement(),c=this.decodeFromVideoElement(b);return b.src=a,c}decodeFromVideoUrlContinuously(a,b){if(!a)throw new B("An URL must be provided.");this.reset();let c=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(c,b);return c.src=a,d}_decodeOnLoadImage(a){return new Promise((b,c)=>{this.imageLoadedListener=()=>this.decodeOnce(a,!1,!0).then(b,c),a.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(a){return _(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(a),yield this.decodeOnce(a)})}_decodeOnLoadVideoContinuously(a,b){return _(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(a),this.decodeContinuously(a,b)})}isImageLoaded(a){return!!a.complete&&0!==a.naturalWidth}prepareImageElement(a){let b;return void 0===a&&((b=document.createElement("img")).width=200,b.height=200),"string"==typeof a&&(b=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(b=a),b}prepareVideoElement(a){let b;return a||"undefined"==typeof document||((b=document.createElement("video")).width=200,b.height=200),"string"==typeof a&&(b=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(b=a),b.setAttribute("autoplay","true"),b.setAttribute("muted","true"),b.setAttribute("playsinline","true"),b}decodeOnce(a,b=!0,c=!0){this._stopAsyncDecode=!1;let d=(e,f)=>{if(this._stopAsyncDecode){f(new U("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let b=this.decode(a);e(b)}catch(h){let a=b&&h instanceof U,g=h instanceof E||h instanceof N;if(a||g&&c)return setTimeout(d,this._timeBetweenDecodingAttempts,e,f);f(h)}};return new Promise((a,b)=>d(a,b))}decodeContinuously(a,b){this._stopContinuousDecode=!1;let c=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let d=this.decode(a);b(d,null),setTimeout(c,this.timeBetweenScansMillis)}catch(e){b(null,e);let a=e instanceof E||e instanceof N,d=e instanceof U;(a||d)&&setTimeout(c,this._timeBetweenDecodingAttempts)}};c()}decode(a){let b=this.createBinaryBitmap(a);return this.decodeBitmap(b)}_isHTMLVideoElement(a){return 0!==a.videoWidth}drawFrameOnCanvas(a,b,c){b||(b={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),c||(c=this.captureCanvasContext),c.drawImage(a,b.sx,b.sy,b.sWidth,b.sHeight,b.dx,b.dy,b.dWidth,b.dHeight)}drawImageOnCanvas(a,b,c=this.captureCanvasContext){b||(b={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),c||(c=this.captureCanvasContext),c.drawImage(a,b.sx,b.sy,b.sWidth,b.sHeight,b.dx,b.dy,b.dWidth,b.dHeight)}createBinaryBitmap(a){return this.getCaptureCanvasContext(a),this._isHTMLVideoElement(a)?this.drawFrameOnCanvas(a):this.drawImageOnCanvas(a),new D(new W(new Z(this.getCaptureCanvas(a))))}getCaptureCanvasContext(a){if(!this.captureCanvasContext){let b=this.getCaptureCanvas(a).getContext("2d");this.captureCanvasContext=b}return this.captureCanvasContext}getCaptureCanvas(a){if(!this.captureCanvas){let b=this.createCaptureCanvas(a);this.captureCanvas=b}return this.captureCanvas}decodeBitmap(a){return this.reader.decode(a,this._hints)}createCaptureCanvas(a){let b,c;if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;let d=document.createElement("canvas");return void 0!==a&&(a instanceof HTMLVideoElement?(b=a.videoWidth,c=a.videoHeight):a instanceof HTMLImageElement&&(b=a.naturalWidth||a.width,c=a.naturalHeight||a.height)),d.style.width=b+"px",d.style.height=c+"px",d.width=b,d.height=c,d}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(a=>a.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(a,b){try{a.srcObject=b}catch(c){a.src=URL.createObjectURL(b)}}cleanVideoSource(a){try{a.srcObject=null}catch(b){a.src=""}this.videoElement.removeAttribute("src")}}class ab{constructor(a,b,c=null==b?0:8*b.length,d,e,f=G.currentTimeMillis()){this.text=a,this.rawBytes=b,this.numBits=c,this.resultPoints=d,this.format=e,this.timestamp=f,this.text=a,this.rawBytes=b,null==c?this.numBits=null==b?0:8*b.length:this.numBits=c,this.resultPoints=d,this.format=e,this.resultMetadata=null,null==f?this.timestamp=G.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(a,b){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(a,b)}putAllMetadata(a){null!==a&&(null===this.resultMetadata?this.resultMetadata=a:this.resultMetadata=new Map(a))}addResultPoints(a){let b=this.resultPoints;if(null===b)this.resultPoints=a;else if(null!==a&&a.length>0){let c=Array(b.length+a.length);G.arraycopy(b,0,c,0,b.length),G.arraycopy(a,0,c,b.length,a.length),this.resultPoints=c}}getTimestamp(){return this.timestamp}toString(){return this.text}}(e=p||(p={}))[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION";var ac=p;(f=q||(q={}))[f.OTHER=0]="OTHER",f[f.ORIENTATION=1]="ORIENTATION",f[f.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",f[f.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",f[f.ISSUE_NUMBER=4]="ISSUE_NUMBER",f[f.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",f[f.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",f[f.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",f[f.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",f[f.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",f[f.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY";var ad=q;class ae{constructor(a,b,c,d,e=-1,f=-1){this.rawBytes=a,this.text=b,this.byteSegments=c,this.ecLevel=d,this.structuredAppendSequenceNumber=e,this.structuredAppendParity=f,this.numBits=null==a?0:8*a.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(a){this.numBits=a}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(a){this.errorsCorrected=a}getErasures(){return this.erasures}setErasures(a){this.erasures=a}getOther(){return this.other}setOther(a){this.other=a}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class af{exp(a){return this.expTable[a]}log(a){if(0===a)throw new C;return this.logTable[a]}static addOrSubtract(a,b){return a^b}}class ag{constructor(a,b){if(0===b.length)throw new C;this.field=a;let c=b.length;if(c>1&&0===b[0]){let a=1;for(;a<c&&0===b[a];)a++;a===c?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(c-a),G.arraycopy(b,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=b}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){let b;if(0===a)return this.getCoefficient(0);let c=this.coefficients;if(1===a){b=0;for(let a=0,d=c.length;a!==d;a++){let d=c[a];b=af.addOrSubtract(b,d)}return b}b=c[0];let d=c.length,e=this.field;for(let f=1;f<d;f++)b=af.addOrSubtract(e.multiply(a,b),c[f]);return b}addOrSubtract(a){if(!this.field.equals(a.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero())return a;if(a.isZero())return this;let b=this.coefficients,c=a.coefficients;if(b.length>c.length){let a=b;b=c,c=a}let d=new Int32Array(c.length),e=c.length-b.length;G.arraycopy(c,0,d,0,e);for(let a=e;a<c.length;a++)d[a]=af.addOrSubtract(b[a-e],c[a]);return new ag(this.field,d)}multiply(a){if(!this.field.equals(a.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero()||a.isZero())return this.field.getZero();let b=this.coefficients,c=b.length,d=a.coefficients,e=d.length,f=new Int32Array(c+e-1),g=this.field;for(let a=0;a<c;a++){let c=b[a];for(let b=0;b<e;b++)f[a+b]=af.addOrSubtract(f[a+b],g.multiply(c,d[b]))}return new ag(g,f)}multiplyScalar(a){if(0===a)return this.field.getZero();if(1===a)return this;let b=this.coefficients.length,c=this.field,d=new Int32Array(b),e=this.coefficients;for(let f=0;f<b;f++)d[f]=c.multiply(e[f],a);return new ag(c,d)}multiplyByMonomial(a,b){if(a<0)throw new C;if(0===b)return this.field.getZero();let c=this.coefficients,d=c.length,e=new Int32Array(d+a),f=this.field;for(let a=0;a<d;a++)e[a]=f.multiply(c[a],b);return new ag(f,e)}divide(a){if(!this.field.equals(a.field))throw new C("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new C("Divide by 0");let b=this.field,c=b.getZero(),d=this,e=a.getCoefficient(a.getDegree()),f=b.inverse(e);for(;d.getDegree()>=a.getDegree()&&!d.isZero();){let e=d.getDegree()-a.getDegree(),g=b.multiply(d.getCoefficient(d.getDegree()),f),h=a.multiplyByMonomial(e,g),i=b.buildMonomial(e,g);c=c.addOrSubtract(i),d=d.addOrSubtract(h)}return[c,d]}toString(){let a="";for(let b=this.getDegree();b>=0;b--){let c=this.getCoefficient(b);if(0!==c){if(c<0?(a+=" - ",c=-c):a.length>0&&(a+=" + "),0===b||1!==c){let b=this.field.log(c);0===b?a+="1":1===b?a+="a":(a+="a^",a+=b)}0!==b&&(1===b?a+="x":(a+="x^",a+=b))}}return a}}class ah extends A{}ah.kind="ArithmeticException";class ai extends af{constructor(a,b,c){super(),this.primitive=a,this.size=b,this.generatorBase=c;let d=new Int32Array(b),e=1;for(let c=0;c<b;c++)d[c]=e,(e*=2)>=b&&(e^=a,e&=b-1);this.expTable=d;let f=new Int32Array(b);for(let a=0;a<b-1;a++)f[d[a]]=a;this.logTable=f,this.zero=new ag(this,Int32Array.from([0])),this.one=new ag(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,b){if(a<0)throw new C;if(0===b)return this.zero;let c=new Int32Array(a+1);return c[0]=b,new ag(this,c)}inverse(a){if(0===a)throw new ah;return this.expTable[this.size-this.logTable[a]-1]}multiply(a,b){return 0===a||0===b?0:this.expTable[(this.logTable[a]+this.logTable[b])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+K.toHexString(this.primitive)+","+this.size+")"}equals(a){return a===this}}ai.AZTEC_DATA_12=new ai(4201,4096,1),ai.AZTEC_DATA_10=new ai(1033,1024,1),ai.AZTEC_DATA_6=new ai(67,64,1),ai.AZTEC_PARAM=new ai(19,16,1),ai.QR_CODE_FIELD_256=new ai(285,256,0),ai.DATA_MATRIX_FIELD_256=new ai(301,256,1),ai.AZTEC_DATA_8=ai.DATA_MATRIX_FIELD_256,ai.MAXICODE_FIELD_64=ai.AZTEC_DATA_6;class aj extends A{}aj.kind="ReedSolomonException";class ak extends A{}ak.kind="IllegalStateException";class al{constructor(a){this.field=a}decode(a,b){let c=this.field,d=new ag(c,a),e=new Int32Array(b),f=!0;for(let a=0;a<b;a++){let b=d.evaluateAt(c.exp(a+c.getGeneratorBase()));e[e.length-1-a]=b,0!==b&&(f=!1)}if(f)return;let g=new ag(c,e),h=this.runEuclideanAlgorithm(c.buildMonomial(b,1),g,b),i=h[0],j=h[1],k=this.findErrorLocations(i),l=this.findErrorMagnitudes(j,k);for(let b=0;b<k.length;b++){let d=a.length-1-c.log(k[b]);if(d<0)throw new aj("Bad error location");a[d]=ai.addOrSubtract(a[d],l[b])}}runEuclideanAlgorithm(a,b,c){if(a.getDegree()<b.getDegree()){let c=a;a=b,b=c}let d=this.field,e=a,f=b,g=d.getZero(),h=d.getOne();for(;f.getDegree()>=(c/2|0);){let a=e,b=g;if(e=f,g=h,e.isZero())throw new aj("r_{i-1} was zero");f=a;let c=d.getZero(),i=e.getCoefficient(e.getDegree()),j=d.inverse(i);for(;f.getDegree()>=e.getDegree()&&!f.isZero();){let a=f.getDegree()-e.getDegree(),b=d.multiply(f.getCoefficient(f.getDegree()),j);c=c.addOrSubtract(d.buildMonomial(a,b)),f=f.addOrSubtract(e.multiplyByMonomial(a,b))}if(h=c.multiply(g).addOrSubtract(b),f.getDegree()>=e.getDegree())throw new ak("Division algorithm failed to reduce polynomial?")}let i=h.getCoefficient(0);if(0===i)throw new aj("sigmaTilde(0) was zero");let j=d.inverse(i);return[h.multiplyScalar(j),f.multiplyScalar(j)]}findErrorLocations(a){let b=a.getDegree();if(1===b)return Int32Array.from([a.getCoefficient(1)]);let c=new Int32Array(b),d=0,e=this.field;for(let f=1;f<e.getSize()&&d<b;f++)0===a.evaluateAt(f)&&(c[d]=e.inverse(f),d++);if(d!==b)throw new aj("Error locator degree does not match number of roots");return c}findErrorMagnitudes(a,b){let c=b.length,d=new Int32Array(c),e=this.field;for(let f=0;f<c;f++){let g=e.inverse(b[f]),h=1;for(let a=0;a<c;a++)if(f!==a){let c=e.multiply(b[a],g),d=(1&c)==0?1|c:-2&c;h=e.multiply(h,d)}d[f]=e.multiply(a.evaluateAt(g),e.inverse(h)),0!==e.getGeneratorBase()&&(d[f]=e.multiply(d[f],g))}return d}}(g=r||(r={}))[g.UPPER=0]="UPPER",g[g.LOWER=1]="LOWER",g[g.MIXED=2]="MIXED",g[g.DIGIT=3]="DIGIT",g[g.PUNCT=4]="PUNCT",g[g.BINARY=5]="BINARY";class am{decode(a){this.ddata=a;let b=a.getBits(),c=this.extractBits(b),d=this.correctBits(c),e=new ae(am.convertBoolArrayToByteArray(d),am.getEncodedData(d),null,null);return e.setNumBits(d.length),e}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let b=a.length,c=r.UPPER,d=r.UPPER,e="",f=0;for(;f<b;)if(d===r.BINARY){if(b-f<5)break;let g=am.readCode(a,f,5);if(f+=5,0===g){if(b-f<11)break;g=am.readCode(a,f,11)+31,f+=11}for(let c=0;c<g;c++){if(b-f<8){f=b;break}let c=am.readCode(a,f,8);e+=R.castAsNonUtf8Char(c),f+=8}d=c}else{let g=d===r.DIGIT?4:5;if(b-f<g)break;let h=am.readCode(a,f,g);f+=g;let i=am.getCharacter(d,h);i.startsWith("CTRL_")?(c=d,d=am.getTable(i.charAt(5)),"L"===i.charAt(6)&&(c=d)):(e+=i,d=c)}return e}static getTable(a){switch(a){case"L":return r.LOWER;case"P":return r.PUNCT;case"M":return r.MIXED;case"D":return r.DIGIT;case"B":return r.BINARY;default:return r.UPPER}}static getCharacter(a,b){switch(a){case r.UPPER:return am.UPPER_TABLE[b];case r.LOWER:return am.LOWER_TABLE[b];case r.MIXED:return am.MIXED_TABLE[b];case r.PUNCT:return am.PUNCT_TABLE[b];case r.DIGIT:return am.DIGIT_TABLE[b];default:throw new ak("Bad table")}}correctBits(a){let b,c;2>=this.ddata.getNbLayers()?(c=6,b=ai.AZTEC_DATA_6):8>=this.ddata.getNbLayers()?(c=8,b=ai.AZTEC_DATA_8):22>=this.ddata.getNbLayers()?(c=10,b=ai.AZTEC_DATA_10):(c=12,b=ai.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),e=a.length/c;if(e<d)throw new N;let f=a.length%c,g=new Int32Array(e);for(let b=0;b<e;b++,f+=c)g[b]=am.readCode(a,f,c);try{new al(b).decode(g,e-d)}catch(a){throw new N(a)}let h=(1<<c)-1,i=0;for(let a=0;a<d;a++){let b=g[a];if(0===b||b===h)throw new N;(1===b||b===h-1)&&i++}let j=Array(d*c-i),k=0;for(let a=0;a<d;a++){let b=g[a];if(1===b||b===h-1)j.fill(b>1,k,k+c-1),k+=c-1;else for(let a=c-1;a>=0;--a)j[k++]=(b&1<<a)!=0}return j}extractBits(a){let b=this.ddata.isCompact(),c=this.ddata.getNbLayers(),d=(b?11:14)+4*c,e=new Int32Array(d),f=Array(this.totalBitsInLayer(c,b));if(b)for(let a=0;a<e.length;a++)e[a]=a;else{let a=d+1+2*K.truncDivision(K.truncDivision(d,2)-1,15),b=d/2,c=K.truncDivision(a,2);for(let a=0;a<b;a++){let d=a+K.truncDivision(a,15);e[b-a-1]=c-d-1,e[b+a]=c+d+1}}for(let g=0,h=0;g<c;g++){let i=(c-g)*4+(b?9:12),j=2*g,k=d-1-j;for(let b=0;b<i;b++){let c=2*b;for(let d=0;d<2;d++)f[h+c+d]=a.get(e[j+d],e[j+b]),f[h+2*i+c+d]=a.get(e[j+b],e[k-d]),f[h+4*i+c+d]=a.get(e[k-d],e[k-b]),f[h+6*i+c+d]=a.get(e[k-b],e[j+d])}h+=8*i}return f}static readCode(a,b,c){let d=0;for(let e=b;e<b+c;e++)d<<=1,a[e]&&(d|=1);return d}static readByte(a,b){let c=a.length-b;return c>=8?am.readCode(a,b,8):am.readCode(a,b,c)<<8-c}static convertBoolArrayToByteArray(a){let b=new Uint8Array((a.length+7)/8);for(let c=0;c<b.length;c++)b[c]=am.readByte(a,8*c);return b}totalBitsInLayer(a,b){return((b?88:112)+16*a)*a}}am.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],am.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],am.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],am.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],am.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class an{constructor(){}static round(a){return a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0}static distance(a,b,c,d){let e=a-c,f=b-d;return Math.sqrt(e*e+f*f)}static sum(a){let b=0;for(let c=0,d=a.length;c!==d;c++)b+=a[c];return b}}class ao{static floatToIntBits(a){return a}}ao.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ap{constructor(a,b){this.x=a,this.y=b}getX(){return this.x}getY(){return this.y}equals(a){return a instanceof ap&&this.x===a.x&&this.y===a.y}hashCode(){return 31*ao.floatToIntBits(this.x)+ao.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(a){let b,c,d,e=this.distance(a[0],a[1]),f=this.distance(a[1],a[2]),g=this.distance(a[0],a[2]);if(f>=e&&f>=g?(c=a[0],b=a[1],d=a[2]):g>=f&&g>=e?(c=a[1],b=a[0],d=a[2]):(c=a[2],b=a[0],d=a[1]),0>this.crossProductZ(b,c,d)){let a=b;b=d,d=a}a[0]=b,a[1]=c,a[2]=d}static distance(a,b){return an.distance(a.x,a.y,b.x,b.y)}static crossProductZ(a,b,c){let d=b.x,e=b.y;return(c.x-d)*(a.y-e)-(c.y-e)*(a.x-d)}}class aq{constructor(a,b){this.bits=a,this.points=b}getBits(){return this.bits}getPoints(){return this.points}}class ar extends aq{constructor(a,b,c,d,e){super(a,b),this.compact=c,this.nbDatablocks=d,this.nbLayers=e}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class as{constructor(a,b,c,d){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),null==b&&(b=as.INIT_SIZE),null==c&&(c=a.getWidth()/2|0),null==d&&(d=a.getHeight()/2|0);let e=b/2|0;if(this.leftInit=c-e,this.rightInit=c+e,this.upInit=d-e,this.downInit=d+e,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new U}detect(){let a=this.leftInit,b=this.rightInit,c=this.upInit,d=this.downInit,e=!1,f=!0,g=!1,h=!1,i=!1,j=!1,k=!1,l=this.width,m=this.height;for(;f;){f=!1;let n=!0;for(;(n||!h)&&b<l;)(n=this.containsBlackPoint(c,d,b,!1))?(b++,f=!0,h=!0):!h&&b++;if(b>=l){e=!0;break}let o=!0;for(;(o||!i)&&d<m;)(o=this.containsBlackPoint(a,b,d,!0))?(d++,f=!0,i=!0):!i&&d++;if(d>=m){e=!0;break}let p=!0;for(;(p||!j)&&a>=0;)(p=this.containsBlackPoint(c,d,a,!1))?(a--,f=!0,j=!0):!j&&a--;if(a<0){e=!0;break}let q=!0;for(;(q||!k)&&c>=0;)(q=this.containsBlackPoint(a,b,c,!0))?(c--,f=!0,k=!0):!k&&c--;if(c<0){e=!0;break}f&&(g=!0)}if(!e&&g){let e=b-a,f=null;for(let b=1;null===f&&b<e;b++)f=this.getBlackPointOnSegment(a,d-b,a+b,d);if(null==f)throw new U;let g=null;for(let b=1;null===g&&b<e;b++)g=this.getBlackPointOnSegment(a,c+b,a+b,c);if(null==g)throw new U;let h=null;for(let a=1;null===h&&a<e;a++)h=this.getBlackPointOnSegment(b,c+a,b-a,c);if(null==h)throw new U;let i=null;for(let a=1;null===i&&a<e;a++)i=this.getBlackPointOnSegment(b,d-a,b-a,d);if(null==i)throw new U;return this.centerEdges(i,f,h,g)}throw new U}getBlackPointOnSegment(a,b,c,d){let e=an.round(an.distance(a,b,c,d)),f=(c-a)/e,g=(d-b)/e,h=this.image;for(let c=0;c<e;c++){let d=an.round(a+c*f),e=an.round(b+c*g);if(h.get(d,e))return new ap(d,e)}return null}centerEdges(a,b,c,d){let e=a.getX(),f=a.getY(),g=b.getX(),h=b.getY(),i=c.getX(),j=c.getY(),k=d.getX(),l=d.getY(),m=as.CORR;return e<this.width/2?[new ap(k-m,l+m),new ap(g+m,h+m),new ap(i-m,j-m),new ap(e+m,f-m)]:[new ap(k+m,l+m),new ap(g+m,h-m),new ap(i-m,j+m),new ap(e-m,f-m)]}containsBlackPoint(a,b,c,d){let e=this.image;if(d){for(let d=a;d<=b;d++)if(e.get(d,c))return!0}else for(let d=a;d<=b;d++)if(e.get(c,d))return!0;return!1}}as.INIT_SIZE=10,as.CORR=1;class at{static checkAndNudgePoints(a,b){let c=a.getWidth(),d=a.getHeight(),e=!0;for(let a=0;a<b.length&&e;a+=2){let f=Math.floor(b[a]),g=Math.floor(b[a+1]);if(f<-1||f>c||g<-1||g>d)throw new U;e=!1,-1===f?(b[a]=0,e=!0):f===c&&(b[a]=c-1,e=!0),-1===g?(b[a+1]=0,e=!0):g===d&&(b[a+1]=d-1,e=!0)}e=!0;for(let a=b.length-2;a>=0&&e;a-=2){let f=Math.floor(b[a]),g=Math.floor(b[a+1]);if(f<-1||f>c||g<-1||g>d)throw new U;e=!1,-1===f?(b[a]=0,e=!0):f===c&&(b[a]=c-1,e=!0),-1===g?(b[a+1]=0,e=!0):g===d&&(b[a+1]=d-1,e=!0)}}}class au{constructor(a,b,c,d,e,f,g,h,i){this.a11=a,this.a21=b,this.a31=c,this.a12=d,this.a22=e,this.a32=f,this.a13=g,this.a23=h,this.a33=i}static quadrilateralToQuadrilateral(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){let q=au.quadrilateralToSquare(a,b,c,d,e,f,g,h);return au.squareToQuadrilateral(i,j,k,l,m,n,o,p).times(q)}transformPoints(a){let b=a.length,c=this.a11,d=this.a12,e=this.a13,f=this.a21,g=this.a22,h=this.a23,i=this.a31,j=this.a32,k=this.a33;for(let l=0;l<b;l+=2){let b=a[l],m=a[l+1],n=e*b+h*m+k;a[l]=(c*b+f*m+i)/n,a[l+1]=(d*b+g*m+j)/n}}transformPointsWithValues(a,b){let c=this.a11,d=this.a12,e=this.a13,f=this.a21,g=this.a22,h=this.a23,i=this.a31,j=this.a32,k=this.a33,l=a.length;for(let m=0;m<l;m++){let l=a[m],n=b[m],o=e*l+h*n+k;a[m]=(c*l+f*n+i)/o,b[m]=(d*l+g*n+j)/o}}static squareToQuadrilateral(a,b,c,d,e,f,g,h){let i=a-c+e-g,j=b-d+f-h;if(0===i&&0===j)return new au(c-a,e-c,a,d-b,f-d,b,0,0,1);{let k=c-e,l=g-e,m=d-f,n=h-f,o=k*n-l*m,p=(i*n-l*j)/o,q=(k*j-i*m)/o;return new au(c-a+p*c,g-a+q*g,a,d-b+p*d,h-b+q*h,b,p,q,1)}}static quadrilateralToSquare(a,b,c,d,e,f,g,h){return au.squareToQuadrilateral(a,b,c,d,e,f,g,h).buildAdjoint()}buildAdjoint(){return new au(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(a){return new au(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}class av extends at{sampleGrid(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){let t=au.quadrilateralToQuadrilateral(d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s);return this.sampleGridWithTransform(a,b,c,t)}sampleGridWithTransform(a,b,c,d){if(b<=0||c<=0)throw new U;let e=new T(b,c),f=new Float32Array(2*b);for(let b=0;b<c;b++){let c=f.length,g=b+.5;for(let a=0;a<c;a+=2)f[a]=a/2+.5,f[a+1]=g;d.transformPoints(f),at.checkAndNudgePoints(a,f);try{for(let d=0;d<c;d+=2)a.get(Math.floor(f[d]),Math.floor(f[d+1]))&&e.set(d/2,b)}catch(a){throw new U}}return e}}class aw{static setGridSampler(a){aw.gridSampler=a}static getInstance(){return aw.gridSampler}}aw.gridSampler=new av;class ax{constructor(a,b){this.x=a,this.y=b}toResultPoint(){return new ap(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ay{constructor(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}detect(){return this.detectMirror(!1)}detectMirror(a){let b=this.getMatrixCenter(),c=this.getBullsEyeCorners(b);if(a){let a=c[0];c[0]=c[2],c[2]=a}return this.extractParameters(c),new ar(this.sampleGrid(this.image,c[this.shift%4],c[(this.shift+1)%4],c[(this.shift+2)%4],c[(this.shift+3)%4]),this.getMatrixCornerPoints(c),this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new U;let b=2*this.nbCenterLayers,c=new Int32Array([this.sampleLine(a[0],a[1],b),this.sampleLine(a[1],a[2],b),this.sampleLine(a[2],a[3],b),this.sampleLine(a[3],a[0],b)]);this.shift=this.getRotation(c,b);let d=0;for(let a=0;a<4;a++){let b=c[(this.shift+a)%4];this.compact?(d<<=7,d+=b>>1&127):(d<<=10,d+=(b>>2&992)+(b>>1&31))}let e=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(e>>6)+1,this.nbDataBlocks=(63&e)+1):(this.nbLayers=(e>>11)+1,this.nbDataBlocks=(2047&e)+1)}getRotation(a,b){let c=0;a.forEach((a,d,e)=>{c=(c<<3)+((a>>b-2<<1)+(1&a))}),c=((1&c)<<11)+(c>>1);for(let a=0;a<4;a++)if(2>=K.bitCount(c^this.EXPECTED_CORNER_BITS[a]))return a;throw new U}getCorrectedParameterData(a,b){let c,d;b?(c=7,d=2):(c=10,d=4);let e=c-d,f=new Int32Array(c);for(let b=c-1;b>=0;--b)f[b]=15&a,a>>=4;try{new al(ai.AZTEC_PARAM).decode(f,e)}catch(a){throw new U}let g=0;for(let a=0;a<d;a++)g=(g<<4)+f[a];return g}getBullsEyeCorners(a){let b=a,c=a,d=a,e=a,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let a=this.getFirstDifferent(b,f,1,-1),g=this.getFirstDifferent(c,f,1,1),h=this.getFirstDifferent(d,f,-1,1),i=this.getFirstDifferent(e,f,-1,-1);if(this.nbCenterLayers>2){let c=this.distancePoint(i,a)*this.nbCenterLayers/(this.distancePoint(e,b)*(this.nbCenterLayers+2));if(c<.75||c>1.25||!this.isWhiteOrBlackRectangle(a,g,h,i))break}b=a,c=g,d=h,e=i,f=!f}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new U;this.compact=5===this.nbCenterLayers;let g=new ap(b.getX()+.5,b.getY()-.5),h=new ap(c.getX()+.5,c.getY()+.5),i=new ap(d.getX()-.5,d.getY()+.5),j=new ap(e.getX()-.5,e.getY()-.5);return this.expandSquare([g,h,i,j],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let a,b,c,d;try{let e=new as(this.image).detect();a=e[0],b=e[1],c=e[2],d=e[3]}catch(g){let e=this.image.getWidth()/2,f=this.image.getHeight()/2;a=this.getFirstDifferent(new ax(e+7,f-7),!1,1,-1).toResultPoint(),b=this.getFirstDifferent(new ax(e+7,f+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new ax(e-7,f+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new ax(e-7,f-7),!1,-1,-1).toResultPoint()}let e=an.round((a.getX()+d.getX()+b.getX()+c.getX())/4),f=an.round((a.getY()+d.getY()+b.getY()+c.getY())/4);try{let g=new as(this.image,15,e,f).detect();a=g[0],b=g[1],c=g[2],d=g[3]}catch(g){a=this.getFirstDifferent(new ax(e+7,f-7),!1,1,-1).toResultPoint(),b=this.getFirstDifferent(new ax(e+7,f+7),!1,1,1).toResultPoint(),c=this.getFirstDifferent(new ax(e-7,f+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new ax(e-7,f-7),!1,-1,-1).toResultPoint()}return new ax(e=an.round((a.getX()+d.getX()+b.getX()+c.getX())/4),f=an.round((a.getY()+d.getY()+b.getY()+c.getY())/4))}getMatrixCornerPoints(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())}sampleGrid(a,b,c,d,e){let f=aw.getInstance(),g=this.getDimension(),h=g/2-this.nbCenterLayers,i=g/2+this.nbCenterLayers;return f.sampleGrid(a,g,g,h,h,i,h,i,i,h,i,b.getX(),b.getY(),c.getX(),c.getY(),d.getX(),d.getY(),e.getX(),e.getY())}sampleLine(a,b,c){let d=0,e=this.distanceResultPoint(a,b),f=e/c,g=a.getX(),h=a.getY(),i=f*(b.getX()-a.getX())/e,j=f*(b.getY()-a.getY())/e;for(let a=0;a<c;a++)this.image.get(an.round(g+a*i),an.round(h+a*j))&&(d|=1<<c-a-1);return d}isWhiteOrBlackRectangle(a,b,c,d){a=new ax(a.getX()-3,a.getY()+3),b=new ax(b.getX()-3,b.getY()-3),c=new ax(c.getX()+3,c.getY()-3),d=new ax(d.getX()+3,d.getY()+3);let e=this.getColor(d,a);if(0===e)return!1;let f=this.getColor(a,b);return f===e&&(f=this.getColor(b,c))===e&&(f=this.getColor(c,d))===e}getColor(a,b){let c=this.distancePoint(a,b),d=(b.getX()-a.getX())/c,e=(b.getY()-a.getY())/c,f=0,g=a.getX(),h=a.getY(),i=this.image.get(a.getX(),a.getY()),j=Math.ceil(c);for(let a=0;a<j;a++)g+=d,h+=e,this.image.get(an.round(g),an.round(h))!==i&&f++;let k=f/c;return k>.1&&k<.9?0:k<=.1===i?1:-1}getFirstDifferent(a,b,c,d){let e=a.getX()+c,f=a.getY()+d;for(;this.isValid(e,f)&&this.image.get(e,f)===b;)e+=c,f+=d;for(e-=c,f-=d;this.isValid(e,f)&&this.image.get(e,f)===b;)e+=c;for(e-=c;this.isValid(e,f)&&this.image.get(e,f)===b;)f+=d;return new ax(e,f-=d)}expandSquare(a,b,c){let d=c/(2*b),e=a[0].getX()-a[2].getX(),f=a[0].getY()-a[2].getY(),g=(a[0].getX()+a[2].getX())/2,h=(a[0].getY()+a[2].getY())/2,i=new ap(g+d*e,h+d*f),j=new ap(g-d*e,h-d*f);return e=a[1].getX()-a[3].getX(),f=a[1].getY()-a[3].getY(),[i,new ap((g=(a[1].getX()+a[3].getX())/2)+d*e,(h=(a[1].getY()+a[3].getY())/2)+d*f),j,new ap(g-d*e,h-d*f)]}isValid(a,b){return a>=0&&a<this.image.getWidth()&&b>0&&b<this.image.getHeight()}isValidPoint(a){let b=an.round(a.getX()),c=an.round(a.getY());return this.isValid(b,c)}distancePoint(a,b){return an.distance(a.getX(),a.getY(),b.getX(),b.getY())}distanceResultPoint(a,b){return an.distance(a.getX(),a.getY(),b.getX(),b.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(K.truncDivision(this.nbLayers-4,8)+1)+15}}class az{decode(a,b=null){let c=null,d=new ay(a.getBlackMatrix()),e=null,f=null;try{let a=d.detectMirror(!1);e=a.getPoints(),this.reportFoundResultPoints(b,e),f=new am().decode(a)}catch(a){c=a}if(null==f)try{let a=d.detectMirror(!0);e=a.getPoints(),this.reportFoundResultPoints(b,e),f=new am().decode(a)}catch(a){if(null!=c)throw c;throw a}let g=new ab(f.getText(),f.getRawBytes(),f.getNumBits(),e,ac.AZTEC,G.currentTimeMillis()),h=f.getByteSegments();null!=h&&g.putMetadata(ad.BYTE_SEGMENTS,h);let i=f.getECLevel();return null!=i&&g.putMetadata(ad.ERROR_CORRECTION_LEVEL,i),g}reportFoundResultPoints(a,b){if(null!=a){let c=a.get(M.NEED_RESULT_POINT_CALLBACK);null!=c&&b.forEach((a,b,d)=>{c.foundPossibleResultPoint(a)})}}reset(){}}class aA extends aa{constructor(a=500){super(new az,a)}}class aB{decode(a,b){try{return this.doDecode(a,b)}catch(c){if(b&&!0===b.get(M.TRY_HARDER)&&a.isRotateSupported()){let c=a.rotateCounterClockwise(),d=this.doDecode(c,b),e=d.getResultMetadata(),f=270;null!==e&&!0===e.get(ad.ORIENTATION)&&(f+=e.get(ad.ORIENTATION)%360),d.putMetadata(ad.ORIENTATION,f);let g=d.getResultPoints();if(null!==g){let a=c.getHeight();for(let b=0;b<g.length;b++)g[b]=new ap(a-g[b].getY()-1,g[b].getX())}return d}throw new U}}reset(){}doDecode(a,b){let c,d=a.getWidth(),e=a.getHeight(),f=new L(d),g=b&&!0===b.get(M.TRY_HARDER),h=Math.max(1,e>>(g?8:5));c=g?e:15;let i=Math.trunc(e/2);for(let g=0;g<c;g++){let c=Math.trunc((g+1)/2),j=i+h*((1&g)==0?c:-c);if(j<0||j>=e)break;try{f=a.getBlackRow(j,f)}catch(a){continue}for(let a=0;a<2;a++){if(1===a&&(f.reverse(),b&&!0===b.get(M.NEED_RESULT_POINT_CALLBACK))){let a=new Map;b.forEach((b,c)=>a.set(c,b)),a.delete(M.NEED_RESULT_POINT_CALLBACK),b=a}try{let c=this.decodeRow(j,f,b);if(1===a){c.putMetadata(ad.ORIENTATION,180);let a=c.getResultPoints();null!==a&&(a[0]=new ap(d-a[0].getX()-1,a[0].getY()),a[1]=new ap(d-a[1].getX()-1,a[1].getY()))}return c}catch(a){}}}throw new U}static recordPattern(a,b,c){let d=c.length;for(let a=0;a<d;a++)c[a]=0;let e=a.getSize();if(b>=e)throw new U;let f=!a.get(b),g=0,h=b;for(;h<e;){if(a.get(h)!==f)c[g]++;else if(++g===d)break;else c[g]=1,f=!f;h++}if(g!==d&&(g!==d-1||h!==e))throw new U}static recordPatternInReverse(a,b,c){let d=c.length,e=a.get(b);for(;b>0&&d>=0;)a.get(--b)!==e&&(d--,e=!e);if(d>=0)throw new U;aB.recordPattern(a,b+1,c)}static patternMatchVariance(a,b,c){let d=a.length,e=0,f=0;for(let c=0;c<d;c++)e+=a[c],f+=b[c];if(e<f)return 1/0;let g=e/f;c*=g;let h=0;for(let e=0;e<d;e++){let d=a[e],f=b[e]*g,i=d>f?d-f:f-d;if(i>c)return 1/0;h+=i}return h/e}}class aC extends aB{static findStartPattern(a){let b=a.getSize(),c=a.getNextSet(0),d=0,e=Int32Array.from([0,0,0,0,0,0]),f=c,g=!1;for(let h=c;h<b;h++)if(a.get(h)!==g)e[d]++;else{if(5===d){let b=aC.MAX_AVG_VARIANCE,c=-1;for(let a=aC.CODE_START_A;a<=aC.CODE_START_C;a++){let d=aB.patternMatchVariance(e,aC.CODE_PATTERNS[a],aC.MAX_INDIVIDUAL_VARIANCE);d<b&&(b=d,c=a)}if(c>=0&&a.isRange(Math.max(0,f-(h-f)/2),f,!1))return Int32Array.from([f,h,c]);f+=e[0]+e[1],(e=e.slice(2,e.length-1))[d-1]=0,e[d]=0,d--}else d++;e[d]=1,g=!g}throw new U}static decodeCode(a,b,c){aB.recordPattern(a,c,b);let d=aC.MAX_AVG_VARIANCE,e=-1;for(let a=0;a<aC.CODE_PATTERNS.length;a++){let c=aC.CODE_PATTERNS[a],f=this.patternMatchVariance(b,c,aC.MAX_INDIVIDUAL_VARIANCE);f<d&&(d=f,e=a)}if(e>=0)return e;throw new U}decodeRow(a,b,c){let d,e=c&&!0===c.get(M.ASSUME_GS1),f=aC.findStartPattern(b),g=f[2],h=0,i=new Uint8Array(20);switch(i[h++]=g,g){case aC.CODE_START_A:d=aC.CODE_CODE_A;break;case aC.CODE_START_B:d=aC.CODE_CODE_B;break;case aC.CODE_START_C:d=aC.CODE_CODE_C;break;default:throw new N}let j=!1,k=!1,l="",m=f[0],n=f[1],o=Int32Array.from([0,0,0,0,0,0]),p=0,q=0,r=g,s=0,t=!0,u=!1,v=!1;for(;!j;){let a=k;switch(k=!1,p=q,q=aC.decodeCode(b,o,n),i[h++]=q,q!==aC.CODE_STOP&&(t=!0),q!==aC.CODE_STOP&&(r+=++s*q),m=n,n+=o.reduce((a,b)=>a+b,0),q){case aC.CODE_START_A:case aC.CODE_START_B:case aC.CODE_START_C:throw new N}switch(d){case aC.CODE_CODE_A:if(q<64)v===u?l+=String.fromCharCode(32+q):l+=String.fromCharCode(32+q+128),v=!1;else if(q<96)v===u?l+=String.fromCharCode(q-64):l+=String.fromCharCode(q+64),v=!1;else switch(q!==aC.CODE_STOP&&(t=!1),q){case aC.CODE_FNC_1:e&&(0===l.length?l+="]C1":l+="\x1d");break;case aC.CODE_FNC_2:case aC.CODE_FNC_3:break;case aC.CODE_FNC_4_A:!u&&v?(u=!0,v=!1):u&&v?(u=!1,v=!1):v=!0;break;case aC.CODE_SHIFT:k=!0,d=aC.CODE_CODE_B;break;case aC.CODE_CODE_B:d=aC.CODE_CODE_B;break;case aC.CODE_CODE_C:d=aC.CODE_CODE_C;break;case aC.CODE_STOP:j=!0}break;case aC.CODE_CODE_B:if(q<96)v===u?l+=String.fromCharCode(32+q):l+=String.fromCharCode(32+q+128),v=!1;else switch(q!==aC.CODE_STOP&&(t=!1),q){case aC.CODE_FNC_1:e&&(0===l.length?l+="]C1":l+="\x1d");break;case aC.CODE_FNC_2:case aC.CODE_FNC_3:break;case aC.CODE_FNC_4_B:!u&&v?(u=!0,v=!1):u&&v?(u=!1,v=!1):v=!0;break;case aC.CODE_SHIFT:k=!0,d=aC.CODE_CODE_A;break;case aC.CODE_CODE_A:d=aC.CODE_CODE_A;break;case aC.CODE_CODE_C:d=aC.CODE_CODE_C;break;case aC.CODE_STOP:j=!0}break;case aC.CODE_CODE_C:if(q<100)q<10&&(l+="0"),l+=q;else switch(q!==aC.CODE_STOP&&(t=!1),q){case aC.CODE_FNC_1:e&&(0===l.length?l+="]C1":l+="\x1d");break;case aC.CODE_CODE_A:d=aC.CODE_CODE_A;break;case aC.CODE_CODE_B:d=aC.CODE_CODE_B;break;case aC.CODE_STOP:j=!0}}a&&(d=d===aC.CODE_CODE_A?aC.CODE_CODE_B:aC.CODE_CODE_A)}let w=n-m;if(n=b.getNextUnset(n),!b.isRange(n,Math.min(b.getSize(),n+(n-m)/2),!1))throw new U;if((r-=s*p)%103!==p)throw new E;let x=l.length;if(0===x)throw new U;x>0&&t&&(l=d===aC.CODE_CODE_C?l.substring(0,x-2):l.substring(0,x-1));let y=(f[1]+f[0])/2,z=m+w/2,A=i.length,B=new Uint8Array(A);for(let a=0;a<A;a++)B[a]=i[a];return new ab(l,B,0,[new ap(y,a),new ap(z,a)],ac.CODE_128,new Date().getTime())}}aC.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],aC.MAX_AVG_VARIANCE=.25,aC.MAX_INDIVIDUAL_VARIANCE=.7,aC.CODE_SHIFT=98,aC.CODE_CODE_C=99,aC.CODE_CODE_B=100,aC.CODE_CODE_A=101,aC.CODE_FNC_1=102,aC.CODE_FNC_2=97,aC.CODE_FNC_3=96,aC.CODE_FNC_4_A=101,aC.CODE_FNC_4_B=100,aC.CODE_START_A=103,aC.CODE_START_B=104,aC.CODE_START_C=105,aC.CODE_STOP=106;class aD extends aB{constructor(a=!1,b=!1){super(),this.usingCheckDigit=a,this.extendedMode=b,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,b,c){let d,e,f,g=this.counters;g.fill(0),this.decodeRowResult="";let h=aD.findAsteriskPattern(b,g),i=b.getNextSet(h[1]),j=b.getSize();do{aD.recordPattern(b,i,g);let a=aD.toNarrowWidePattern(g);if(a<0)throw new U;for(let b of(d=aD.patternToChar(a),this.decodeRowResult+=d,e=i,g))i+=b;i=b.getNextSet(i)}while("*"!==d);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let k=0;for(let a of g)k+=a;let l=i-e-k;if(i!==j&&2*l<k)throw new U;if(this.usingCheckDigit){let a=this.decodeRowResult.length-1,b=0;for(let c=0;c<a;c++)b+=aD.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(c));if(this.decodeRowResult.charAt(a)!==aD.ALPHABET_STRING.charAt(b%43))throw new E;this.decodeRowResult=this.decodeRowResult.substring(0,a)}if(0===this.decodeRowResult.length)throw new U;f=this.extendedMode?aD.decodeExtended(this.decodeRowResult):this.decodeRowResult;let m=(h[1]+h[0])/2,n=e+k/2;return new ab(f,null,0,[new ap(m,a),new ap(n,a)],ac.CODE_39,new Date().getTime())}static findAsteriskPattern(a,b){let c=a.getSize(),d=a.getNextSet(0),e=0,f=d,g=!1,h=b.length;for(let i=d;i<c;i++)if(a.get(i)!==g)b[e]++;else{if(e===h-1){if(this.toNarrowWidePattern(b)===aD.ASTERISK_ENCODING&&a.isRange(Math.max(0,f-Math.floor((i-f)/2)),f,!1))return[f,i];f+=b[0]+b[1],b.copyWithin(0,2,2+e-1),b[e-1]=0,b[e]=0,e--}else e++;b[e]=1,g=!g}throw new U}static toNarrowWidePattern(a){let b,c=a.length,d=0;do{let e=0x7fffffff;for(let b of a)b<e&&b>d&&(e=b);d=e,b=0;let f=0,g=0;for(let e=0;e<c;e++){let h=a[e];h>d&&(g|=1<<c-1-e,b++,f+=h)}if(3===b){for(let e=0;e<c&&b>0;e++){let c=a[e];if(c>d&&(b--,2*c>=f))return -1}return g}}while(b>3);return -1}static patternToChar(a){for(let b=0;b<aD.CHARACTER_ENCODINGS.length;b++)if(aD.CHARACTER_ENCODINGS[b]===a)return aD.ALPHABET_STRING.charAt(b);if(a===aD.ASTERISK_ENCODING)return"*";throw new U}static decodeExtended(a){let b=a.length,c="";for(let d=0;d<b;d++){let b=a.charAt(d);if("+"===b||"$"===b||"%"===b||"/"===b){let e=a.charAt(d+1),f="\0";switch(b){case"+":if(e>="A"&&e<="Z")f=String.fromCharCode(e.charCodeAt(0)+32);else throw new N;break;case"$":if(e>="A"&&e<="Z")f=String.fromCharCode(e.charCodeAt(0)-64);else throw new N;break;case"%":if(e>="A"&&e<="E")f=String.fromCharCode(e.charCodeAt(0)-38);else if(e>="F"&&e<="J")f=String.fromCharCode(e.charCodeAt(0)-11);else if(e>="K"&&e<="O")f=String.fromCharCode(e.charCodeAt(0)+16);else if(e>="P"&&e<="T")f=String.fromCharCode(e.charCodeAt(0)+43);else if("U"===e)f="\0";else if("V"===e)f="@";else if("W"===e)f="`";else if("X"===e||"Y"===e||"Z"===e)f="";else throw new N;break;case"/":if(e>="A"&&e<="O")f=String.fromCharCode(e.charCodeAt(0)-32);else if("Z"===e)f=":";else throw new N}c+=f,d++}else c+=b}return c}}aD.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",aD.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],aD.ASTERISK_ENCODING=148;class aE extends aB{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(a,b,c){let d=this.decodeStart(b),e=this.decodeEnd(b),f=new S;aE.decodeMiddle(b,d[1],e[0],f);let g=f.toString(),h=null;null!=c&&(h=c.get(M.ALLOWED_LENGTHS)),null==h&&(h=aE.DEFAULT_ALLOWED_LENGTHS);let i=g.length,j=!1,k=0;for(let a of h){if(i===a){j=!0;break}a>k&&(k=a)}if(!j&&i>k&&(j=!0),!j)throw new N;return new ab(g,null,0,[new ap(d[1],a),new ap(e[0],a)],ac.ITF,new Date().getTime())}static decodeMiddle(a,b,c,d){let e=new Int32Array(10),f=new Int32Array(5),g=new Int32Array(5);for(e.fill(0),f.fill(0),g.fill(0);b<c;){aB.recordPattern(a,b,e);for(let a=0;a<5;a++){let b=2*a;f[a]=e[b],g[a]=e[b+1]}let c=aE.decodeDigit(f);d.append(c.toString()),c=this.decodeDigit(g),d.append(c.toString()),e.forEach(function(a){b+=a})}}decodeStart(a){let b=aE.skipWhiteSpace(a),c=aE.findGuardPattern(a,b,aE.START_PATTERN);return this.narrowLineWidth=(c[1]-c[0])/4,this.validateQuietZone(a,c[0]),c}validateQuietZone(a,b){let c=10*this.narrowLineWidth;c=c<b?c:b;for(let d=b-1;c>0&&d>=0&&!a.get(d);d--)c--;if(0!==c)throw new U}static skipWhiteSpace(a){let b=a.getSize(),c=a.getNextSet(0);if(c===b)throw new U;return c}decodeEnd(a){a.reverse();try{let b,c=aE.skipWhiteSpace(a);try{b=aE.findGuardPattern(a,c,aE.END_PATTERN_REVERSED[0])}catch(d){d instanceof U&&(b=aE.findGuardPattern(a,c,aE.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,b[0]);let d=b[0];return b[0]=a.getSize()-b[1],b[1]=a.getSize()-d,b}finally{a.reverse()}}static findGuardPattern(a,b,c){let d=c.length,e=new Int32Array(d),f=a.getSize(),g=!1,h=0,i=b;e.fill(0);for(let j=b;j<f;j++)if(a.get(j)!==g)e[h]++;else{if(h===d-1){if(aB.patternMatchVariance(e,c,aE.MAX_INDIVIDUAL_VARIANCE)<aE.MAX_AVG_VARIANCE)return[i,j];i+=e[0]+e[1],G.arraycopy(e,2,e,0,h-1),e[h-1]=0,e[h]=0,h--}else h++;e[h]=1,g=!g}throw new U}static decodeDigit(a){let b=aE.MAX_AVG_VARIANCE,c=-1,d=aE.PATTERNS.length;for(let e=0;e<d;e++){let d=aE.PATTERNS[e],f=aB.patternMatchVariance(a,d,aE.MAX_INDIVIDUAL_VARIANCE);f<b?(b=f,c=e):f===b&&(c=-1)}if(c>=0)return c%10;throw new U}}aE.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],aE.MAX_AVG_VARIANCE=.38,aE.MAX_INDIVIDUAL_VARIANCE=.5,aE.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],aE.START_PATTERN=Int32Array.from([1,1,1,1]),aE.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class aF extends aB{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(a){let b,c=!1,d=0,e=Int32Array.from([0,0,0]);for(;!c;){e=Int32Array.from([0,0,0]);let f=(b=aF.findGuardPattern(a,d,!1,this.START_END_PATTERN,e))[0],g=f-((d=b[1])-f);g>=0&&(c=a.isRange(g,f,!1))}return b}static checkChecksum(a){return aF.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let b=a.length;if(0===b)return!1;let c=parseInt(a.charAt(b-1),10);return aF.getStandardUPCEANChecksum(a.substring(0,b-1))===c}static getStandardUPCEANChecksum(a){let b=a.length,c=0;for(let d=b-1;d>=0;d-=2){let b=a.charAt(d).charCodeAt(0)-48;if(b<0||b>9)throw new N;c+=b}c*=3;for(let d=b-2;d>=0;d-=2){let b=a.charAt(d).charCodeAt(0)-48;if(b<0||b>9)throw new N;c+=b}return(1e3-c)%10}static decodeEnd(a,b){return aF.findGuardPattern(a,b,!1,aF.START_END_PATTERN,new Int32Array(aF.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(a,b,c,d){return this.findGuardPattern(a,b,c,d,new Int32Array(d.length))}static findGuardPattern(a,b,c,d,e){let f=a.getSize();b=c?a.getNextUnset(b):a.getNextSet(b);let g=0,h=b,i=d.length,j=c;for(let c=b;c<f;c++)if(a.get(c)!==j)e[g]++;else{if(g===i-1){if(aB.patternMatchVariance(e,d,aF.MAX_INDIVIDUAL_VARIANCE)<aF.MAX_AVG_VARIANCE)return Int32Array.from([h,c]);h+=e[0]+e[1];let a=e.slice(2,e.length-1);for(let b=0;b<g-1;b++)e[b]=a[b];e[g-1]=0,e[g]=0,g--}else g++;e[g]=1,j=!j}throw new U}static decodeDigit(a,b,c,d){this.recordPattern(a,c,b);let e=this.MAX_AVG_VARIANCE,f=-1,g=d.length;for(let a=0;a<g;a++){let c=d[a],g=aB.patternMatchVariance(b,c,aF.MAX_INDIVIDUAL_VARIANCE);g<e&&(e=g,f=a)}if(f>=0)return f;throw new U}}aF.MAX_AVG_VARIANCE=.48,aF.MAX_INDIVIDUAL_VARIANCE=.7,aF.START_END_PATTERN=Int32Array.from([1,1,1]),aF.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),aF.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),aF.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class aG{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,b,c){let d=this.decodeRowStringBuffer,e=this.decodeMiddle(b,c,d),f=d.toString(),g=aG.parseExtensionString(f),h=new ab(f,null,0,[new ap((c[0]+c[1])/2,a),new ap(e,a)],ac.UPC_EAN_EXTENSION,new Date().getTime());return null!=g&&h.putAllMetadata(g),h}decodeMiddle(a,b,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let e=a.getSize(),f=b[1],g=0;for(let b=0;b<5&&f<e;b++){let e=aF.decodeDigit(a,d,f,aF.L_AND_G_PATTERNS);for(let a of(c+=String.fromCharCode(48+e%10),d))f+=a;e>=10&&(g|=1<<4-b),4!==b&&(f=a.getNextSet(f),f=a.getNextUnset(f))}if(5!==c.length)throw new U;let h=this.determineCheckDigit(g);if(aG.extensionChecksum(c.toString())!==h)throw new U;return f}static extensionChecksum(a){let b=a.length,c=0;for(let d=b-2;d>=0;d-=2)c+=a.charAt(d).charCodeAt(0)-48;c*=3;for(let d=b-1;d>=0;d-=2)c+=a.charAt(d).charCodeAt(0)-48;return(c*=3)%10}determineCheckDigit(a){for(let b=0;b<10;b++)if(a===this.CHECK_DIGIT_ENCODINGS[b])return b;throw new U}static parseExtensionString(a){if(5!==a.length)return null;let b=aG.parseExtension5String(a);return null==b?null:new Map([[ad.SUGGESTED_PRICE,b]])}static parseExtension5String(a){let b;switch(a.charAt(0)){case"0":b="\xa3";break;case"5":b="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}b="";break;default:b=""}let c=parseInt(a.substring(1)),d=(c/100).toString(),e=c%100;return b+d+"."+(e<10?"0"+e:e.toString())}}class aH{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,b,c){let d=this.decodeRowStringBuffer,e=this.decodeMiddle(b,c,d),f=d.toString(),g=aH.parseExtensionString(f),h=new ab(f,null,0,[new ap((c[0]+c[1])/2,a),new ap(e,a)],ac.UPC_EAN_EXTENSION,new Date().getTime());return null!=g&&h.putAllMetadata(g),h}decodeMiddle(a,b,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let e=a.getSize(),f=b[1],g=0;for(let b=0;b<2&&f<e;b++){let e=aF.decodeDigit(a,d,f,aF.L_AND_G_PATTERNS);for(let a of(c+=String.fromCharCode(48+e%10),d))f+=a;e>=10&&(g|=1<<1-b),1!==b&&(f=a.getNextSet(f),f=a.getNextUnset(f))}if(2!==c.length||parseInt(c.toString())%4!==g)throw new U;return f}static parseExtensionString(a){return 2!==a.length?null:new Map([[ad.ISSUE_NUMBER,parseInt(a)]])}}class aI{static decodeRow(a,b,c){let d=aF.findGuardPattern(b,c,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new aG().decodeRow(a,b,d)}catch(c){return new aH().decodeRow(a,b,d)}}}aI.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class aJ extends aF{constructor(){super(),this.decodeRowStringBuffer="",aJ.L_AND_G_PATTERNS=aJ.L_PATTERNS.map(a=>Int32Array.from(a));for(let a=10;a<20;a++){let b=aJ.L_PATTERNS[a-10],c=new Int32Array(b.length);for(let a=0;a<b.length;a++)c[a]=b[b.length-a-1];aJ.L_AND_G_PATTERNS[a]=c}}decodeRow(a,b,c){let d=aJ.findStartGuardPattern(b),e=null==c?null:c.get(M.NEED_RESULT_POINT_CALLBACK);if(null!=e){let b=new ap((d[0]+d[1])/2,a);e.foundPossibleResultPoint(b)}let f=this.decodeMiddle(b,d,this.decodeRowStringBuffer),g=f.rowOffset,h=f.resultString;if(null!=e){let b=new ap(g,a);e.foundPossibleResultPoint(b)}let i=this.decodeEnd(b,g);if(null!=e){let b=new ap((i[0]+i[1])/2,a);e.foundPossibleResultPoint(b)}let j=i[1],k=j+(j-i[0]);if(k>=b.getSize()||!b.isRange(j,k,!1))throw new U;let l=h.toString();if(l.length<8)throw new N;if(!aJ.checkChecksum(l))throw new E;let m=(d[1]+d[0])/2,n=(i[1]+i[0])/2,o=this.getBarcodeFormat(),p=new ab(l,null,0,[new ap(m,a),new ap(n,a)],o,new Date().getTime()),q=0;try{let c=aI.decodeRow(a,b,i[1]);p.putMetadata(ad.UPC_EAN_EXTENSION,c.getText()),p.putAllMetadata(c.getResultMetadata()),p.addResultPoints(c.getResultPoints()),q=c.getText().length}catch(a){}let r=null==c?null:c.get(M.ALLOWED_EAN_EXTENSIONS);if(null!=r){let a=!1;for(let b in r)if(q.toString()===b){a=!0;break}if(!a)throw new U}return p}decodeEnd(a,b){return aJ.findGuardPattern(a,b,!1,aJ.START_END_PATTERN,new Int32Array(aJ.START_END_PATTERN.length).fill(0))}static checkChecksum(a){return aJ.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let b=a.length;if(0===b)return!1;let c=parseInt(a.charAt(b-1),10);return aJ.getStandardUPCEANChecksum(a.substring(0,b-1))===c}static getStandardUPCEANChecksum(a){let b=a.length,c=0;for(let d=b-1;d>=0;d-=2){let b=a.charAt(d).charCodeAt(0)-48;if(b<0||b>9)throw new N;c+=b}c*=3;for(let d=b-2;d>=0;d-=2){let b=a.charAt(d).charCodeAt(0)-48;if(b<0||b>9)throw new N;c+=b}return(1e3-c)%10}}class aK extends aJ{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,b,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let e=a.getSize(),f=b[1],g=0;for(let b=0;b<6&&f<e;b++){let e=aJ.decodeDigit(a,d,f,aJ.L_AND_G_PATTERNS);for(let a of(c+=String.fromCharCode(48+e%10),d))f+=a;e>=10&&(g|=1<<5-b)}c=aK.determineFirstDigit(c,g),f=aJ.findGuardPattern(a,f,!0,aJ.MIDDLE_PATTERN,new Int32Array(aJ.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<6&&f<e;b++){let b=aJ.decodeDigit(a,d,f,aJ.L_PATTERNS);for(let a of(c+=String.fromCharCode(48+b),d))f+=a}return{rowOffset:f,resultString:c}}getBarcodeFormat(){return ac.EAN_13}static determineFirstDigit(a,b){for(let c=0;c<10;c++)if(b===this.FIRST_DIGIT_ENCODINGS[c])return a=String.fromCharCode(48+c)+a;throw new U}}aK.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class aL extends aJ{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,b,c){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let e=a.getSize(),f=b[1];for(let b=0;b<4&&f<e;b++){let b=aJ.decodeDigit(a,d,f,aJ.L_PATTERNS);for(let a of(c+=String.fromCharCode(48+b),d))f+=a}f=aJ.findGuardPattern(a,f,!0,aJ.MIDDLE_PATTERN,new Int32Array(aJ.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<4&&f<e;b++){let b=aJ.decodeDigit(a,d,f,aJ.L_PATTERNS);for(let a of(c+=String.fromCharCode(48+b),d))f+=a}return{rowOffset:f,resultString:c}}getBarcodeFormat(){return ac.EAN_8}}class aM extends aJ{constructor(){super(...arguments),this.ean13Reader=new aK}getBarcodeFormat(){return ac.UPC_A}decode(a,b){return this.maybeReturnResult(this.ean13Reader.decode(a))}decodeRow(a,b,c){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,b,c))}decodeMiddle(a,b,c){return this.ean13Reader.decodeMiddle(a,b,c)}maybeReturnResult(a){let b=a.getText();if("0"===b.charAt(0)){let c=new ab(b.substring(1),null,null,a.getResultPoints(),ac.UPC_A);return null!=a.getResultMetadata()&&c.putAllMetadata(a.getResultMetadata()),c}throw new U}reset(){this.ean13Reader.reset()}}class aN extends aJ{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(a,b,c){let d=this.decodeMiddleCounters.map(a=>a);d[0]=0,d[1]=0,d[2]=0,d[3]=0;let e=a.getSize(),f=b[1],g=0;for(let b=0;b<6&&f<e;b++){let e=aN.decodeDigit(a,d,f,aN.L_AND_G_PATTERNS);for(let a of(c+=String.fromCharCode(48+e%10),d))f+=a;e>=10&&(g|=1<<5-b)}return{rowOffset:f,resultString:aN.determineNumSysAndCheckDigit(c,g)}}decodeEnd(a,b){return aN.findGuardPatternWithoutCounters(a,b,!0,aN.MIDDLE_END_PATTERN)}checkChecksum(a){return aJ.checkChecksum(aN.convertUPCEtoUPCA(a))}static determineNumSysAndCheckDigit(a,b){for(let c=0;c<=1;c++)for(let d=0;d<10;d++)if(b===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[c][d])return String.fromCharCode(48+c)+a+String.fromCharCode(48+d);throw U.getNotFoundInstance()}getBarcodeFormat(){return ac.UPC_E}static convertUPCEtoUPCA(a){let b=a.slice(1,7).split("").map(a=>a.charCodeAt(0)),c=new S;c.append(a.charAt(0));let d=b[5];switch(d){case 0:case 1:case 2:c.appendChars(b,0,2),c.append(d),c.append("0000"),c.appendChars(b,2,3);break;case 3:c.appendChars(b,0,3),c.append("00000"),c.appendChars(b,3,2);break;case 4:c.appendChars(b,0,4),c.append("00000"),c.append(b[4]);break;default:c.appendChars(b,0,5),c.append("0000"),c.append(d)}return a.length>=8&&c.append(a.charAt(7)),c.toString()}}aN.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),aN.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class aO extends aB{constructor(a){super();let b=null==a?null:a.get(M.POSSIBLE_FORMATS),c=[];null==b?(c.push(new aK),c.push(new aM),c.push(new aL),c.push(new aN)):(b.indexOf(ac.EAN_13)>-1&&c.push(new aK),b.indexOf(ac.UPC_A)>-1&&c.push(new aM),b.indexOf(ac.EAN_8)>-1&&c.push(new aL),b.indexOf(ac.UPC_E)>-1&&c.push(new aN)),this.readers=c}decodeRow(a,b,c){for(let d of this.readers)try{let e=d.decodeRow(a,b,c),f=e.getBarcodeFormat()===ac.EAN_13&&"0"===e.getText().charAt(0),g=null==c?null:c.get(M.POSSIBLE_FORMATS),h=null==g||g.includes(ac.UPC_A);if(f&&h){let a=e.getRawBytes(),b=new ab(e.getText().substring(1),a,a?a.length:null,e.getResultPoints(),ac.UPC_A);return b.putAllMetadata(e.getResultMetadata()),b}return e}catch(a){}throw new U}reset(){for(let a of this.readers)a.reset()}}class aP extends aB{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=[,,,,],this.evenRoundingErrors=[,,,,],this.oddCounts=Array(this.dataCharacterCounters.length/2),this.evenCounts=Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,b){for(let c=0;c<b.length;c++)if(aB.patternMatchVariance(a,b[c],aP.MAX_INDIVIDUAL_VARIANCE)<aP.MAX_AVG_VARIANCE)return c;throw new U}static count(a){return an.sum(new Int32Array(a))}static increment(a,b){let c=0,d=b[0];for(let e=1;e<a.length;e++)b[e]>d&&(d=b[e],c=e);a[c]++}static decrement(a,b){let c=0,d=b[0];for(let e=1;e<a.length;e++)b[e]<d&&(d=b[e],c=e);a[c]--}static isFinderPattern(a){let b=a[0]+a[1],c=b+a[2]+a[3],d=b/c;if(d>=aP.MIN_FINDER_PATTERN_RATIO&&d<=aP.MAX_FINDER_PATTERN_RATIO){let b=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;for(let d of a)d>c&&(c=d),d<b&&(b=d);return c<10*b}return!1}}aP.MAX_AVG_VARIANCE=.2,aP.MAX_INDIVIDUAL_VARIANCE=.45,aP.MIN_FINDER_PATTERN_RATIO=9.5/12,aP.MAX_FINDER_PATTERN_RATIO=12.5/14;class aQ{constructor(a,b){this.value=a,this.checksumPortion=b}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(a){return a instanceof aQ&&this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class aR{constructor(a,b,c,d,e){this.value=a,this.startEnd=b,this.value=a,this.startEnd=b,this.resultPoints=[],this.resultPoints.push(new ap(c,e)),this.resultPoints.push(new ap(d,e))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(a){return a instanceof aR&&this.value===a.value}hashCode(){return this.value}}class aS{constructor(){}static getRSSvalue(a,b,c){let d=0;for(let b of a)d+=b;let e=0,f=0,g=a.length;for(let h=0;h<g-1;h++){let i;for(i=1,f|=1<<h;i<a[h];i++,f&=~(1<<h)){let a=aS.combins(d-i-1,g-h-2);if(c&&0===f&&d-i-(g-h-1)>=g-h-1&&(a-=aS.combins(d-i-(g-h),g-h-2)),g-h-1>1){let c=0;for(let a=d-i-(g-h-2);a>b;a--)c+=aS.combins(d-i-a-1,g-h-3);a-=c*(g-1-h)}else d-i>b&&a--;e+=a}d-=i}return e}static combins(a,b){let c,d;a-b>b?(d=b,c=a-b):(d=a-b,c=b);let e=1,f=1;for(let b=a;b>c;b--)e*=b,f<=d&&(e/=f,f++);for(;f<=d;)e/=f,f++;return e}}class aT{static buildBitArray(a){let b=2*a.length-1;null==a[a.length-1].getRightChar()&&(b-=1);let c=new L(12*b),d=0,e=a[0].getRightChar().getValue();for(let a=11;a>=0;--a)(e&1<<a)!=0&&c.set(d),d++;for(let b=1;b<a.length;++b){let e=a[b],f=e.getLeftChar().getValue();for(let a=11;a>=0;--a)(f&1<<a)!=0&&c.set(d),d++;if(null!=e.getRightChar()){let a=e.getRightChar().getValue();for(let b=11;b>=0;--b)(a&1<<b)!=0&&c.set(d),d++}}return c}}class aU{constructor(a,b){b?this.decodedInformation=null:(this.finished=a,this.decodedInformation=b)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class aV{constructor(a){this.newPosition=a}getNewPosition(){return this.newPosition}}class aW extends aV{constructor(a,b){super(a),this.value=b}getValue(){return this.value}isFNC1(){return this.value===aW.FNC1}}aW.FNC1="$";class aX extends aV{constructor(a,b,c){super(a),c?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=b}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class aY extends aV{constructor(a,b,c){if(super(a),b<0||b>10||c<0||c>10)throw new N;this.firstDigit=b,this.secondDigit=c}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===aY.FNC1}isSecondDigitFNC1(){return this.secondDigit===aY.FNC1}isAnyFNC1(){return this.firstDigit===aY.FNC1||this.secondDigit===aY.FNC1}}aY.FNC1=10;class aZ{constructor(){}static parseFieldsInGeneralPurpose(a){if(!a)return null;if(a.length<2)throw new U;let b=a.substring(0,2);for(let c of aZ.TWO_DIGIT_DATA_LENGTH)if(c[0]===b){if(c[1]===aZ.VARIABLE_LENGTH)return aZ.processVariableAI(2,c[2],a);return aZ.processFixedAI(2,c[1],a)}if(a.length<3)throw new U;let c=a.substring(0,3);for(let b of aZ.THREE_DIGIT_DATA_LENGTH)if(b[0]===c){if(b[1]===aZ.VARIABLE_LENGTH)return aZ.processVariableAI(3,b[2],a);return aZ.processFixedAI(3,b[1],a)}for(let b of aZ.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(b[0]===c){if(b[1]===aZ.VARIABLE_LENGTH)return aZ.processVariableAI(4,b[2],a);return aZ.processFixedAI(4,b[1],a)}if(a.length<4)throw new U;let d=a.substring(0,4);for(let b of aZ.FOUR_DIGIT_DATA_LENGTH)if(b[0]===d){if(b[1]===aZ.VARIABLE_LENGTH)return aZ.processVariableAI(4,b[2],a);return aZ.processFixedAI(4,b[1],a)}throw new U}static processFixedAI(a,b,c){if(c.length<a)throw new U;let d=c.substring(0,a);if(c.length<a+b)throw new U;let e=c.substring(a,a+b),f=c.substring(a+b),g="("+d+")"+e,h=aZ.parseFieldsInGeneralPurpose(f);return null==h?g:g+h}static processVariableAI(a,b,c){let d,e=c.substring(0,a);d=c.length<a+b?c.length:a+b;let f=c.substring(a,d),g=c.substring(d),h="("+e+")"+f,i=aZ.parseFieldsInGeneralPurpose(g);return null==i?h:h+i}}aZ.VARIABLE_LENGTH=[],aZ.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",aZ.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",aZ.VARIABLE_LENGTH,20],["22",aZ.VARIABLE_LENGTH,29],["30",aZ.VARIABLE_LENGTH,8],["37",aZ.VARIABLE_LENGTH,8],["90",aZ.VARIABLE_LENGTH,30],["91",aZ.VARIABLE_LENGTH,30],["92",aZ.VARIABLE_LENGTH,30],["93",aZ.VARIABLE_LENGTH,30],["94",aZ.VARIABLE_LENGTH,30],["95",aZ.VARIABLE_LENGTH,30],["96",aZ.VARIABLE_LENGTH,30],["97",aZ.VARIABLE_LENGTH,3],["98",aZ.VARIABLE_LENGTH,30],["99",aZ.VARIABLE_LENGTH,30]],aZ.THREE_DIGIT_DATA_LENGTH=[["240",aZ.VARIABLE_LENGTH,30],["241",aZ.VARIABLE_LENGTH,30],["242",aZ.VARIABLE_LENGTH,6],["250",aZ.VARIABLE_LENGTH,30],["251",aZ.VARIABLE_LENGTH,30],["253",aZ.VARIABLE_LENGTH,17],["254",aZ.VARIABLE_LENGTH,20],["400",aZ.VARIABLE_LENGTH,30],["401",aZ.VARIABLE_LENGTH,30],["402",17],["403",aZ.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",aZ.VARIABLE_LENGTH,20],["421",aZ.VARIABLE_LENGTH,15],["422",3],["423",aZ.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],aZ.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",aZ.VARIABLE_LENGTH,15],["391",aZ.VARIABLE_LENGTH,18],["392",aZ.VARIABLE_LENGTH,15],["393",aZ.VARIABLE_LENGTH,18],["703",aZ.VARIABLE_LENGTH,30]],aZ.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",aZ.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",aZ.VARIABLE_LENGTH,20],["8003",aZ.VARIABLE_LENGTH,30],["8004",aZ.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",aZ.VARIABLE_LENGTH,30],["8008",aZ.VARIABLE_LENGTH,12],["8018",18],["8020",aZ.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",aZ.VARIABLE_LENGTH,70],["8200",aZ.VARIABLE_LENGTH,70]];class a${constructor(a){this.buffer=new S,this.information=a}decodeAllCodes(a,b){let c=b,d=null;for(;;){let b=this.decodeGeneralPurposeField(c,d),e=aZ.parseFieldsInGeneralPurpose(b.getNewString());if(null!=e&&a.append(e),d=b.isRemaining()?""+b.getRemainingValue():null,c===b.getNewPosition())break;c=b.getNewPosition()}return a.toString()}isStillNumeric(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(let b=a;b<a+3;++b)if(this.information.get(b))return!0;return this.information.get(a+3)}decodeNumeric(a){if(a+7>this.information.getSize()){let b=this.extractNumericValueFromBitArray(a,4);return 0===b?new aY(this.information.getSize(),aY.FNC1,aY.FNC1):new aY(this.information.getSize(),b-1,aY.FNC1)}let b=this.extractNumericValueFromBitArray(a,7);return new aY(a+7,(b-8)/11,(b-8)%11)}extractNumericValueFromBitArray(a,b){return a$.extractNumericValueFromBitArray(this.information,a,b)}static extractNumericValueFromBitArray(a,b,c){let d=0;for(let e=0;e<c;++e)a.get(b+e)&&(d|=1<<c-e-1);return d}decodeGeneralPurposeField(a,b){this.buffer.setLengthToZero(),null!=b&&this.buffer.append(b),this.current.setPosition(a);let c=this.parseBlocks();return null!=c&&c.isRemaining()?new aX(this.current.getPosition(),this.buffer.toString(),c.getRemainingValue()):new aX(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let a,b;do{let c=this.current.getPosition();if(a=this.current.isAlpha()?(b=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(b=this.parseIsoIec646Block()).isFinished():(b=this.parseNumericBlock()).isFinished(),c===this.current.getPosition()&&!a)break}while(!a);return b.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1())return new aU(!0,a.isSecondDigitFNC1()?new aX(this.current.getPosition(),this.buffer.toString()):new aX(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()));if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1())return new aU(!0,new aX(this.current.getPosition(),this.buffer.toString()));this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new aU(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1())return new aU(!0,new aX(this.current.getPosition(),this.buffer.toString()));this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new aU(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1())return new aU(!0,new aX(this.current.getPosition(),this.buffer.toString()));this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new aU(!1)}isStillIsoIec646(a){if(a+5>this.information.getSize())return!1;let b=this.extractNumericValueFromBitArray(a,5);if(b>=5&&b<16)return!0;if(a+7>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(a,7);if(c>=64&&c<116)return!0;if(a+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(a,8);return d>=232&&d<253}decodeIsoIec646(a){let b,c=this.extractNumericValueFromBitArray(a,5);if(15===c)return new aW(a+5,aW.FNC1);if(c>=5&&c<15)return new aW(a+5,"0"+(c-5));let d=this.extractNumericValueFromBitArray(a,7);if(d>=64&&d<90)return new aW(a+7,""+(d+1));if(d>=90&&d<116)return new aW(a+7,""+(d+7));switch(this.extractNumericValueFromBitArray(a,8)){case 232:b="!";break;case 233:b='"';break;case 234:b="%";break;case 235:b="&";break;case 236:b="'";break;case 237:b="(";break;case 238:b=")";break;case 239:b="*";break;case 240:b="+";break;case 241:b=",";break;case 242:b="-";break;case 243:b=".";break;case 244:b="/";break;case 245:b=":";break;case 246:b=";";break;case 247:b="<";break;case 248:b="=";break;case 249:b=">";break;case 250:b="?";break;case 251:b="_";break;case 252:b=" ";break;default:throw new N}return new aW(a+8,b)}isStillAlpha(a){if(a+5>this.information.getSize())return!1;let b=this.extractNumericValueFromBitArray(a,5);if(b>=5&&b<16)return!0;if(a+6>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(a,6);return c>=16&&c<63}decodeAlphanumeric(a){let b,c=this.extractNumericValueFromBitArray(a,5);if(15===c)return new aW(a+5,aW.FNC1);if(c>=5&&c<15)return new aW(a+5,"0"+(c-5));let d=this.extractNumericValueFromBitArray(a,6);if(d>=32&&d<58)return new aW(a+6,""+(d+33));switch(d){case 58:b="*";break;case 59:b=",";break;case 60:b="-";break;case 61:b=".";break;case 62:b="/";break;default:throw new ak("Decoding invalid alphanumeric value: "+d)}return new aW(a+6,b)}isAlphaTo646ToAlphaLatch(a){if(a+1>this.information.getSize())return!1;for(let b=0;b<5&&b+a<this.information.getSize();++b)if(2===b){if(!this.information.get(a+2))return!1}else if(this.information.get(a+b))return!1;return!0}isAlphaOr646ToNumericLatch(a){if(a+3>this.information.getSize())return!1;for(let b=a;b<a+3;++b)if(this.information.get(b))return!1;return!0}isNumericToAlphaNumericLatch(a){if(a+1>this.information.getSize())return!1;for(let b=0;b<4&&b+a<this.information.getSize();++b)if(this.information.get(a+b))return!1;return!0}}class a_{constructor(a){this.information=a,this.generalDecoder=new a$(a)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class a0 extends a_{constructor(a){super(a)}encodeCompressedGtin(a,b){a.append("(01)");let c=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,b,c)}encodeCompressedGtinWithoutAI(a,b,c){for(let c=0;c<4;++c){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(b+10*c,10);d/100==0&&a.append("0"),d/10==0&&a.append("0"),a.append(d)}a0.appendCheckDigit(a,c)}static appendCheckDigit(a,b){let c=0;for(let d=0;d<13;d++){let e=a.charAt(d+b).charCodeAt(0)-48;c+=(1&d)==0?3*e:e}10==(c=10-c%10)&&(c=0),a.append(c)}}a0.GTIN_SIZE=40;class a1 extends a0{constructor(a){super(a)}parseInformation(){let a=new S;a.append("(01)");let b=a.length(),c=this.getGeneralDecoder().extractNumericValueFromBitArray(a1.HEADER_SIZE,4);return a.append(c),this.encodeCompressedGtinWithoutAI(a,a1.HEADER_SIZE+4,b),this.getGeneralDecoder().decodeAllCodes(a,a1.HEADER_SIZE+44)}}a1.HEADER_SIZE=4;class a2 extends a_{constructor(a){super(a)}parseInformation(){let a=new S;return this.getGeneralDecoder().decodeAllCodes(a,a2.HEADER_SIZE)}}a2.HEADER_SIZE=5;class a3 extends a0{constructor(a){super(a)}encodeCompressedWeight(a,b,c){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(b,c);this.addWeightCode(a,d);let e=this.checkWeight(d),f=1e5;for(let b=0;b<5;++b)e/f==0&&a.append("0"),f/=10;a.append(e)}}class a4 extends a3{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=a4.HEADER_SIZE+a3.GTIN_SIZE+a4.WEIGHT_SIZE)throw new U;let a=new S;return this.encodeCompressedGtin(a,a4.HEADER_SIZE),this.encodeCompressedWeight(a,a4.HEADER_SIZE+a3.GTIN_SIZE,a4.WEIGHT_SIZE),a.toString()}}a4.HEADER_SIZE=5,a4.WEIGHT_SIZE=15;class a5 extends a4{constructor(a){super(a)}addWeightCode(a,b){a.append("(3103)")}checkWeight(a){return a}}class a6 extends a4{constructor(a){super(a)}addWeightCode(a,b){b<1e4?a.append("(3202)"):a.append("(3203)")}checkWeight(a){return a<1e4?a:a-1e4}}class a7 extends a0{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<a7.HEADER_SIZE+a0.GTIN_SIZE)throw new U;let a=new S;this.encodeCompressedGtin(a,a7.HEADER_SIZE);let b=this.getGeneralDecoder().extractNumericValueFromBitArray(a7.HEADER_SIZE+a0.GTIN_SIZE,a7.LAST_DIGIT_SIZE);a.append("(392"),a.append(b),a.append(")");let c=this.getGeneralDecoder().decodeGeneralPurposeField(a7.HEADER_SIZE+a0.GTIN_SIZE+a7.LAST_DIGIT_SIZE,null);return a.append(c.getNewString()),a.toString()}}a7.HEADER_SIZE=8,a7.LAST_DIGIT_SIZE=2;class a8 extends a0{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<a8.HEADER_SIZE+a0.GTIN_SIZE)throw new U;let a=new S;this.encodeCompressedGtin(a,a8.HEADER_SIZE);let b=this.getGeneralDecoder().extractNumericValueFromBitArray(a8.HEADER_SIZE+a0.GTIN_SIZE,a8.LAST_DIGIT_SIZE);a.append("(393"),a.append(b),a.append(")");let c=this.getGeneralDecoder().extractNumericValueFromBitArray(a8.HEADER_SIZE+a0.GTIN_SIZE+a8.LAST_DIGIT_SIZE,a8.FIRST_THREE_DIGITS_SIZE);c/100==0&&a.append("0"),c/10==0&&a.append("0"),a.append(c);let d=this.getGeneralDecoder().decodeGeneralPurposeField(a8.HEADER_SIZE+a0.GTIN_SIZE+a8.LAST_DIGIT_SIZE+a8.FIRST_THREE_DIGITS_SIZE,null);return a.append(d.getNewString()),a.toString()}}a8.HEADER_SIZE=8,a8.LAST_DIGIT_SIZE=2,a8.FIRST_THREE_DIGITS_SIZE=10;class a9 extends a3{constructor(a,b,c){super(a),this.dateCode=c,this.firstAIdigits=b}parseInformation(){if(this.getInformation().getSize()!=a9.HEADER_SIZE+a9.GTIN_SIZE+a9.WEIGHT_SIZE+a9.DATE_SIZE)throw new U;let a=new S;return this.encodeCompressedGtin(a,a9.HEADER_SIZE),this.encodeCompressedWeight(a,a9.HEADER_SIZE+a9.GTIN_SIZE,a9.WEIGHT_SIZE),this.encodeCompressedDate(a,a9.HEADER_SIZE+a9.GTIN_SIZE+a9.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,b){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(b,a9.DATE_SIZE);if(38400==c)return;a.append("("),a.append(this.dateCode),a.append(")");let d=c%32,e=(c/=32)%12+1,f=c/=12;f/10==0&&a.append("0"),a.append(f),e/10==0&&a.append("0"),a.append(e),d/10==0&&a.append("0"),a.append(d)}addWeightCode(a,b){a.append("("),a.append(this.firstAIdigits),a.append(b/1e5),a.append(")")}checkWeight(a){return a%1e5}}function ba(a){try{if(a.get(1))return new a1(a);if(!a.get(2))return new a2(a);switch(a$.extractNumericValueFromBitArray(a,1,4)){case 4:return new a5(a);case 5:return new a6(a)}switch(a$.extractNumericValueFromBitArray(a,1,5)){case 12:return new a7(a);case 13:return new a8(a)}switch(a$.extractNumericValueFromBitArray(a,1,7)){case 56:return new a9(a,"310","11");case 57:return new a9(a,"320","11");case 58:return new a9(a,"310","13");case 59:return new a9(a,"320","13");case 60:return new a9(a,"310","15");case 61:return new a9(a,"320","15");case 62:return new a9(a,"310","17");case 63:return new a9(a,"320","17")}}catch(b){throw console.log(b),new ak("unknown decoder: "+a)}}a9.HEADER_SIZE=8,a9.WEIGHT_SIZE=20,a9.DATE_SIZE=16;class bb{constructor(a,b,c,d){this.leftchar=a,this.rightchar=b,this.finderpattern=c,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(a,b){return a instanceof bb&&bb.equalsOrNull(a.leftchar,b.leftchar)&&bb.equalsOrNull(a.rightchar,b.rightchar)&&bb.equalsOrNull(a.finderpattern,b.finderpattern)}static equalsOrNull(a,b){return null===a?null===b:bb.equals(a,b)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class bc{constructor(a,b,c){this.pairs=a,this.rowNumber=b,this.wasReversed=c}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(a){return this.checkEqualitity(this,a)}toString(){return"{ "+this.pairs+" }"}equals(a,b){return a instanceof bc&&this.checkEqualitity(a,b)&&a.wasReversed===b.wasReversed}checkEqualitity(a,b){let c;if(a&&b)return a.forEach((a,d)=>{b.forEach(b=>{a.getLeftChar().getValue()===b.getLeftChar().getValue()&&a.getRightChar().getValue()===b.getRightChar().getValue()&&a.getFinderPatter().getValue()===b.getFinderPatter().getValue()&&(c=!0)})}),c}}class bd extends aP{constructor(a){super(...arguments),this.pairs=Array(bd.MAX_PAIRS),this.rows=[],this.startEnd=[2],this.verbose=!0===a}decodeRow(a,b,c){this.pairs.length=0,this.startFromEven=!1;try{return bd.constructResult(this.decodeRow2pairs(a,b))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,bd.constructResult(this.decodeRow2pairs(a,b))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(a,b){let c,d=!1;for(;!d;)try{this.pairs.push(this.retrieveNextPair(b,this.pairs,a))}catch(a){if(a instanceof U){if(!this.pairs.length)throw new U;d=!0}}if(this.checkChecksum())return this.pairs;if(c=!!this.rows.length,this.storeRow(a,!1),c){let a=this.checkRowsBoolean(!1);if(null!=a||null!=(a=this.checkRowsBoolean(!0)))return a}throw new U}checkRowsBoolean(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());let b=null;try{b=this.checkRows([],0)}catch(a){this.verbose&&console.log(a)}return a&&(this.rows=this.rows.reverse()),b}checkRows(a,b){for(let c=b;c<this.rows.length;c++){let b=this.rows[c];for(let b of(this.pairs.length=0,a))this.pairs.push(b.getPairs());if(this.pairs.push(b.getPairs()),!bd.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=Array(a);d.push(b);try{return this.checkRows(d,c+1)}catch(a){this.verbose&&console.log(a)}}throw new U}static isValidSequence(a){for(let b of bd.FINDER_PATTERN_SEQUENCES){if(a.length>b.length)continue;let c=!0;for(let d=0;d<a.length;d++)if(a[d].getFinderPattern().getValue()!=b[d]){c=!1;break}if(c)return!0}return!1}storeRow(a,b){let c=0,d=!1,e=!1;for(;c<this.rows.length;){let b=this.rows[c];if(b.getRowNumber()>a){e=b.isEquivalent(this.pairs);break}d=b.isEquivalent(this.pairs),c++}e||d||bd.isPartialRow(this.pairs,this.rows)||(this.rows.push(c,new bc(this.pairs,a,b)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(a,b){for(let c of b)if(c.getPairs().length!==a.length){for(let b of c.getPairs())for(let c of a)if(bb.equals(b,c))break}}static isPartialRow(a,b){for(let c of b){let b=!0;for(let d of a){let a=!1;for(let b of c.getPairs())if(d.equals(b)){a=!0;break}if(!a){b=!1;break}}if(b)return!0}return!1}getRows(){return this.rows}static constructResult(a){let b=ba(aT.buildBitArray(a)).parseInformation(),c=a[0].getFinderPattern().getResultPoints(),d=a[a.length-1].getFinderPattern().getResultPoints();return new ab(b,null,null,[c[0],c[1],d[0],d[1]],ac.RSS_EXPANDED,null)}checkChecksum(){let a=this.pairs.get(0),b=a.getLeftChar(),c=a.getRightChar();if(null==c)return!1;let d=c.getChecksumPortion(),e=2;for(let a=1;a<this.pairs.size();++a){let b=this.pairs.get(a);d+=b.getLeftChar().getChecksumPortion(),e++;let c=b.getRightChar();null!=c&&(d+=c.getChecksumPortion(),e++)}return 211*(e-4)+(d%=211)==b.getValue()}static getNextSecondBar(a,b){let c;return a.get(b)?(c=a.getNextUnset(b),c=a.getNextSet(c)):(c=a.getNextSet(b),c=a.getNextUnset(c)),c}retrieveNextPair(a,b,c){let d,e,f=b.length%2==0;this.startFromEven&&(f=!f);let g=!0,h=-1;do this.findNextPair(a,b,h),null==(d=this.parseFoundFinderPattern(a,c,f))?h=bd.getNextSecondBar(a,this.startEnd[0]):g=!1;while(g);let i=this.decodeDataCharacter(a,d,f,!0);if(!this.isEmptyPair(b)&&b[b.length-1].mustBeLast())throw new U;try{e=this.decodeDataCharacter(a,d,f,!1)}catch(a){e=null,this.verbose&&console.log(a)}return new bb(i,e,d,!0)}isEmptyPair(a){return 0===a.length}findNextPair(a,b,c){let d,e=this.getDecodeFinderCounters();e[0]=0,e[1]=0,e[2]=0,e[3]=0;let f=a.getSize();d=c>=0?c:this.isEmptyPair(b)?0:b[b.length-1].getFinderPattern().getStartEnd()[1];let g=b.length%2!=0;this.startFromEven&&(g=!g);let h=!1;for(;d<f&&(h=!a.get(d));)d++;let i=0,j=d;for(let b=d;b<f;b++)if(a.get(b)!=h)e[i]++;else{if(3==i){if(g&&bd.reverseCounters(e),bd.isFinderPattern(e)){this.startEnd[0]=j,this.startEnd[1]=b;return}g&&bd.reverseCounters(e),j+=e[0]+e[1],e[0]=e[2],e[1]=e[3],e[2]=0,e[3]=0,i--}else i++;e[i]=1,h=!h}throw new U}static reverseCounters(a){let b=a.length;for(let c=0;c<b/2;++c){let d=a[c];a[c]=a[b-c-1],a[b-c-1]=d}}parseFoundFinderPattern(a,b,c){let d,e,f,g;if(c){let b=this.startEnd[0]-1;for(;b>=0&&!a.get(b);)b--;b++,d=this.startEnd[0]-b,e=b,f=this.startEnd[1]}else e=this.startEnd[0],d=(f=a.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];let h=this.getDecodeFinderCounters();G.arraycopy(h,0,h,1,h.length-1),h[0]=d;try{g=this.parseFinderValue(h,bd.FINDER_PATTERNS)}catch(a){return null}return new aR(g,[e,f],e,f,b)}decodeDataCharacter(a,b,c,d){let e=this.getDataCharacterCounters();for(let a=0;a<e.length;a++)e[a]=0;if(d)bd.recordPatternInReverse(a,b.getStartEnd()[0],e);else{bd.recordPattern(a,b.getStartEnd()[1],e);for(let a=0,b=e.length-1;a<b;a++,b--){let c=e[a];e[a]=e[b],e[b]=c}}let f=an.sum(new Int32Array(e))/17,g=(b.getStartEnd()[1]-b.getStartEnd()[0])/15;if(Math.abs(f-g)/g>.3)throw new U;let h=this.getOddCounts(),i=this.getEvenCounts(),j=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let a=0;a<e.length;a++){let b=e[a]/f,c=b+.5;if(c<1){if(b<.3)throw new U;c=1}else if(c>8){if(b>8.7)throw new U;c=8}let d=a/2;(1&a)==0?(h[d]=c,j[d]=b-c):(i[d]=c,k[d]=b-c)}this.adjustOddEvenCounts(17);let l=4*b.getValue()+2*!c+ +!d-1,m=0,n=0;for(let a=h.length-1;a>=0;a--){if(bd.isNotA1left(b,c,d)){let b=bd.WEIGHTS[l][2*a];n+=h[a]*b}m+=h[a]}let o=0;for(let a=i.length-1;a>=0;a--)if(bd.isNotA1left(b,c,d)){let b=bd.WEIGHTS[l][2*a+1];o+=i[a]*b}let p=n+o;if((1&m)!=0||m>13||m<4)throw new U;let q=(13-m)/2,r=bd.SYMBOL_WIDEST[q],s=aS.getRSSvalue(h,r,!0),t=aS.getRSSvalue(i,9-r,!1);return new aQ(s*bd.EVEN_TOTAL_SUBSET[q]+t+bd.GSUM[q],p)}static isNotA1left(a,b,c){return!(0==a.getValue()&&b&&c)}adjustOddEvenCounts(a){let b=an.sum(new Int32Array(this.getOddCounts())),c=an.sum(new Int32Array(this.getEvenCounts())),d=!1,e=!1;b>13?e=!0:b<4&&(d=!0);let f=!1,g=!1;c>13?g=!0:c<4&&(f=!0);let h=b+c-a,i=(1&b)==1,j=(1&c)==0;if(1==h)if(i){if(j)throw new U;e=!0}else{if(!j)throw new U;g=!0}else if(-1==h)if(i){if(j)throw new U;d=!0}else{if(!j)throw new U;f=!0}else if(0==h){if(i){if(!j)throw new U;b<c?(d=!0,g=!0):(e=!0,f=!0)}else if(j)throw new U}else throw new U;if(d){if(e)throw new U;bd.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(e&&bd.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(g)throw new U;bd.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&bd.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}bd.SYMBOL_WIDEST=[7,5,4,3,1],bd.EVEN_TOTAL_SUBSET=[4,20,52,104,204],bd.GSUM=[0,348,1388,2948,3988],bd.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],bd.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],bd.FINDER_PAT_A=0,bd.FINDER_PAT_B=1,bd.FINDER_PAT_C=2,bd.FINDER_PAT_D=3,bd.FINDER_PAT_E=4,bd.FINDER_PAT_F=5,bd.FINDER_PATTERN_SEQUENCES=[[bd.FINDER_PAT_A,bd.FINDER_PAT_A],[bd.FINDER_PAT_A,bd.FINDER_PAT_B,bd.FINDER_PAT_B],[bd.FINDER_PAT_A,bd.FINDER_PAT_C,bd.FINDER_PAT_B,bd.FINDER_PAT_D],[bd.FINDER_PAT_A,bd.FINDER_PAT_E,bd.FINDER_PAT_B,bd.FINDER_PAT_D,bd.FINDER_PAT_C],[bd.FINDER_PAT_A,bd.FINDER_PAT_E,bd.FINDER_PAT_B,bd.FINDER_PAT_D,bd.FINDER_PAT_D,bd.FINDER_PAT_F],[bd.FINDER_PAT_A,bd.FINDER_PAT_E,bd.FINDER_PAT_B,bd.FINDER_PAT_D,bd.FINDER_PAT_E,bd.FINDER_PAT_F,bd.FINDER_PAT_F],[bd.FINDER_PAT_A,bd.FINDER_PAT_A,bd.FINDER_PAT_B,bd.FINDER_PAT_B,bd.FINDER_PAT_C,bd.FINDER_PAT_C,bd.FINDER_PAT_D,bd.FINDER_PAT_D],[bd.FINDER_PAT_A,bd.FINDER_PAT_A,bd.FINDER_PAT_B,bd.FINDER_PAT_B,bd.FINDER_PAT_C,bd.FINDER_PAT_C,bd.FINDER_PAT_D,bd.FINDER_PAT_E,bd.FINDER_PAT_E],[bd.FINDER_PAT_A,bd.FINDER_PAT_A,bd.FINDER_PAT_B,bd.FINDER_PAT_B,bd.FINDER_PAT_C,bd.FINDER_PAT_C,bd.FINDER_PAT_D,bd.FINDER_PAT_E,bd.FINDER_PAT_F,bd.FINDER_PAT_F],[bd.FINDER_PAT_A,bd.FINDER_PAT_A,bd.FINDER_PAT_B,bd.FINDER_PAT_B,bd.FINDER_PAT_C,bd.FINDER_PAT_D,bd.FINDER_PAT_D,bd.FINDER_PAT_E,bd.FINDER_PAT_E,bd.FINDER_PAT_F,bd.FINDER_PAT_F]],bd.MAX_PAIRS=11;class be extends aQ{constructor(a,b,c){super(a,b),this.count=0,this.finderPattern=c}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class bf extends aP{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(a,b,c){let d=this.decodePair(b,!1,a,c);bf.addOrTally(this.possibleLeftPairs,d),b.reverse();let e=this.decodePair(b,!0,a,c);for(let a of(bf.addOrTally(this.possibleRightPairs,e),b.reverse(),this.possibleLeftPairs))if(a.getCount()>1){for(let b of this.possibleRightPairs)if(b.getCount()>1&&bf.checkChecksum(a,b))return bf.constructResult(a,b)}throw new U}static addOrTally(a,b){if(null==b)return;let c=!1;for(let d of a)if(d.getValue()===b.getValue()){d.incrementCount(),c=!0;break}c||a.push(b)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(a,b){let c=new String(4537077*a.getValue()+b.getValue()).toString(),d=new S;for(let a=13-c.length;a>0;a--)d.append("0");d.append(c);let e=0;for(let a=0;a<13;a++){let b=d.charAt(a).charCodeAt(0)-48;e+=(1&a)==0?3*b:b}10==(e=10-e%10)&&(e=0),d.append(e.toString());let f=a.getFinderPattern().getResultPoints(),g=b.getFinderPattern().getResultPoints();return new ab(d.toString(),null,0,[f[0],f[1],g[0],g[1]],ac.RSS_14,new Date().getTime())}static checkChecksum(a,b){let c=(a.getChecksumPortion()+16*b.getChecksumPortion())%79,d=9*a.getFinderPattern().getValue()+b.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,c===d}decodePair(a,b,c,d){try{let e=this.findFinderPattern(a,b),f=this.parseFoundFinderPattern(a,c,b,e),g=null==d?null:d.get(M.NEED_RESULT_POINT_CALLBACK);if(null!=g){let d=(e[0]+e[1])/2;b&&(d=a.getSize()-1-d),g.foundPossibleResultPoint(new ap(d,c))}let h=this.decodeDataCharacter(a,f,!0),i=this.decodeDataCharacter(a,f,!1);return new be(1597*h.getValue()+i.getValue(),h.getChecksumPortion()+4*i.getChecksumPortion(),f)}catch(a){return null}}decodeDataCharacter(a,b,c){let d=this.getDataCharacterCounters();for(let a=0;a<d.length;a++)d[a]=0;if(c)aB.recordPatternInReverse(a,b.getStartEnd()[0],d);else{aB.recordPattern(a,b.getStartEnd()[1]+1,d);for(let a=0,b=d.length-1;a<b;a++,b--){let c=d[a];d[a]=d[b],d[b]=c}}let e=c?16:15,f=an.sum(new Int32Array(d))/e,g=this.getOddCounts(),h=this.getEvenCounts(),i=this.getOddRoundingErrors(),j=this.getEvenRoundingErrors();for(let a=0;a<d.length;a++){let b=d[a]/f,c=Math.floor(b+.5);c<1?c=1:c>8&&(c=8);let e=Math.floor(a/2);(1&a)==0?(g[e]=c,i[e]=b-c):(h[e]=c,j[e]=b-c)}this.adjustOddEvenCounts(c,e);let k=0,l=0;for(let a=g.length-1;a>=0;a--)l*=9,l+=g[a],k+=g[a];let m=0,n=0;for(let a=h.length-1;a>=0;a--)m*=9,m+=h[a],n+=h[a];let o=l+3*m;if(c){if((1&k)!=0||k>12||k<4)throw new U;let a=(12-k)/2,b=bf.OUTSIDE_ODD_WIDEST[a],c=aS.getRSSvalue(g,b,!1),d=aS.getRSSvalue(h,9-b,!0);return new aQ(c*bf.OUTSIDE_EVEN_TOTAL_SUBSET[a]+d+bf.OUTSIDE_GSUM[a],o)}{if((1&n)!=0||n>10||n<4)throw new U;let a=(10-n)/2,b=bf.INSIDE_ODD_WIDEST[a],c=aS.getRSSvalue(g,b,!0);return new aQ(aS.getRSSvalue(h,9-b,!1)*bf.INSIDE_ODD_TOTAL_SUBSET[a]+c+bf.INSIDE_GSUM[a],o)}}findFinderPattern(a,b){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let d=a.getSize(),e=!1,f=0;for(;f<d&&b!==(e=!a.get(f));)f++;let g=0,h=f;for(let b=f;b<d;b++)if(a.get(b)!==e)c[g]++;else{if(3===g){if(aP.isFinderPattern(c))return[h,b];h+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,g--}else g++;c[g]=1,e=!e}throw new U}parseFoundFinderPattern(a,b,c,d){let e=a.get(d[0]),f=d[0]-1;for(;f>=0&&e!==a.get(f);)f--;f++;let g=d[0]-f,h=this.getDecodeFinderCounters(),i=new Int32Array(h.length);G.arraycopy(h,0,i,1,h.length-1),i[0]=g;let j=this.parseFinderValue(i,bf.FINDER_PATTERNS),k=f,l=d[1];return c&&(k=a.getSize()-1-k,l=a.getSize()-1-l),new aR(j,[f,d[1]],k,l,b)}adjustOddEvenCounts(a,b){let c=an.sum(new Int32Array(this.getOddCounts())),d=an.sum(new Int32Array(this.getEvenCounts())),e=!1,f=!1,g=!1,h=!1;a?(c>12?f=!0:c<4&&(e=!0),d>12?h=!0:d<4&&(g=!0)):(c>11?f=!0:c<5&&(e=!0),d>10?h=!0:d<4&&(g=!0));let i=c+d-b,j=(1&c)==+!!a,k=(1&d)==1;if(1===i)if(j){if(k)throw new U;f=!0}else{if(!k)throw new U;h=!0}else if(-1===i)if(j){if(k)throw new U;e=!0}else{if(!k)throw new U;g=!0}else if(0===i){if(j){if(!k)throw new U;c<d?(e=!0,h=!0):(f=!0,g=!0)}else if(k)throw new U}else throw new U;if(e){if(f)throw new U;aP.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&aP.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(h)throw new U;aP.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&aP.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}bf.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],bf.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],bf.OUTSIDE_GSUM=[0,161,961,2015,2715],bf.INSIDE_GSUM=[0,336,1036,1516],bf.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],bf.INSIDE_ODD_WIDEST=[2,4,6,8],bf.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class bg extends aB{constructor(a,b){super(),this.readers=[],this.verbose=!0===b;let c=a?a.get(M.POSSIBLE_FORMATS):null,d=a&&void 0!==a.get(M.ASSUME_CODE_39_CHECK_DIGIT);c?((c.includes(ac.EAN_13)||c.includes(ac.UPC_A)||c.includes(ac.EAN_8)||c.includes(ac.UPC_E))&&this.readers.push(new aO(a)),c.includes(ac.CODE_39)&&this.readers.push(new aD(d)),c.includes(ac.CODE_128)&&this.readers.push(new aC),c.includes(ac.ITF)&&this.readers.push(new aE),c.includes(ac.RSS_14)&&this.readers.push(new bf),c.includes(ac.RSS_EXPANDED)&&this.readers.push(new bd(this.verbose))):(this.readers.push(new aO(a)),this.readers.push(new aD),this.readers.push(new aO(a)),this.readers.push(new aC),this.readers.push(new aE),this.readers.push(new bf),this.readers.push(new bd(this.verbose)))}decodeRow(a,b,c){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(a,b,c)}catch(a){}throw new U}reset(){this.readers.forEach(a=>a.reset())}}class bh extends aa{constructor(a=500,b){super(new bg(b),a,b)}}class bi{constructor(a,b,c){this.ecCodewords=a,this.ecBlocks=[b],c&&this.ecBlocks.push(c)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class bj{constructor(a,b){this.count=a,this.dataCodewords=b}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class bk{constructor(a,b,c,d,e,f){this.versionNumber=a,this.symbolSizeRows=b,this.symbolSizeColumns=c,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=e,this.ecBlocks=f;let g=0,h=f.getECCodewords();for(let a of f.getECBlocks())g+=a.getCount()*(a.getDataCodewords()+h);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(a,b){if((1&a)!=0||(1&b)!=0)throw new N;for(let c of bk.VERSIONS)if(c.symbolSizeRows===a&&c.symbolSizeColumns===b)return c;throw new N}toString(){return""+this.versionNumber}static buildVersions(){return[new bk(1,10,10,8,8,new bi(5,new bj(1,3))),new bk(2,12,12,10,10,new bi(7,new bj(1,5))),new bk(3,14,14,12,12,new bi(10,new bj(1,8))),new bk(4,16,16,14,14,new bi(12,new bj(1,12))),new bk(5,18,18,16,16,new bi(14,new bj(1,18))),new bk(6,20,20,18,18,new bi(18,new bj(1,22))),new bk(7,22,22,20,20,new bi(20,new bj(1,30))),new bk(8,24,24,22,22,new bi(24,new bj(1,36))),new bk(9,26,26,24,24,new bi(28,new bj(1,44))),new bk(10,32,32,14,14,new bi(36,new bj(1,62))),new bk(11,36,36,16,16,new bi(42,new bj(1,86))),new bk(12,40,40,18,18,new bi(48,new bj(1,114))),new bk(13,44,44,20,20,new bi(56,new bj(1,144))),new bk(14,48,48,22,22,new bi(68,new bj(1,174))),new bk(15,52,52,24,24,new bi(42,new bj(2,102))),new bk(16,64,64,14,14,new bi(56,new bj(2,140))),new bk(17,72,72,16,16,new bi(36,new bj(4,92))),new bk(18,80,80,18,18,new bi(48,new bj(4,114))),new bk(19,88,88,20,20,new bi(56,new bj(4,144))),new bk(20,96,96,22,22,new bi(68,new bj(4,174))),new bk(21,104,104,24,24,new bi(56,new bj(6,136))),new bk(22,120,120,18,18,new bi(68,new bj(6,175))),new bk(23,132,132,20,20,new bi(62,new bj(8,163))),new bk(24,144,144,22,22,new bi(62,new bj(8,156),new bj(2,155))),new bk(25,8,18,6,16,new bi(7,new bj(1,5))),new bk(26,8,32,6,14,new bi(11,new bj(1,10))),new bk(27,12,26,10,24,new bi(14,new bj(1,16))),new bk(28,12,36,10,16,new bi(18,new bj(1,22))),new bk(29,16,36,14,16,new bi(24,new bj(1,32))),new bk(30,16,48,14,22,new bi(28,new bj(1,49)))]}}bk.VERSIONS=bk.buildVersions();class bl{constructor(a){let b=a.getHeight();if(b<8||b>144||(1&b)!=0)throw new N;this.version=bl.readVersion(a),this.mappingBitMatrix=this.extractDataRegion(a),this.readMappingMatrix=new T(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(a){let b=a.getHeight(),c=a.getWidth();return bk.getVersionForDimensions(b,c)}readCodewords(){let a=new Int8Array(this.version.getTotalCodewords()),b=0,c=4,d=0,e=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth(),g=!1,h=!1,i=!1,j=!1;do if(c!==e||0!==d||g)if(c!==e-2||0!==d||(3&f)==0||h)if(c!==e+4||2!==d||(7&f)!=0||i)if(c!==e-2||0!==d||(7&f)!=4||j){do c<e&&d>=0&&!this.readMappingMatrix.get(d,c)&&(a[b++]=255&this.readUtah(c,d,e,f)),c-=2,d+=2;while(c>=0&&d<f);c+=1,d+=3;do c>=0&&d<f&&!this.readMappingMatrix.get(d,c)&&(a[b++]=255&this.readUtah(c,d,e,f)),c+=2,d-=2;while(c<e&&d>=0);c+=3,d+=1}else a[b++]=255&this.readCorner4(e,f),c-=2,d+=2,j=!0;else a[b++]=255&this.readCorner3(e,f),c-=2,d+=2,i=!0;else a[b++]=255&this.readCorner2(e,f),c-=2,d+=2,h=!0;else a[b++]=255&this.readCorner1(e,f),c-=2,d+=2,g=!0;while(c<e||d<f);if(b!==this.version.getTotalCodewords())throw new N;return a}readModule(a,b,c,d){return a<0&&(a+=c,b+=4-(c+4&7)),b<0&&(b+=d,a+=4-(d+4&7)),this.readMappingMatrix.set(b,a),this.mappingBitMatrix.get(b,a)}readUtah(a,b,c,d){let e=0;return this.readModule(a-2,b-2,c,d)&&(e|=1),e<<=1,this.readModule(a-2,b-1,c,d)&&(e|=1),e<<=1,this.readModule(a-1,b-2,c,d)&&(e|=1),e<<=1,this.readModule(a-1,b-1,c,d)&&(e|=1),e<<=1,this.readModule(a-1,b,c,d)&&(e|=1),e<<=1,this.readModule(a,b-2,c,d)&&(e|=1),e<<=1,this.readModule(a,b-1,c,d)&&(e|=1),e<<=1,this.readModule(a,b,c,d)&&(e|=1),e}readCorner1(a,b){let c=0;return this.readModule(a-1,0,a,b)&&(c|=1),c<<=1,this.readModule(a-1,1,a,b)&&(c|=1),c<<=1,this.readModule(a-1,2,a,b)&&(c|=1),c<<=1,this.readModule(0,b-2,a,b)&&(c|=1),c<<=1,this.readModule(0,b-1,a,b)&&(c|=1),c<<=1,this.readModule(1,b-1,a,b)&&(c|=1),c<<=1,this.readModule(2,b-1,a,b)&&(c|=1),c<<=1,this.readModule(3,b-1,a,b)&&(c|=1),c}readCorner2(a,b){let c=0;return this.readModule(a-3,0,a,b)&&(c|=1),c<<=1,this.readModule(a-2,0,a,b)&&(c|=1),c<<=1,this.readModule(a-1,0,a,b)&&(c|=1),c<<=1,this.readModule(0,b-4,a,b)&&(c|=1),c<<=1,this.readModule(0,b-3,a,b)&&(c|=1),c<<=1,this.readModule(0,b-2,a,b)&&(c|=1),c<<=1,this.readModule(0,b-1,a,b)&&(c|=1),c<<=1,this.readModule(1,b-1,a,b)&&(c|=1),c}readCorner3(a,b){let c=0;return this.readModule(a-1,0,a,b)&&(c|=1),c<<=1,this.readModule(a-1,b-1,a,b)&&(c|=1),c<<=1,this.readModule(0,b-3,a,b)&&(c|=1),c<<=1,this.readModule(0,b-2,a,b)&&(c|=1),c<<=1,this.readModule(0,b-1,a,b)&&(c|=1),c<<=1,this.readModule(1,b-3,a,b)&&(c|=1),c<<=1,this.readModule(1,b-2,a,b)&&(c|=1),c<<=1,this.readModule(1,b-1,a,b)&&(c|=1),c}readCorner4(a,b){let c=0;return this.readModule(a-3,0,a,b)&&(c|=1),c<<=1,this.readModule(a-2,0,a,b)&&(c|=1),c<<=1,this.readModule(a-1,0,a,b)&&(c|=1),c<<=1,this.readModule(0,b-2,a,b)&&(c|=1),c<<=1,this.readModule(0,b-1,a,b)&&(c|=1),c<<=1,this.readModule(1,b-1,a,b)&&(c|=1),c<<=1,this.readModule(2,b-1,a,b)&&(c|=1),c<<=1,this.readModule(3,b-1,a,b)&&(c|=1),c}extractDataRegion(a){let b=this.version.getSymbolSizeRows(),c=this.version.getSymbolSizeColumns();if(a.getHeight()!==b)throw new C("Dimension of bitMatrix must match the version size");let d=this.version.getDataRegionSizeRows(),e=this.version.getDataRegionSizeColumns(),f=b/d|0,g=c/e|0,h=new T(g*e,f*d);for(let b=0;b<f;++b){let c=b*d;for(let f=0;f<g;++f){let g=f*e;for(let i=0;i<d;++i){let j=b*(d+2)+1+i,k=c+i;for(let b=0;b<e;++b){let c=f*(e+2)+1+b;if(a.get(c,j)){let a=g+b;h.set(a,k)}}}}}return h}}class bm{constructor(a,b){this.numDataCodewords=a,this.codewords=b}static getDataBlocks(a,b){let c=b.getECBlocks(),d=0,e=c.getECBlocks();for(let a of e)d+=a.getCount();let f=Array(d),g=0;for(let a of e)for(let b=0;b<a.getCount();b++){let b=a.getDataCodewords(),d=c.getECCodewords()+b;f[g++]=new bm(b,new Uint8Array(d))}let h=f[0].codewords.length-c.getECCodewords(),i=h-1,j=0;for(let b=0;b<i;b++)for(let c=0;c<g;c++)f[c].codewords[b]=a[j++];let k=24===b.getVersionNumber(),l=k?8:g;for(let b=0;b<l;b++)f[b].codewords[h-1]=a[j++];let m=f[0].codewords.length;for(let b=h;b<m;b++)for(let c=0;c<g;c++){let d=k?(c+8)%g:c,e=k&&d>7?b-1:b;f[d].codewords[e]=a[j++]}if(j!==a.length)throw new C;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class bn{constructor(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(a){if(a<1||a>32||a>this.available())throw new C(""+a);let b=0,c=this.bitOffset,d=this.byteOffset,e=this.bytes;if(c>0){let f=8-c,g=a<f?a:f,h=f-g;b=(e[d]&255>>8-g<<h)>>h,a-=g,8===(c+=g)&&(c=0,d++)}if(a>0){for(;a>=8;)b=b<<8|255&e[d],d++,a-=8;if(a>0){let f=8-a;b=b<<a|(e[d]&255>>f<<f)>>f,c+=a}}return this.bitOffset=c,this.byteOffset=d,b}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}(h=s||(s={}))[h.PAD_ENCODE=0]="PAD_ENCODE",h[h.ASCII_ENCODE=1]="ASCII_ENCODE",h[h.C40_ENCODE=2]="C40_ENCODE",h[h.TEXT_ENCODE=3]="TEXT_ENCODE",h[h.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",h[h.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",h[h.BASE256_ENCODE=6]="BASE256_ENCODE";class bo{static decode(a){let b=new bn(a),c=new S,d=new S,e=[],f=s.ASCII_ENCODE;do if(f===s.ASCII_ENCODE)f=this.decodeAsciiSegment(b,c,d);else{switch(f){case s.C40_ENCODE:this.decodeC40Segment(b,c);break;case s.TEXT_ENCODE:this.decodeTextSegment(b,c);break;case s.ANSIX12_ENCODE:this.decodeAnsiX12Segment(b,c);break;case s.EDIFACT_ENCODE:this.decodeEdifactSegment(b,c);break;case s.BASE256_ENCODE:this.decodeBase256Segment(b,c,e);break;default:throw new N}f=s.ASCII_ENCODE}while(f!==s.PAD_ENCODE&&b.available()>0);return d.length()>0&&c.append(d.toString()),new ae(a,c.toString(),0===e.length?null:e,null)}static decodeAsciiSegment(a,b,c){let d=!1;do{let e=a.readBits(8);if(0===e)throw new N;if(e<=128){d&&(e+=128),b.append(String.fromCharCode(e-1));break}if(129===e)return s.PAD_ENCODE;else if(e<=229){let a=e-130;a<10&&b.append("0"),b.append(""+a)}else switch(e){case 230:return s.C40_ENCODE;case 231:return s.BASE256_ENCODE;case 232:b.append("\x1d");break;case 233:case 234:case 241:break;case 235:d=!0;break;case 236:b.append("[)>\x1e05\x1d"),c.insert(0,"\x1e\x04");break;case 237:b.append("[)>\x1e06\x1d"),c.insert(0,"\x1e\x04");break;case 238:return s.ANSIX12_ENCODE;case 239:return s.TEXT_ENCODE;case 240:return s.EDIFACT_ENCODE;default:if(254!==e||0!==a.available())throw new N}}while(a.available()>0);return s.ASCII_ENCODE}static decodeC40Segment(a,b){let c=!1,d=[],e=0;do{if(8===a.available())return;let f=a.readBits(8);if(254===f)return;this.parseTwoBytes(f,a.readBits(8),d);for(let a=0;a<3;a++){let f=d[a];switch(e){case 0:if(f<3)e=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){let a=this.C40_BASIC_SET_CHARS[f];c?(b.append(String.fromCharCode(a.charCodeAt(0)+128)),c=!1):b.append(a)}else throw new N;break;case 1:c?(b.append(String.fromCharCode(f+128)),c=!1):b.append(String.fromCharCode(f)),e=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){let a=this.C40_SHIFT2_SET_CHARS[f];c?(b.append(String.fromCharCode(a.charCodeAt(0)+128)),c=!1):b.append(a)}else switch(f){case 27:b.append("\x1d");break;case 30:c=!0;break;default:throw new N}e=0;break;case 3:c?(b.append(String.fromCharCode(f+224)),c=!1):b.append(String.fromCharCode(f+96)),e=0;break;default:throw new N}}}while(a.available()>0)}static decodeTextSegment(a,b){let c=!1,d=[],e=0;do{if(8===a.available())return;let f=a.readBits(8);if(254===f)return;this.parseTwoBytes(f,a.readBits(8),d);for(let a=0;a<3;a++){let f=d[a];switch(e){case 0:if(f<3)e=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){let a=this.TEXT_BASIC_SET_CHARS[f];c?(b.append(String.fromCharCode(a.charCodeAt(0)+128)),c=!1):b.append(a)}else throw new N;break;case 1:c?(b.append(String.fromCharCode(f+128)),c=!1):b.append(String.fromCharCode(f)),e=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){let a=this.TEXT_SHIFT2_SET_CHARS[f];c?(b.append(String.fromCharCode(a.charCodeAt(0)+128)),c=!1):b.append(a)}else switch(f){case 27:b.append("\x1d");break;case 30:c=!0;break;default:throw new N}e=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){let a=this.TEXT_SHIFT3_SET_CHARS[f];c?(b.append(String.fromCharCode(a.charCodeAt(0)+128)),c=!1):b.append(a),e=0}else throw new N;break;default:throw new N}}}while(a.available()>0)}static decodeAnsiX12Segment(a,b){let c=[];do{if(8===a.available())return;let d=a.readBits(8);if(254===d)return;this.parseTwoBytes(d,a.readBits(8),c);for(let a=0;a<3;a++){let d=c[a];switch(d){case 0:b.append("\r");break;case 1:b.append("*");break;case 2:b.append(">");break;case 3:b.append(" ");break;default:if(d<14)b.append(String.fromCharCode(d+44));else if(d<40)b.append(String.fromCharCode(d+51));else throw new N}}}while(a.available()>0)}static parseTwoBytes(a,b,c){let d=(a<<8)+b-1,e=Math.floor(d/1600);c[0]=e,d-=1600*e,e=Math.floor(d/40),c[1]=e,c[2]=d-40*e}static decodeEdifactSegment(a,b){do{if(16>=a.available())return;for(let c=0;c<4;c++){let c=a.readBits(6);if(31===c){let b=8-a.getBitOffset();8!==b&&a.readBits(b);return}(32&c)==0&&(c|=64),b.append(String.fromCharCode(c))}}while(a.available()>0)}static decodeBase256Segment(a,b,c){let d,e=1+a.getByteOffset(),f=this.unrandomize255State(a.readBits(8),e++);if((d=0===f?a.available()/8|0:f<250?f:250*(f-249)+this.unrandomize255State(a.readBits(8),e++))<0)throw new N;let g=new Uint8Array(d);for(let b=0;b<d;b++){if(8>a.available())throw new N;g[b]=this.unrandomize255State(a.readBits(8),e++)}c.push(g);try{b.append(Q.decode(g,R.ISO88591))}catch(a){throw new ak("Platform does not support required encoding: "+a.message)}}static unrandomize255State(a,b){let c=a-(149*b%255+1);return c>=0?c:c+256}}bo.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],bo.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],bo.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],bo.TEXT_SHIFT2_SET_CHARS=bo.C40_SHIFT2_SET_CHARS,bo.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class bp{constructor(){this.rsDecoder=new al(ai.DATA_MATRIX_FIELD_256)}decode(a){let b=new bl(a),c=b.getVersion(),d=b.readCodewords(),e=bm.getDataBlocks(d,c),f=0;for(let a of e)f+=a.getNumDataCodewords();let g=new Uint8Array(f),h=e.length;for(let a=0;a<h;a++){let b=e[a],c=b.getCodewords(),d=b.getNumDataCodewords();this.correctErrors(c,d);for(let b=0;b<d;b++)g[b*h+a]=c[b]}return bo.decode(g)}correctErrors(a,b){let c=new Int32Array(a);try{this.rsDecoder.decode(c,a.length-b)}catch(a){throw new E}for(let d=0;d<b;d++)a[d]=c[d]}}class bq{constructor(a){this.image=a,this.rectangleDetector=new as(this.image)}detect(){let a=this.rectangleDetector.detect(),b=this.detectSolid1(a);if((b=this.detectSolid2(b))[3]=this.correctTopRight(b),!b[3])throw new U;let c=(b=this.shiftToModuleCenter(b))[0],d=b[1],e=b[2],f=b[3],g=this.transitionsBetween(c,f)+1,h=this.transitionsBetween(e,f)+1;return(1&g)==1&&(g+=1),(1&h)==1&&(h+=1),4*g<7*h&&4*h<7*g&&(g=h=Math.max(g,h)),new aq(bq.sampleGrid(this.image,c,d,e,f,g,h),[c,d,e,f])}static shiftPoint(a,b,c){let d=(b.getX()-a.getX())/(c+1),e=(b.getY()-a.getY())/(c+1);return new ap(a.getX()+d,a.getY()+e)}static moveAway(a,b,c){let d=a.getX(),e=a.getY();return d<b?d-=1:d+=1,e<c?e-=1:e+=1,new ap(d,e)}detectSolid1(a){let b=a[0],c=a[1],d=a[3],e=a[2],f=this.transitionsBetween(b,c),g=this.transitionsBetween(c,d),h=this.transitionsBetween(d,e),i=this.transitionsBetween(e,b),j=f,k=[e,b,c,d];return j>g&&(j=g,k[0]=b,k[1]=c,k[2]=d,k[3]=e),j>h&&(j=h,k[0]=c,k[1]=d,k[2]=e,k[3]=b),j>i&&(k[0]=d,k[1]=e,k[2]=b,k[3]=c),k}detectSolid2(a){let b=a[0],c=a[1],d=a[2],e=a[3],f=this.transitionsBetween(b,e),g=bq.shiftPoint(c,d,(f+1)*4),h=bq.shiftPoint(d,c,(f+1)*4);return this.transitionsBetween(g,b)<this.transitionsBetween(h,e)?(a[0]=b,a[1]=c,a[2]=d,a[3]=e):(a[0]=c,a[1]=d,a[2]=e,a[3]=b),a}correctTopRight(a){let b=a[0],c=a[1],d=a[2],e=a[3],f=this.transitionsBetween(b,e),g=this.transitionsBetween(c,e),h=bq.shiftPoint(b,c,(g+1)*4),i=bq.shiftPoint(d,c,(f+1)*4);f=this.transitionsBetween(h,e),g=this.transitionsBetween(i,e);let j=new ap(e.getX()+(d.getX()-c.getX())/(f+1),e.getY()+(d.getY()-c.getY())/(f+1)),k=new ap(e.getX()+(b.getX()-c.getX())/(g+1),e.getY()+(b.getY()-c.getY())/(g+1));return this.isValid(j)?this.isValid(k)?this.transitionsBetween(h,j)+this.transitionsBetween(i,j)>this.transitionsBetween(h,k)+this.transitionsBetween(i,k)?j:k:j:this.isValid(k)?k:null}shiftToModuleCenter(a){let b,c,d=a[0],e=a[1],f=a[2],g=a[3],h=this.transitionsBetween(d,g)+1,i=this.transitionsBetween(f,g)+1,j=bq.shiftPoint(d,e,4*i),k=bq.shiftPoint(f,e,4*h);h=this.transitionsBetween(j,g)+1,i=this.transitionsBetween(k,g)+1,(1&h)==1&&(h+=1),(1&i)==1&&(i+=1);let l=(d.getX()+e.getX()+f.getX()+g.getX())/4,m=(d.getY()+e.getY()+f.getY()+g.getY())/4;return d=bq.moveAway(d,l,m),e=bq.moveAway(e,l,m),f=bq.moveAway(f,l,m),g=bq.moveAway(g,l,m),j=bq.shiftPoint(d,e,4*i),j=bq.shiftPoint(j,g,4*h),b=bq.shiftPoint(e,d,4*i),b=bq.shiftPoint(b,f,4*h),k=bq.shiftPoint(f,g,4*i),k=bq.shiftPoint(k,e,4*h),c=bq.shiftPoint(g,f,4*i),[j,b,k,c=bq.shiftPoint(c,d,4*h)]}isValid(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()}static sampleGrid(a,b,c,d,e,f,g){return aw.getInstance().sampleGrid(a,f,g,.5,.5,f-.5,.5,f-.5,g-.5,.5,g-.5,b.getX(),b.getY(),e.getX(),e.getY(),d.getX(),d.getY(),c.getX(),c.getY())}transitionsBetween(a,b){let c=Math.trunc(a.getX()),d=Math.trunc(a.getY()),e=Math.trunc(b.getX()),f=Math.trunc(b.getY()),g=Math.abs(f-d)>Math.abs(e-c);if(g){let a=c;c=d,d=a,a=e,e=f,f=a}let h=Math.abs(e-c),i=Math.abs(f-d),j=-h/2,k=d<f?1:-1,l=c<e?1:-1,m=0,n=this.image.get(g?d:c,g?c:d);for(let a=c,b=d;a!==e;a+=l){let c=this.image.get(g?b:a,g?a:b);if(c!==n&&(m++,n=c),(j+=i)>0){if(b===f)break;b+=k,j-=h}}return m}}class br{constructor(){this.decoder=new bp}decode(a,b=null){let c,d;if(null!=b&&b.has(M.PURE_BARCODE)){let b=br.extractPureBits(a.getBlackMatrix());c=this.decoder.decode(b),d=br.NO_POINTS}else{let b=new bq(a.getBlackMatrix()).detect();c=this.decoder.decode(b.getBits()),d=b.getPoints()}let e=c.getRawBytes(),f=new ab(c.getText(),e,8*e.length,d,ac.DATA_MATRIX,G.currentTimeMillis()),g=c.getByteSegments();null!=g&&f.putMetadata(ad.BYTE_SEGMENTS,g);let h=c.getECLevel();return null!=h&&f.putMetadata(ad.ERROR_CORRECTION_LEVEL,h),f}reset(){}static extractPureBits(a){let b=a.getTopLeftOnBit(),c=a.getBottomRightOnBit();if(null==b||null==c)throw new U;let d=this.moduleSize(b,a),e=b[1],f=c[1],g=b[0],h=(c[0]-g+1)/d,i=(f-e+1)/d;if(h<=0||i<=0)throw new U;let j=d/2;e+=j,g+=j;let k=new T(h,i);for(let b=0;b<i;b++){let c=e+b*d;for(let e=0;e<h;e++)a.get(g+e*d,c)&&k.set(e,b)}return k}static moduleSize(a,b){let c=b.getWidth(),d=a[0],e=a[1];for(;d<c&&b.get(d,e);)d++;if(d===c)throw new U;let f=d-a[0];if(0===f)throw new U;return f}}br.NO_POINTS=[];class bs extends aa{constructor(a=500){super(new br,a)}}(i=t||(t={}))[i.L=0]="L",i[i.M=1]="M",i[i.Q=2]="Q",i[i.H=3]="H";class bt{constructor(a,b,c){this.value=a,this.stringValue=b,this.bits=c,bt.FOR_BITS.set(c,this),bt.FOR_VALUE.set(a,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(a){switch(a){case"L":return bt.L;case"M":return bt.M;case"Q":return bt.Q;case"H":return bt.H;default:throw new B(a+"not available")}}toString(){return this.stringValue}equals(a){return a instanceof bt&&this.value===a.value}static forBits(a){if(a<0||a>=bt.FOR_BITS.size)throw new C;return bt.FOR_BITS.get(a)}}bt.FOR_BITS=new Map,bt.FOR_VALUE=new Map,bt.L=new bt(t.L,"L",1),bt.M=new bt(t.M,"M",0),bt.Q=new bt(t.Q,"Q",3),bt.H=new bt(t.H,"H",2);class bu{constructor(a){this.errorCorrectionLevel=bt.forBits(a>>3&3),this.dataMask=7&a}static numBitsDiffering(a,b){return K.bitCount(a^b)}static decodeFormatInformation(a,b){let c=bu.doDecodeFormatInformation(a,b);return null!==c?c:bu.doDecodeFormatInformation(a^bu.FORMAT_INFO_MASK_QR,b^bu.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(a,b){let c=Number.MAX_SAFE_INTEGER,d=0;for(let e of bu.FORMAT_INFO_DECODE_LOOKUP){let f=e[0];if(f===a||f===b)return new bu(e[1]);let g=bu.numBitsDiffering(a,f);g<c&&(d=e[1],c=g),a!==b&&(g=bu.numBitsDiffering(b,f))<c&&(d=e[1],c=g)}return c<=3?new bu(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(a){return a instanceof bu&&this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}bu.FORMAT_INFO_MASK_QR=21522,bu.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class bv{constructor(a,...b){this.ecCodewordsPerBlock=a,this.ecBlocks=b}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let a=0;for(let b of this.ecBlocks)a+=b.getCount();return a}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class bw{constructor(a,b){this.count=a,this.dataCodewords=b}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class bx{constructor(a,b,...c){this.versionNumber=a,this.alignmentPatternCenters=b,this.ecBlocks=c;let d=0,e=c[0].getECCodewordsPerBlock();for(let a of c[0].getECBlocks())d+=a.getCount()*(a.getDataCodewords()+e);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(a){return this.ecBlocks[a.getValue()]}static getProvisionalVersionForDimension(a){if(a%4!=1)throw new N;try{return this.getVersionForNumber((a-17)/4)}catch(a){throw new N}}static getVersionForNumber(a){if(a<1||a>40)throw new C;return bx.VERSIONS[a-1]}static decodeVersionInformation(a){let b=Number.MAX_SAFE_INTEGER,c=0;for(let d=0;d<bx.VERSION_DECODE_INFO.length;d++){let e=bx.VERSION_DECODE_INFO[d];if(e===a)return bx.getVersionForNumber(d+7);let f=bu.numBitsDiffering(a,e);f<b&&(c=d+7,b=f)}return b<=3?bx.getVersionForNumber(c):null}buildFunctionPattern(){let a=this.getDimensionForVersion(),b=new T(a);b.setRegion(0,0,9,9),b.setRegion(a-8,0,8,9),b.setRegion(0,a-8,9,8);let c=this.alignmentPatternCenters.length;for(let a=0;a<c;a++){let d=this.alignmentPatternCenters[a]-2;for(let e=0;e<c;e++)(0!==a||0!==e&&e!==c-1)&&(a!==c-1||0!==e)&&b.setRegion(this.alignmentPatternCenters[e]-2,d,5,5)}return b.setRegion(6,9,1,a-17),b.setRegion(9,6,a-17,1),this.versionNumber>6&&(b.setRegion(a-11,0,3,6),b.setRegion(0,a-11,6,3)),b}toString(){return""+this.versionNumber}}bx.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),bx.VERSIONS=[new bx(1,new Int32Array(0),new bv(7,new bw(1,19)),new bv(10,new bw(1,16)),new bv(13,new bw(1,13)),new bv(17,new bw(1,9))),new bx(2,Int32Array.from([6,18]),new bv(10,new bw(1,34)),new bv(16,new bw(1,28)),new bv(22,new bw(1,22)),new bv(28,new bw(1,16))),new bx(3,Int32Array.from([6,22]),new bv(15,new bw(1,55)),new bv(26,new bw(1,44)),new bv(18,new bw(2,17)),new bv(22,new bw(2,13))),new bx(4,Int32Array.from([6,26]),new bv(20,new bw(1,80)),new bv(18,new bw(2,32)),new bv(26,new bw(2,24)),new bv(16,new bw(4,9))),new bx(5,Int32Array.from([6,30]),new bv(26,new bw(1,108)),new bv(24,new bw(2,43)),new bv(18,new bw(2,15),new bw(2,16)),new bv(22,new bw(2,11),new bw(2,12))),new bx(6,Int32Array.from([6,34]),new bv(18,new bw(2,68)),new bv(16,new bw(4,27)),new bv(24,new bw(4,19)),new bv(28,new bw(4,15))),new bx(7,Int32Array.from([6,22,38]),new bv(20,new bw(2,78)),new bv(18,new bw(4,31)),new bv(18,new bw(2,14),new bw(4,15)),new bv(26,new bw(4,13),new bw(1,14))),new bx(8,Int32Array.from([6,24,42]),new bv(24,new bw(2,97)),new bv(22,new bw(2,38),new bw(2,39)),new bv(22,new bw(4,18),new bw(2,19)),new bv(26,new bw(4,14),new bw(2,15))),new bx(9,Int32Array.from([6,26,46]),new bv(30,new bw(2,116)),new bv(22,new bw(3,36),new bw(2,37)),new bv(20,new bw(4,16),new bw(4,17)),new bv(24,new bw(4,12),new bw(4,13))),new bx(10,Int32Array.from([6,28,50]),new bv(18,new bw(2,68),new bw(2,69)),new bv(26,new bw(4,43),new bw(1,44)),new bv(24,new bw(6,19),new bw(2,20)),new bv(28,new bw(6,15),new bw(2,16))),new bx(11,Int32Array.from([6,30,54]),new bv(20,new bw(4,81)),new bv(30,new bw(1,50),new bw(4,51)),new bv(28,new bw(4,22),new bw(4,23)),new bv(24,new bw(3,12),new bw(8,13))),new bx(12,Int32Array.from([6,32,58]),new bv(24,new bw(2,92),new bw(2,93)),new bv(22,new bw(6,36),new bw(2,37)),new bv(26,new bw(4,20),new bw(6,21)),new bv(28,new bw(7,14),new bw(4,15))),new bx(13,Int32Array.from([6,34,62]),new bv(26,new bw(4,107)),new bv(22,new bw(8,37),new bw(1,38)),new bv(24,new bw(8,20),new bw(4,21)),new bv(22,new bw(12,11),new bw(4,12))),new bx(14,Int32Array.from([6,26,46,66]),new bv(30,new bw(3,115),new bw(1,116)),new bv(24,new bw(4,40),new bw(5,41)),new bv(20,new bw(11,16),new bw(5,17)),new bv(24,new bw(11,12),new bw(5,13))),new bx(15,Int32Array.from([6,26,48,70]),new bv(22,new bw(5,87),new bw(1,88)),new bv(24,new bw(5,41),new bw(5,42)),new bv(30,new bw(5,24),new bw(7,25)),new bv(24,new bw(11,12),new bw(7,13))),new bx(16,Int32Array.from([6,26,50,74]),new bv(24,new bw(5,98),new bw(1,99)),new bv(28,new bw(7,45),new bw(3,46)),new bv(24,new bw(15,19),new bw(2,20)),new bv(30,new bw(3,15),new bw(13,16))),new bx(17,Int32Array.from([6,30,54,78]),new bv(28,new bw(1,107),new bw(5,108)),new bv(28,new bw(10,46),new bw(1,47)),new bv(28,new bw(1,22),new bw(15,23)),new bv(28,new bw(2,14),new bw(17,15))),new bx(18,Int32Array.from([6,30,56,82]),new bv(30,new bw(5,120),new bw(1,121)),new bv(26,new bw(9,43),new bw(4,44)),new bv(28,new bw(17,22),new bw(1,23)),new bv(28,new bw(2,14),new bw(19,15))),new bx(19,Int32Array.from([6,30,58,86]),new bv(28,new bw(3,113),new bw(4,114)),new bv(26,new bw(3,44),new bw(11,45)),new bv(26,new bw(17,21),new bw(4,22)),new bv(26,new bw(9,13),new bw(16,14))),new bx(20,Int32Array.from([6,34,62,90]),new bv(28,new bw(3,107),new bw(5,108)),new bv(26,new bw(3,41),new bw(13,42)),new bv(30,new bw(15,24),new bw(5,25)),new bv(28,new bw(15,15),new bw(10,16))),new bx(21,Int32Array.from([6,28,50,72,94]),new bv(28,new bw(4,116),new bw(4,117)),new bv(26,new bw(17,42)),new bv(28,new bw(17,22),new bw(6,23)),new bv(30,new bw(19,16),new bw(6,17))),new bx(22,Int32Array.from([6,26,50,74,98]),new bv(28,new bw(2,111),new bw(7,112)),new bv(28,new bw(17,46)),new bv(30,new bw(7,24),new bw(16,25)),new bv(24,new bw(34,13))),new bx(23,Int32Array.from([6,30,54,78,102]),new bv(30,new bw(4,121),new bw(5,122)),new bv(28,new bw(4,47),new bw(14,48)),new bv(30,new bw(11,24),new bw(14,25)),new bv(30,new bw(16,15),new bw(14,16))),new bx(24,Int32Array.from([6,28,54,80,106]),new bv(30,new bw(6,117),new bw(4,118)),new bv(28,new bw(6,45),new bw(14,46)),new bv(30,new bw(11,24),new bw(16,25)),new bv(30,new bw(30,16),new bw(2,17))),new bx(25,Int32Array.from([6,32,58,84,110]),new bv(26,new bw(8,106),new bw(4,107)),new bv(28,new bw(8,47),new bw(13,48)),new bv(30,new bw(7,24),new bw(22,25)),new bv(30,new bw(22,15),new bw(13,16))),new bx(26,Int32Array.from([6,30,58,86,114]),new bv(28,new bw(10,114),new bw(2,115)),new bv(28,new bw(19,46),new bw(4,47)),new bv(28,new bw(28,22),new bw(6,23)),new bv(30,new bw(33,16),new bw(4,17))),new bx(27,Int32Array.from([6,34,62,90,118]),new bv(30,new bw(8,122),new bw(4,123)),new bv(28,new bw(22,45),new bw(3,46)),new bv(30,new bw(8,23),new bw(26,24)),new bv(30,new bw(12,15),new bw(28,16))),new bx(28,Int32Array.from([6,26,50,74,98,122]),new bv(30,new bw(3,117),new bw(10,118)),new bv(28,new bw(3,45),new bw(23,46)),new bv(30,new bw(4,24),new bw(31,25)),new bv(30,new bw(11,15),new bw(31,16))),new bx(29,Int32Array.from([6,30,54,78,102,126]),new bv(30,new bw(7,116),new bw(7,117)),new bv(28,new bw(21,45),new bw(7,46)),new bv(30,new bw(1,23),new bw(37,24)),new bv(30,new bw(19,15),new bw(26,16))),new bx(30,Int32Array.from([6,26,52,78,104,130]),new bv(30,new bw(5,115),new bw(10,116)),new bv(28,new bw(19,47),new bw(10,48)),new bv(30,new bw(15,24),new bw(25,25)),new bv(30,new bw(23,15),new bw(25,16))),new bx(31,Int32Array.from([6,30,56,82,108,134]),new bv(30,new bw(13,115),new bw(3,116)),new bv(28,new bw(2,46),new bw(29,47)),new bv(30,new bw(42,24),new bw(1,25)),new bv(30,new bw(23,15),new bw(28,16))),new bx(32,Int32Array.from([6,34,60,86,112,138]),new bv(30,new bw(17,115)),new bv(28,new bw(10,46),new bw(23,47)),new bv(30,new bw(10,24),new bw(35,25)),new bv(30,new bw(19,15),new bw(35,16))),new bx(33,Int32Array.from([6,30,58,86,114,142]),new bv(30,new bw(17,115),new bw(1,116)),new bv(28,new bw(14,46),new bw(21,47)),new bv(30,new bw(29,24),new bw(19,25)),new bv(30,new bw(11,15),new bw(46,16))),new bx(34,Int32Array.from([6,34,62,90,118,146]),new bv(30,new bw(13,115),new bw(6,116)),new bv(28,new bw(14,46),new bw(23,47)),new bv(30,new bw(44,24),new bw(7,25)),new bv(30,new bw(59,16),new bw(1,17))),new bx(35,Int32Array.from([6,30,54,78,102,126,150]),new bv(30,new bw(12,121),new bw(7,122)),new bv(28,new bw(12,47),new bw(26,48)),new bv(30,new bw(39,24),new bw(14,25)),new bv(30,new bw(22,15),new bw(41,16))),new bx(36,Int32Array.from([6,24,50,76,102,128,154]),new bv(30,new bw(6,121),new bw(14,122)),new bv(28,new bw(6,47),new bw(34,48)),new bv(30,new bw(46,24),new bw(10,25)),new bv(30,new bw(2,15),new bw(64,16))),new bx(37,Int32Array.from([6,28,54,80,106,132,158]),new bv(30,new bw(17,122),new bw(4,123)),new bv(28,new bw(29,46),new bw(14,47)),new bv(30,new bw(49,24),new bw(10,25)),new bv(30,new bw(24,15),new bw(46,16))),new bx(38,Int32Array.from([6,32,58,84,110,136,162]),new bv(30,new bw(4,122),new bw(18,123)),new bv(28,new bw(13,46),new bw(32,47)),new bv(30,new bw(48,24),new bw(14,25)),new bv(30,new bw(42,15),new bw(32,16))),new bx(39,Int32Array.from([6,26,54,82,110,138,166]),new bv(30,new bw(20,117),new bw(4,118)),new bv(28,new bw(40,47),new bw(7,48)),new bv(30,new bw(43,24),new bw(22,25)),new bv(30,new bw(10,15),new bw(67,16))),new bx(40,Int32Array.from([6,30,58,86,114,142,170]),new bv(30,new bw(19,118),new bw(6,119)),new bv(28,new bw(18,47),new bw(31,48)),new bv(30,new bw(34,24),new bw(34,25)),new bv(30,new bw(20,15),new bw(61,16)))],(j=u||(u={}))[j.DATA_MASK_000=0]="DATA_MASK_000",j[j.DATA_MASK_001=1]="DATA_MASK_001",j[j.DATA_MASK_010=2]="DATA_MASK_010",j[j.DATA_MASK_011=3]="DATA_MASK_011",j[j.DATA_MASK_100=4]="DATA_MASK_100",j[j.DATA_MASK_101=5]="DATA_MASK_101",j[j.DATA_MASK_110=6]="DATA_MASK_110",j[j.DATA_MASK_111=7]="DATA_MASK_111";class by{constructor(a,b){this.value=a,this.isMasked=b}unmaskBitMatrix(a,b){for(let c=0;c<b;c++)for(let d=0;d<b;d++)this.isMasked(c,d)&&a.flip(d,c)}}by.values=new Map([[u.DATA_MASK_000,new by(u.DATA_MASK_000,(a,b)=>(a+b&1)==0)],[u.DATA_MASK_001,new by(u.DATA_MASK_001,(a,b)=>(1&a)==0)],[u.DATA_MASK_010,new by(u.DATA_MASK_010,(a,b)=>b%3==0)],[u.DATA_MASK_011,new by(u.DATA_MASK_011,(a,b)=>(a+b)%3==0)],[u.DATA_MASK_100,new by(u.DATA_MASK_100,(a,b)=>(Math.floor(a/2)+Math.floor(b/3)&1)==0)],[u.DATA_MASK_101,new by(u.DATA_MASK_101,(a,b)=>a*b%6==0)],[u.DATA_MASK_110,new by(u.DATA_MASK_110,(a,b)=>a*b%6<3)],[u.DATA_MASK_111,new by(u.DATA_MASK_111,(a,b)=>(a+b+a*b%3&1)==0)]]);class bz{constructor(a){let b=a.getHeight();if(b<21||(3&b)!=1)throw new N;this.bitMatrix=a}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let a=0;for(let b=0;b<6;b++)a=this.copyBit(b,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(let b=5;b>=0;b--)a=this.copyBit(8,b,a);let b=this.bitMatrix.getHeight(),c=0,d=b-7;for(let a=b-1;a>=d;a--)c=this.copyBit(8,a,c);for(let a=b-8;a<b;a++)c=this.copyBit(a,8,c);if(this.parsedFormatInfo=bu.decodeFormatInformation(a,c),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new N}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;let a=this.bitMatrix.getHeight(),b=Math.floor((a-17)/4);if(b<=6)return bx.getVersionForNumber(b);let c=0,d=a-11;for(let b=5;b>=0;b--)for(let e=a-9;e>=d;e--)c=this.copyBit(e,b,c);let e=bx.decodeVersionInformation(c);if(null!==e&&e.getDimensionForVersion()===a)return this.parsedVersion=e,e;c=0;for(let b=5;b>=0;b--)for(let e=a-9;e>=d;e--)c=this.copyBit(b,e,c);if(null!==(e=bx.decodeVersionInformation(c))&&e.getDimensionForVersion()===a)return this.parsedVersion=e,e;throw new N}copyBit(a,b,c){return(this.isMirror?this.bitMatrix.get(b,a):this.bitMatrix.get(a,b))?c<<1|1:c<<1}readCodewords(){let a=this.readFormatInformation(),b=this.readVersion(),c=by.values.get(a.getDataMask()),d=this.bitMatrix.getHeight();c.unmaskBitMatrix(this.bitMatrix,d);let e=b.buildFunctionPattern(),f=!0,g=new Uint8Array(b.getTotalCodewords()),h=0,i=0,j=0;for(let a=d-1;a>0;a-=2){6===a&&a--;for(let b=0;b<d;b++){let c=f?d-1-b:b;for(let b=0;b<2;b++)e.get(a-b,c)||(j++,i<<=1,this.bitMatrix.get(a-b,c)&&(i|=1),8===j&&(g[h++]=i,j=0,i=0))}f=!f}if(h!==b.getTotalCodewords())throw new N;return g}remask(){if(null===this.parsedFormatInfo)return;let a=by.values[this.parsedFormatInfo.getDataMask()],b=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,b)}setMirror(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a}mirror(){let a=this.bitMatrix;for(let b=0,c=a.getWidth();b<c;b++)for(let c=b+1,d=a.getHeight();c<d;c++)a.get(b,c)!==a.get(c,b)&&(a.flip(c,b),a.flip(b,c))}}class bA{constructor(a,b){this.numDataCodewords=a,this.codewords=b}static getDataBlocks(a,b,c){if(a.length!==b.getTotalCodewords())throw new C;let d=b.getECBlocksForLevel(c),e=0,f=d.getECBlocks();for(let a of f)e+=a.getCount();let g=Array(e),h=0;for(let a of f)for(let b=0;b<a.getCount();b++){let b=a.getDataCodewords(),c=d.getECCodewordsPerBlock()+b;g[h++]=new bA(b,new Uint8Array(c))}let i=g[0].codewords.length,j=g.length-1;for(;j>=0&&g[j].codewords.length!==i;)j--;j++;let k=i-d.getECCodewordsPerBlock(),l=0;for(let b=0;b<k;b++)for(let c=0;c<h;c++)g[c].codewords[b]=a[l++];for(let b=j;b<h;b++)g[b].codewords[k]=a[l++];let m=g[0].codewords.length;for(let b=k;b<m;b++)for(let c=0;c<h;c++){let d=c<j?b:b+1;g[c].codewords[d]=a[l++]}return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}(k=v||(v={}))[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI";class bB{constructor(a,b,c,d){this.value=a,this.stringValue=b,this.characterCountBitsForVersions=c,this.bits=d,bB.FOR_BITS.set(d,this),bB.FOR_VALUE.set(a,this)}static forBits(a){let b=bB.FOR_BITS.get(a);if(void 0===b)throw new C;return b}getCharacterCountBits(a){let b,c=a.getVersionNumber();return b=c<=9?0:c<=26?1:2,this.characterCountBitsForVersions[b]}getValue(){return this.value}getBits(){return this.bits}equals(a){return a instanceof bB&&this.value===a.value}toString(){return this.stringValue}}bB.FOR_BITS=new Map,bB.FOR_VALUE=new Map,bB.TERMINATOR=new bB(v.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),bB.NUMERIC=new bB(v.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),bB.ALPHANUMERIC=new bB(v.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),bB.STRUCTURED_APPEND=new bB(v.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),bB.BYTE=new bB(v.BYTE,"BYTE",Int32Array.from([8,16,16]),4),bB.ECI=new bB(v.ECI,"ECI",Int32Array.from([0,0,0]),7),bB.KANJI=new bB(v.KANJI,"KANJI",Int32Array.from([8,10,12]),8),bB.FNC1_FIRST_POSITION=new bB(v.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),bB.FNC1_SECOND_POSITION=new bB(v.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),bB.HANZI=new bB(v.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class bC{static decode(a,b,c,d){let e=new bn(a),f=new S,g=[],h=-1,i=-1;try{let a,c=null,j=!1;do{if(4>e.available())a=bB.TERMINATOR;else{let b=e.readBits(4);a=bB.forBits(b)}switch(a){case bB.TERMINATOR:break;case bB.FNC1_FIRST_POSITION:case bB.FNC1_SECOND_POSITION:j=!0;break;case bB.STRUCTURED_APPEND:if(16>e.available())throw new N;h=e.readBits(8),i=e.readBits(8);break;case bB.ECI:let k=bC.parseECIValue(e);if(c=O.getCharacterSetECIByValue(k),null===c)throw new N;break;case bB.HANZI:let l=e.readBits(4),m=e.readBits(a.getCharacterCountBits(b));l===bC.GB2312_SUBSET&&bC.decodeHanziSegment(e,f,m);break;default:let n=e.readBits(a.getCharacterCountBits(b));switch(a){case bB.NUMERIC:bC.decodeNumericSegment(e,f,n);break;case bB.ALPHANUMERIC:bC.decodeAlphanumericSegment(e,f,n,j);break;case bB.BYTE:bC.decodeByteSegment(e,f,n,c,g,d);break;case bB.KANJI:bC.decodeKanjiSegment(e,f,n);break;default:throw new N}}}while(a!==bB.TERMINATOR)}catch(a){throw new N}return new ae(a,f.toString(),0===g.length?null:g,null===c?null:c.toString(),h,i)}static decodeHanziSegment(a,b,c){if(13*c>a.available())throw new N;let d=new Uint8Array(2*c),e=0;for(;c>0;){let b=a.readBits(13),f=b/96<<8|b%96;f<959?f+=41377:f+=42657,d[e]=f>>8&255,d[e+1]=255&f,e+=2,c--}try{b.append(Q.decode(d,R.GB2312))}catch(a){throw new N(a)}}static decodeKanjiSegment(a,b,c){if(13*c>a.available())throw new N;let d=new Uint8Array(2*c),e=0;for(;c>0;){let b=a.readBits(13),f=b/192<<8|b%192;f<7936?f+=33088:f+=49472,d[e]=f>>8,d[e+1]=f,e+=2,c--}try{b.append(Q.decode(d,R.SHIFT_JIS))}catch(a){throw new N(a)}}static decodeByteSegment(a,b,c,d,e,f){let g;if(8*c>a.available())throw new N;let h=new Uint8Array(c);for(let b=0;b<c;b++)h[b]=a.readBits(8);g=null===d?R.guessEncoding(h,f):d.getName();try{b.append(Q.decode(h,g))}catch(a){throw new N(a)}e.push(h)}static toAlphaNumericChar(a){if(a>=bC.ALPHANUMERIC_CHARS.length)throw new N;return bC.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,b,c,d){let e=b.length();for(;c>1;){if(11>a.available())throw new N;let d=a.readBits(11);b.append(bC.toAlphaNumericChar(Math.floor(d/45))),b.append(bC.toAlphaNumericChar(d%45)),c-=2}if(1===c){if(6>a.available())throw new N;b.append(bC.toAlphaNumericChar(a.readBits(6)))}if(d)for(let a=e;a<b.length();a++)"%"===b.charAt(a)&&(a<b.length()-1&&"%"===b.charAt(a+1)?b.deleteCharAt(a+1):b.setCharAt(a,"\x1d"))}static decodeNumericSegment(a,b,c){for(;c>=3;){if(10>a.available())throw new N;let d=a.readBits(10);if(d>=1e3)throw new N;b.append(bC.toAlphaNumericChar(Math.floor(d/100))),b.append(bC.toAlphaNumericChar(Math.floor(d/10)%10)),b.append(bC.toAlphaNumericChar(d%10)),c-=3}if(2===c){if(7>a.available())throw new N;let c=a.readBits(7);if(c>=100)throw new N;b.append(bC.toAlphaNumericChar(Math.floor(c/10))),b.append(bC.toAlphaNumericChar(c%10))}else if(1===c){if(4>a.available())throw new N;let c=a.readBits(4);if(c>=10)throw new N;b.append(bC.toAlphaNumericChar(c))}}static parseECIValue(a){let b=a.readBits(8);if((128&b)==0)return 127&b;if((192&b)==128)return(63&b)<<8|a.readBits(8);if((224&b)==192)return(31&b)<<16|a.readBits(16);throw new N}}bC.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",bC.GB2312_SUBSET=1;class bD{constructor(a){this.mirrored=a}isMirrored(){return this.mirrored}applyMirroredCorrection(a){if(!this.mirrored||null===a||a.length<3)return;let b=a[0];a[0]=a[2],a[2]=b}}class bE{constructor(){this.rsDecoder=new al(ai.QR_CODE_FIELD_256)}decodeBooleanArray(a,b){return this.decodeBitMatrix(T.parseFromBooleanArray(a),b)}decodeBitMatrix(a,b){let c=new bz(a),d=null;try{return this.decodeBitMatrixParser(c,b)}catch(a){d=a}try{c.remask(),c.setMirror(!0),c.readVersion(),c.readFormatInformation(),c.mirror();let a=this.decodeBitMatrixParser(c,b);return a.setOther(new bD(!0)),a}catch(a){if(null!==d)throw d;throw a}}decodeBitMatrixParser(a,b){let c=a.readVersion(),d=a.readFormatInformation().getErrorCorrectionLevel(),e=a.readCodewords(),f=bA.getDataBlocks(e,c,d),g=0;for(let a of f)g+=a.getNumDataCodewords();let h=new Uint8Array(g),i=0;for(let a of f){let b=a.getCodewords(),c=a.getNumDataCodewords();this.correctErrors(b,c);for(let a=0;a<c;a++)h[i++]=b[a]}return bC.decode(h,c,d,b)}correctErrors(a,b){let c=new Int32Array(a);try{this.rsDecoder.decode(c,a.length-b)}catch(a){throw new E}for(let d=0;d<b;d++)a[d]=c[d]}}class bF extends ap{constructor(a,b,c){super(a,b),this.estimatedModuleSize=c}aboutEquals(a,b,c){if(Math.abs(b-this.getY())<=a&&Math.abs(c-this.getX())<=a){let b=Math.abs(a-this.estimatedModuleSize);return b<=1||b<=this.estimatedModuleSize}return!1}combineEstimate(a,b,c){let d=(this.getX()+b)/2;return new bF(d,(this.getY()+a)/2,(this.estimatedModuleSize+c)/2)}}class bG{constructor(a,b,c,d,e,f,g){this.image=a,this.startX=b,this.startY=c,this.width=d,this.height=e,this.moduleSize=f,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let a=this.startX,b=this.height,c=a+this.width,d=this.startY+b/2,e=new Int32Array(3),f=this.image;for(let g=0;g<b;g++){let b=d+((1&g)==0?Math.floor((g+1)/2):-Math.floor((g+1)/2));e[0]=0,e[1]=0,e[2]=0;let h=a;for(;h<c&&!f.get(h,b);)h++;let i=0;for(;h<c;){if(f.get(h,b))if(1===i)e[1]++;else if(2===i){if(this.foundPatternCross(e)){let a=this.handlePossibleCenter(e,b,h);if(null!==a)return a}e[0]=e[2],e[1]=1,e[2]=0,i=1}else e[++i]++;else 1===i&&i++,e[i]++;h++}if(this.foundPatternCross(e)){let a=this.handlePossibleCenter(e,b,c);if(null!==a)return a}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new U}static centerFromEnd(a,b){return b-a[2]-a[1]/2}foundPatternCross(a){let b=this.moduleSize,c=b/2;for(let d=0;d<3;d++)if(Math.abs(b-a[d])>=c)return!1;return!0}crossCheckVertical(a,b,c,d){let e=this.image,f=e.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;let h=a;for(;h>=0&&e.get(b,h)&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&!e.get(b,h)&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e.get(b,h)&&g[1]<=c;)g[1]++,h++;if(h===f||g[1]>c)return NaN;for(;h<f&&!e.get(b,h)&&g[2]<=c;)g[2]++,h++;return g[2]>c||5*Math.abs(g[0]+g[1]+g[2]-d)>=2*d?NaN:this.foundPatternCross(g)?bG.centerFromEnd(g,h):NaN}handlePossibleCenter(a,b,c){let d=a[0]+a[1]+a[2],e=bG.centerFromEnd(a,c),f=this.crossCheckVertical(b,e,2*a[1],d);if(!isNaN(f)){let b=(a[0]+a[1]+a[2])/3;for(let a of this.possibleCenters)if(a.aboutEquals(b,f,e))return a.combineEstimate(f,e,b);let c=new bF(e,f,b);this.possibleCenters.push(c),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(c)}return null}}class bH extends ap{constructor(a,b,c,d){super(a,b),this.estimatedModuleSize=c,this.count=d,void 0===d&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(a,b,c){if(Math.abs(b-this.getY())<=a&&Math.abs(c-this.getX())<=a){let b=Math.abs(a-this.estimatedModuleSize);return b<=1||b<=this.estimatedModuleSize}return!1}combineEstimate(a,b,c){let d=this.count+1,e=(this.count*this.getX()+b)/d;return new bH(e,(this.count*this.getY()+a)/d,(this.count*this.estimatedModuleSize+c)/d,d)}}class bI{constructor(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class bJ{constructor(a,b){this.image=a,this.resultPointCallback=b,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=b}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){let b=null!=a&&void 0!==a.get(M.TRY_HARDER),c=null!=a&&void 0!==a.get(M.PURE_BARCODE),d=this.image,e=d.getHeight(),f=d.getWidth(),g=Math.floor(3*e/(4*bJ.MAX_MODULES));(g<bJ.MIN_SKIP||b)&&(g=bJ.MIN_SKIP);let h=!1,i=new Int32Array(5);for(let a=g-1;a<e&&!h;a+=g){i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0;let b=0;for(let e=0;e<f;e++)if(d.get(e,a))(1&b)==1&&b++,i[b]++;else if((1&b)==0)if(4===b)if(bJ.foundPatternCross(i)){if(!0===this.handlePossibleCenter(i,a,e,c))if(g=2,!0===this.hasSkipped)h=this.haveMultiplyConfirmedCenters();else{let b=this.findRowSkip();b>i[2]&&(a+=b-i[2]-g,e=f-1)}else{i[0]=i[2],i[1]=i[3],i[2]=i[4],i[3]=1,i[4]=0,b=3;continue}b=0,i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0}else i[0]=i[2],i[1]=i[3],i[2]=i[4],i[3]=1,i[4]=0,b=3;else i[++b]++;else i[b]++;bJ.foundPatternCross(i)&&!0===this.handlePossibleCenter(i,a,f,c)&&(g=i[0],this.hasSkipped&&(h=this.haveMultiplyConfirmedCenters()))}let j=this.selectBestPatterns();return ap.orderBestPatterns(j),new bI(j)}static centerFromEnd(a,b){return b-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let b=0;for(let c=0;c<5;c++){let d=a[c];if(0===d)return!1;b+=d}if(b<7)return!1;let c=b/7,d=c/2;return Math.abs(c-a[0])<d&&Math.abs(c-a[1])<d&&Math.abs(3*c-a[2])<3*d&&Math.abs(c-a[3])<d&&Math.abs(c-a[4])<d}getCrossCheckStateCount(){let a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,b,c,d){let e=this.getCrossCheckStateCount(),f=0,g=this.image;for(;a>=f&&b>=f&&g.get(b-f,a-f);)e[2]++,f++;if(a<f||b<f)return!1;for(;a>=f&&b>=f&&!g.get(b-f,a-f)&&e[1]<=c;)e[1]++,f++;if(a<f||b<f||e[1]>c)return!1;for(;a>=f&&b>=f&&g.get(b-f,a-f)&&e[0]<=c;)e[0]++,f++;if(e[0]>c)return!1;let h=g.getHeight(),i=g.getWidth();for(f=1;a+f<h&&b+f<i&&g.get(b+f,a+f);)e[2]++,f++;if(a+f>=h||b+f>=i)return!1;for(;a+f<h&&b+f<i&&!g.get(b+f,a+f)&&e[3]<c;)e[3]++,f++;if(a+f>=h||b+f>=i||e[3]>=c)return!1;for(;a+f<h&&b+f<i&&g.get(b+f,a+f)&&e[4]<c;)e[4]++,f++;return!(e[4]>=c)&&Math.abs(e[0]+e[1]+e[2]+e[3]+e[4]-d)<2*d&&bJ.foundPatternCross(e)}crossCheckVertical(a,b,c,d){let e=this.image,f=e.getHeight(),g=this.getCrossCheckStateCount(),h=a;for(;h>=0&&e.get(b,h);)g[2]++,h--;if(h<0)return NaN;for(;h>=0&&!e.get(b,h)&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&e.get(b,h)&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e.get(b,h);)g[2]++,h++;if(h===f)return NaN;for(;h<f&&!e.get(b,h)&&g[3]<c;)g[3]++,h++;if(h===f||g[3]>=c)return NaN;for(;h<f&&e.get(b,h)&&g[4]<c;)g[4]++,h++;return g[4]>=c||5*Math.abs(g[0]+g[1]+g[2]+g[3]+g[4]-d)>=2*d?NaN:bJ.foundPatternCross(g)?bJ.centerFromEnd(g,h):NaN}crossCheckHorizontal(a,b,c,d){let e=this.image,f=e.getWidth(),g=this.getCrossCheckStateCount(),h=a;for(;h>=0&&e.get(h,b);)g[2]++,h--;if(h<0)return NaN;for(;h>=0&&!e.get(h,b)&&g[1]<=c;)g[1]++,h--;if(h<0||g[1]>c)return NaN;for(;h>=0&&e.get(h,b)&&g[0]<=c;)g[0]++,h--;if(g[0]>c)return NaN;for(h=a+1;h<f&&e.get(h,b);)g[2]++,h++;if(h===f)return NaN;for(;h<f&&!e.get(h,b)&&g[3]<c;)g[3]++,h++;if(h===f||g[3]>=c)return NaN;for(;h<f&&e.get(h,b)&&g[4]<c;)g[4]++,h++;return g[4]>=c||5*Math.abs(g[0]+g[1]+g[2]+g[3]+g[4]-d)>=d?NaN:bJ.foundPatternCross(g)?bJ.centerFromEnd(g,h):NaN}handlePossibleCenter(a,b,c,d){let e=a[0]+a[1]+a[2]+a[3]+a[4],f=bJ.centerFromEnd(a,c),g=this.crossCheckVertical(b,Math.floor(f),a[2],e);if(!isNaN(g)&&!isNaN(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(g),a[2],e))&&(!d||this.crossCheckDiagonal(Math.floor(g),Math.floor(f),a[2],e))){let a=e/7,b=!1,c=this.possibleCenters;for(let d=0,e=c.length;d<e;d++){let e=c[d];if(e.aboutEquals(a,g,f)){c[d]=e.combineEstimate(g,f,a),b=!0;break}}if(!b){let b=new bH(f,g,a);c.push(b),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(b)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(let b of this.possibleCenters)if(b.getCount()>=bJ.CENTER_QUORUM)if(null!=a)return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-b.getX())-Math.abs(a.getY()-b.getY()))/2);else a=b;return 0}haveMultiplyConfirmedCenters(){let a=0,b=0,c=this.possibleCenters.length;for(let c of this.possibleCenters)c.getCount()>=bJ.CENTER_QUORUM&&(a++,b+=c.getEstimatedModuleSize());if(a<3)return!1;let d=b/c,e=0;for(let a of this.possibleCenters)e+=Math.abs(a.getEstimatedModuleSize()-d);return e<=.05*b}selectBestPatterns(){let a,b=this.possibleCenters.length;if(b<3)throw new U;let c=this.possibleCenters;if(b>3){let d=0,e=0;for(let a of this.possibleCenters){let b=a.getEstimatedModuleSize();d+=b,e+=b*b}a=d/b;let f=Math.sqrt(e/b-a*a);c.sort((b,c)=>{let d=Math.abs(c.getEstimatedModuleSize()-a),e=Math.abs(b.getEstimatedModuleSize()-a);return d<e?-1:+(d>e)});let g=Math.max(.2*a,f);for(let b=0;b<c.length&&c.length>3;b++)Math.abs(c[b].getEstimatedModuleSize()-a)>g&&(c.splice(b,1),b--)}if(c.length>3){let b=0;for(let a of c)b+=a.getEstimatedModuleSize();a=b/c.length,c.sort((b,c)=>{if(c.getCount()!==b.getCount())return c.getCount()-b.getCount();{let d=Math.abs(c.getEstimatedModuleSize()-a),e=Math.abs(b.getEstimatedModuleSize()-a);return d<e?1:d>e?-1:0}}),c.splice(3)}return[c[0],c[1],c[2]]}}bJ.CENTER_QUORUM=2,bJ.MIN_SKIP=3,bJ.MAX_MODULES=57;class bK{constructor(a){this.image=a}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(a){this.resultPointCallback=null==a?null:a.get(M.NEED_RESULT_POINT_CALLBACK);let b=new bJ(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(b)}processFinderPatternInfo(a){let b=a.getTopLeft(),c=a.getTopRight(),d=a.getBottomLeft(),e=this.calculateModuleSize(b,c,d);if(e<1)throw new U("No pattern found in proccess finder.");let f=bK.computeDimension(b,c,d,e),g=bx.getProvisionalVersionForDimension(f),h=g.getDimensionForVersion()-7,i=null;if(g.getAlignmentPatternCenters().length>0){let a=c.getX()-b.getX()+d.getX(),f=c.getY()-b.getY()+d.getY(),g=1-3/h,j=Math.floor(b.getX()+g*(a-b.getX())),k=Math.floor(b.getY()+g*(f-b.getY()));for(let a=4;a<=16;a<<=1)try{i=this.findAlignmentInRegion(e,j,k,a);break}catch(a){if(!(a instanceof U))throw a}}let j=bK.createTransform(b,c,d,i,f);return new aq(bK.sampleGrid(this.image,j,f),null===i?[d,b,c]:[d,b,c,i])}static createTransform(a,b,c,d,e){let f,g,h,i,j=e-3.5;return null!==d?(f=d.getX(),g=d.getY(),i=h=j-3):(f=b.getX()-a.getX()+c.getX(),g=b.getY()-a.getY()+c.getY(),h=j,i=j),au.quadrilateralToQuadrilateral(3.5,3.5,j,3.5,h,i,3.5,j,a.getX(),a.getY(),b.getX(),b.getY(),f,g,c.getX(),c.getY())}static sampleGrid(a,b,c){return aw.getInstance().sampleGridWithTransform(a,c,c,b)}static computeDimension(a,b,c,d){let e=Math.floor((an.round(ap.distance(a,b)/d)+an.round(ap.distance(a,c)/d))/2)+7;switch(3&e){case 0:e++;break;case 2:e--;break;case 3:throw new U("Dimensions could be not found.")}return e}calculateModuleSize(a,b,c){return(this.calculateModuleSizeOneWay(a,b)+this.calculateModuleSizeOneWay(a,c))/2}calculateModuleSizeOneWay(a,b){let c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(b.getX()),Math.floor(b.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(b.getX()),Math.floor(b.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(c)?d/7:isNaN(d)?c/7:(c+d)/14}sizeOfBlackWhiteBlackRunBothWays(a,b,c,d){let e=this.sizeOfBlackWhiteBlackRun(a,b,c,d),f=1,g=a-(c-a);g<0?(f=a/(a-g),g=0):g>=this.image.getWidth()&&(f=(this.image.getWidth()-1-a)/(g-a),g=this.image.getWidth()-1);let h=Math.floor(b-(d-b)*f);return f=1,h<0?(f=b/(b-h),h=0):h>=this.image.getHeight()&&(f=(this.image.getHeight()-1-b)/(h-b),h=this.image.getHeight()-1),g=Math.floor(a+(g-a)*f),(e+=this.sizeOfBlackWhiteBlackRun(a,b,g,h))-1}sizeOfBlackWhiteBlackRun(a,b,c,d){let e=Math.abs(d-b)>Math.abs(c-a);if(e){let e=a;a=b,b=e,e=c,c=d,d=e}let f=Math.abs(c-a),g=Math.abs(d-b),h=-f/2,i=a<c?1:-1,j=b<d?1:-1,k=0,l=c+i;for(let c=a,m=b;c!==l;c+=i){let i=e?m:c,l=e?c:m;if(1===k===this.image.get(i,l)){if(2===k)return an.distance(c,m,a,b);k++}if((h+=g)>0){if(m===d)break;m+=j,h-=f}}return 2===k?an.distance(c+i,d,a,b):NaN}findAlignmentInRegion(a,b,c,d){let e=Math.floor(d*a),f=Math.max(0,b-e),g=Math.min(this.image.getWidth()-1,b+e);if(g-f<3*a)throw new U("Alignment top exceeds estimated module size.");let h=Math.max(0,c-e),i=Math.min(this.image.getHeight()-1,c+e);if(i-h<3*a)throw new U("Alignment bottom exceeds estimated module size.");return new bG(this.image,f,h,g-f,i-h,a,this.resultPointCallback).find()}}class bL{constructor(){this.decoder=new bE}getDecoder(){return this.decoder}decode(a,b){let c,d;if(null!=b&&void 0!==b.get(M.PURE_BARCODE)){let e=bL.extractPureBits(a.getBlackMatrix());c=this.decoder.decodeBitMatrix(e,b),d=bL.NO_POINTS}else{let e=new bK(a.getBlackMatrix()).detect(b);c=this.decoder.decodeBitMatrix(e.getBits(),b),d=e.getPoints()}c.getOther()instanceof bD&&c.getOther().applyMirroredCorrection(d);let e=new ab(c.getText(),c.getRawBytes(),void 0,d,ac.QR_CODE,void 0),f=c.getByteSegments();null!==f&&e.putMetadata(ad.BYTE_SEGMENTS,f);let g=c.getECLevel();return null!==g&&e.putMetadata(ad.ERROR_CORRECTION_LEVEL,g),c.hasStructuredAppend()&&(e.putMetadata(ad.STRUCTURED_APPEND_SEQUENCE,c.getStructuredAppendSequenceNumber()),e.putMetadata(ad.STRUCTURED_APPEND_PARITY,c.getStructuredAppendParity())),e}reset(){}static extractPureBits(a){let b=a.getTopLeftOnBit(),c=a.getBottomRightOnBit();if(null===b||null===c)throw new U;let d=this.moduleSize(b,a),e=b[1],f=c[1],g=b[0],h=c[0];if(g>=h||e>=f||f-e!=h-g&&(h=g+(f-e))>=a.getWidth())throw new U;let i=Math.round((h-g+1)/d),j=Math.round((f-e+1)/d);if(i<=0||j<=0||j!==i)throw new U;let k=Math.floor(d/2);e+=k;let l=(g+=k)+Math.floor((i-1)*d)-h;if(l>0){if(l>k)throw new U;g-=l}let m=e+Math.floor((j-1)*d)-f;if(m>0){if(m>k)throw new U;e-=m}let n=new T(i,j);for(let b=0;b<j;b++){let c=e+Math.floor(b*d);for(let e=0;e<i;e++)a.get(g+Math.floor(e*d),c)&&n.set(e,b)}return n}static moduleSize(a,b){let c=b.getHeight(),d=b.getWidth(),e=a[0],f=a[1],g=!0,h=0;for(;e<d&&f<c;){if(g!==b.get(e,f)){if(5==++h)break;g=!g}e++,f++}if(e===d||f===c)throw new U;return(e-a[0])/7}}bL.NO_POINTS=[];class bM{PDF417Common(){}static getBitCountSum(a){return an.sum(a)}static toIntArray(a){if(null==a||!a.length)return bM.EMPTY_INT_ARRAY;let b=new Int32Array(a.length),c=0;for(let d of a)b[c++]=d;return b}static getCodeword(a){let b=J.binarySearch(bM.SYMBOL_TABLE,262143&a);return b<0?-1:(bM.CODEWORD_TABLE[b]-1)%bM.NUMBER_OF_CODEWORDS}}bM.NUMBER_OF_CODEWORDS=929,bM.MAX_CODEWORDS_IN_BARCODE=bM.NUMBER_OF_CODEWORDS-1,bM.MIN_ROWS_IN_BARCODE=3,bM.MAX_ROWS_IN_BARCODE=90,bM.MODULES_IN_CODEWORD=17,bM.MODULES_IN_STOP_PATTERN=18,bM.BARS_IN_MODULE=8,bM.EMPTY_INT_ARRAY=new Int32Array([]),bM.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),bM.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class bN{constructor(a,b){this.bits=a,this.points=b}getBits(){return this.bits}getPoints(){return this.points}}class bO{static detectMultiple(a,b,c){let d=a.getBlackMatrix(),e=bO.detect(c,d);return e.length||((d=d.clone()).rotate180(),e=bO.detect(c,d)),new bN(d,e)}static detect(a,b){let c=[],d=0,e=0,f=!1;for(;d<b.getHeight();){let g=bO.findVertices(b,d,e);if(null==g[0]&&null==g[3]){if(!f)break;for(let a of(f=!1,e=0,c))null!=a[1]&&(d=Math.trunc(Math.max(d,a[1].getY()))),null!=a[3]&&(d=Math.max(d,Math.trunc(a[3].getY())));d+=bO.ROW_STEP;continue}if(f=!0,c.push(g),!a)break;null!=g[2]?(e=Math.trunc(g[2].getX()),d=Math.trunc(g[2].getY())):(e=Math.trunc(g[4].getX()),d=Math.trunc(g[4].getY()))}return c}static findVertices(a,b,c){let d=a.getHeight(),e=a.getWidth(),f=Array(8);return bO.copyToResult(f,bO.findRowsWithPattern(a,d,e,b,c,bO.START_PATTERN),bO.INDEXES_START_PATTERN),null!=f[4]&&(c=Math.trunc(f[4].getX()),b=Math.trunc(f[4].getY())),bO.copyToResult(f,bO.findRowsWithPattern(a,d,e,b,c,bO.STOP_PATTERN),bO.INDEXES_STOP_PATTERN),f}static copyToResult(a,b,c){for(let d=0;d<c.length;d++)a[c[d]]=b[d]}static findRowsWithPattern(a,b,c,d,e,f){let g=[,,,,],h=!1,i=new Int32Array(f.length);for(;d<b;d+=bO.ROW_STEP){let b=bO.findGuardPattern(a,e,d,c,!1,f,i);if(null!=b){for(;d>0;){let g=bO.findGuardPattern(a,e,--d,c,!1,f,i);if(null!=g)b=g;else{d++;break}}g[0]=new ap(b[0],d),g[1]=new ap(b[1],d),h=!0;break}}let j=d+1;if(h){let d=0,e=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);for(;j<b;j++){let b=bO.findGuardPattern(a,e[0],j,c,!1,f,i);if(null!=b&&Math.abs(e[0]-b[0])<bO.MAX_PATTERN_DRIFT&&Math.abs(e[1]-b[1])<bO.MAX_PATTERN_DRIFT)e=b,d=0;else if(d>bO.SKIPPED_ROW_COUNT_MAX)break;else d++}j-=d+1,g[2]=new ap(e[0],j),g[3]=new ap(e[1],j)}return j-d<bO.BARCODE_MIN_HEIGHT&&J.fill(g,null),g}static findGuardPattern(a,b,c,d,e,f,g){J.fillWithin(g,0,g.length,0);let h=b,i=0;for(;a.get(h,c)&&h>0&&i++<bO.MAX_PIXEL_DRIFT;)h--;let j=h,k=0,l=f.length;for(let b=e;j<d;j++)if(a.get(j,c)!==b)g[k]++;else{if(k===l-1){if(bO.patternMatchVariance(g,f,bO.MAX_INDIVIDUAL_VARIANCE)<bO.MAX_AVG_VARIANCE)return new Int32Array([h,j]);h+=g[0]+g[1],G.arraycopy(g,2,g,0,k-1),g[k-1]=0,g[k]=0,k--}else k++;g[k]=1,b=!b}return k===l-1&&bO.patternMatchVariance(g,f,bO.MAX_INDIVIDUAL_VARIANCE)<bO.MAX_AVG_VARIANCE?new Int32Array([h,j-1]):null}static patternMatchVariance(a,b,c){let d=a.length,e=0,f=0;for(let c=0;c<d;c++)e+=a[c],f+=b[c];if(e<f)return 1/0;let g=e/f;c*=g;let h=0;for(let e=0;e<d;e++){let d=a[e],f=b[e]*g,i=d>f?d-f:f-d;if(i>c)return 1/0;h+=i}return h/e}}bO.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),bO.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),bO.MAX_AVG_VARIANCE=.42,bO.MAX_INDIVIDUAL_VARIANCE=.8,bO.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),bO.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),bO.MAX_PIXEL_DRIFT=3,bO.MAX_PATTERN_DRIFT=5,bO.SKIPPED_ROW_COUNT_MAX=25,bO.ROW_STEP=5,bO.BARCODE_MIN_HEIGHT=10;class bP{constructor(a,b){if(0===b.length)throw new C;this.field=a;let c=b.length;if(c>1&&0===b[0]){let a=1;for(;a<c&&0===b[a];)a++;a===c?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(c-a),G.arraycopy(b,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=b}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(0===a)return this.getCoefficient(0);if(1===a){let a=0;for(let b of this.coefficients)a=this.field.add(a,b);return a}let b=this.coefficients[0],c=this.coefficients.length;for(let d=1;d<c;d++)b=this.field.add(this.field.multiply(a,b),this.coefficients[d]);return b}add(a){if(!this.field.equals(a.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero())return a;if(a.isZero())return this;let b=this.coefficients,c=a.coefficients;if(b.length>c.length){let a=b;b=c,c=a}let d=new Int32Array(c.length),e=c.length-b.length;G.arraycopy(c,0,d,0,e);for(let a=e;a<c.length;a++)d[a]=this.field.add(b[a-e],c[a]);return new bP(this.field,d)}subtract(a){if(!this.field.equals(a.field))throw new C("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())}multiply(a){return a instanceof bP?this.multiplyOther(a):this.multiplyScalar(a)}multiplyOther(a){if(!this.field.equals(a.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero()||a.isZero())return new bP(this.field,new Int32Array([0]));let b=this.coefficients,c=b.length,d=a.coefficients,e=d.length,f=new Int32Array(c+e-1);for(let a=0;a<c;a++){let c=b[a];for(let b=0;b<e;b++)f[a+b]=this.field.add(f[a+b],this.field.multiply(c,d[b]))}return new bP(this.field,f)}negative(){let a=this.coefficients.length,b=new Int32Array(a);for(let c=0;c<a;c++)b[c]=this.field.subtract(0,this.coefficients[c]);return new bP(this.field,b)}multiplyScalar(a){if(0===a)return new bP(this.field,new Int32Array([0]));if(1===a)return this;let b=this.coefficients.length,c=new Int32Array(b);for(let d=0;d<b;d++)c[d]=this.field.multiply(this.coefficients[d],a);return new bP(this.field,c)}multiplyByMonomial(a,b){if(a<0)throw new C;if(0===b)return new bP(this.field,new Int32Array([0]));let c=this.coefficients.length,d=new Int32Array(c+a);for(let a=0;a<c;a++)d[a]=this.field.multiply(this.coefficients[a],b);return new bP(this.field,d)}toString(){let a=new S;for(let b=this.getDegree();b>=0;b--){let c=this.getCoefficient(b);0!==c&&(c<0?(a.append(" - "),c=-c):a.length()>0&&a.append(" + "),(0===b||1!==c)&&a.append(c),0!==b&&(1===b?a.append("x"):(a.append("x^"),a.append(b))))}return a.toString()}}class bQ{add(a,b){return(a+b)%this.modulus}subtract(a,b){return(this.modulus+a-b)%this.modulus}exp(a){return this.expTable[a]}log(a){if(0===a)throw new C;return this.logTable[a]}inverse(a){if(0===a)throw new ah;return this.expTable[this.modulus-this.logTable[a]-1]}multiply(a,b){return 0===a||0===b?0:this.expTable[(this.logTable[a]+this.logTable[b])%(this.modulus-1)]}getSize(){return this.modulus}equals(a){return a===this}}class bR extends bQ{constructor(a,b){super(),this.modulus=a,this.expTable=new Int32Array(a),this.logTable=new Int32Array(a);let c=1;for(let d=0;d<a;d++)this.expTable[d]=c,c=c*b%a;for(let b=0;b<a-1;b++)this.logTable[this.expTable[b]]=b;this.zero=new bP(this,new Int32Array([0])),this.one=new bP(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,b){if(a<0)throw new C;if(0===b)return this.zero;let c=new Int32Array(a+1);return c[0]=b,new bP(this,c)}}bR.PDF417_GF=new bR(bM.NUMBER_OF_CODEWORDS,3);class bS{constructor(){this.field=bR.PDF417_GF}decode(a,b,c){let d=new bP(this.field,a),e=new Int32Array(b),f=!1;for(let a=b;a>0;a--){let c=d.evaluateAt(this.field.exp(a));e[b-a]=c,0!==c&&(f=!0)}if(!f)return 0;let g=this.field.getOne();if(null!=c)for(let b of c){let c=this.field.exp(a.length-1-b),d=new bP(this.field,new Int32Array([this.field.subtract(0,c),1]));g=g.multiply(d)}let h=new bP(this.field,e),i=this.runEuclideanAlgorithm(this.field.buildMonomial(b,1),h,b),j=i[0],k=i[1],l=this.findErrorLocations(j),m=this.findErrorMagnitudes(k,j,l);for(let b=0;b<l.length;b++){let c=a.length-1-this.field.log(l[b]);if(c<0)throw E.getChecksumInstance();a[c]=this.field.subtract(a[c],m[b])}return l.length}runEuclideanAlgorithm(a,b,c){if(a.getDegree()<b.getDegree()){let c=a;a=b,b=c}let d=a,e=b,f=this.field.getZero(),g=this.field.getOne();for(;e.getDegree()>=Math.round(c/2);){let a=d,b=f;if(d=e,f=g,d.isZero())throw E.getChecksumInstance();e=a;let c=this.field.getZero(),h=d.getCoefficient(d.getDegree()),i=this.field.inverse(h);for(;e.getDegree()>=d.getDegree()&&!e.isZero();){let a=e.getDegree()-d.getDegree(),b=this.field.multiply(e.getCoefficient(e.getDegree()),i);c=c.add(this.field.buildMonomial(a,b)),e=e.subtract(d.multiplyByMonomial(a,b))}g=c.multiply(f).subtract(b).negative()}let h=g.getCoefficient(0);if(0===h)throw E.getChecksumInstance();let i=this.field.inverse(h);return[g.multiply(i),e.multiply(i)]}findErrorLocations(a){let b=a.getDegree(),c=new Int32Array(b),d=0;for(let e=1;e<this.field.getSize()&&d<b;e++)0===a.evaluateAt(e)&&(c[d]=this.field.inverse(e),d++);if(d!==b)throw E.getChecksumInstance();return c}findErrorMagnitudes(a,b,c){let d=b.getDegree(),e=new Int32Array(d);for(let a=1;a<=d;a++)e[d-a]=this.field.multiply(a,b.getCoefficient(a));let f=new bP(this.field,e),g=c.length,h=new Int32Array(g);for(let b=0;b<g;b++){let d=this.field.inverse(c[b]),e=this.field.subtract(0,a.evaluateAt(d)),g=this.field.inverse(f.evaluateAt(d));h[b]=this.field.multiply(e,g)}return h}}class bT{constructor(a,b,c,d,e){a instanceof bT?this.constructor_2(a):this.constructor_1(a,b,c,d,e)}constructor_1(a,b,c,d,e){let f=null==b||null==c,g=null==d||null==e;if(f&&g)throw new U;f?(b=new ap(0,d.getY()),c=new ap(0,e.getY())):g&&(d=new ap(a.getWidth()-1,b.getY()),e=new ap(a.getWidth()-1,c.getY())),this.image=a,this.topLeft=b,this.bottomLeft=c,this.topRight=d,this.bottomRight=e,this.minX=Math.trunc(Math.min(b.getX(),c.getX())),this.maxX=Math.trunc(Math.max(d.getX(),e.getX())),this.minY=Math.trunc(Math.min(b.getY(),d.getY())),this.maxY=Math.trunc(Math.max(c.getY(),e.getY()))}constructor_2(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()}static merge(a,b){return null==a?b:null==b?a:new bT(a.image,a.topLeft,a.bottomLeft,b.topRight,b.bottomRight)}addMissingRows(a,b,c){let d=this.topLeft,e=this.bottomLeft,f=this.topRight,g=this.bottomRight;if(a>0){let b=c?this.topLeft:this.topRight,e=Math.trunc(b.getY()-a);e<0&&(e=0);let g=new ap(b.getX(),e);c?d=g:f=g}if(b>0){let a=c?this.bottomLeft:this.bottomRight,d=Math.trunc(a.getY()+b);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);let f=new ap(a.getX(),d);c?e=f:g=f}return new bT(this.image,d,e,f,g)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class bU{constructor(a,b,c,d){this.columnCount=a,this.errorCorrectionLevel=d,this.rowCountUpperPart=b,this.rowCountLowerPart=c,this.rowCount=b+c}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class bV{constructor(){this.buffer=""}static form(a,b){let c=-1;return a.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(a,d,e,f,g,h){let i;if("%%"===a)return"%";if(void 0===b[++c])return;a=f?parseInt(f.substr(1)):void 0;let j=g?parseInt(g.substr(1)):void 0;switch(h){case"s":i=b[c];break;case"c":i=b[c][0];break;case"f":i=parseFloat(b[c]).toFixed(a);break;case"p":i=parseFloat(b[c]).toPrecision(a);break;case"e":i=parseFloat(b[c]).toExponential(a);break;case"x":i=parseInt(b[c]).toString(j||16);break;case"d":i=parseFloat(parseInt(b[c],j||10).toPrecision(a)).toFixed(0)}i="object"==typeof i?JSON.stringify(i):(+i).toString(j);let k=parseInt(e),l=e&&e[0]+""=="0"?"0":" ";for(;i.length<k;)i=void 0!==d?i+l:l+i;return i})}format(a,...b){this.buffer+=bV.form(a,b)}toString(){return this.buffer}}class bW{constructor(a){this.boundingBox=new bT(a),this.codewords=Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let b=this.getCodeword(a);if(null!=b)return b;for(let c=1;c<bW.MAX_NEARBY_DISTANCE;c++){let d=this.imageRowToCodewordIndex(a)-c;if(d>=0&&null!=(b=this.codewords[d])||(d=this.imageRowToCodewordIndex(a)+c)<this.codewords.length&&null!=(b=this.codewords[d]))return b}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,b){this.codewords[this.imageRowToCodewordIndex(a)]=b}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let a=new bV,b=0;for(let c of this.codewords){if(null==c){a.format("%3d:    |   %n",b++);continue}a.format("%3d: %3d|%3d%n",b++,c.getRowNumber(),c.getValue())}return a.toString()}}bW.MAX_NEARBY_DISTANCE=5;class bX{constructor(){this.values=new Map}setValue(a){a=Math.trunc(a);let b=this.values.get(a);null==b&&(b=0),b++,this.values.set(a,b)}getValue(){let a=-1,b=[];for(let[c,d]of this.values.entries()){let e=()=>c,f=()=>d;f()>a?(a=f(),(b=[]).push(e())):f()===a&&b.push(e())}return bM.toIntArray(b)}getConfidence(a){return this.values.get(a)}}class bY extends bW{constructor(a,b){super(a),this._isLeft=b}setRowNumbers(){for(let a of this.getCodewords())null!=a&&a.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(a){let b=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(b,a);let c=this.getBoundingBox(),d=this._isLeft?c.getTopLeft():c.getTopRight(),e=this._isLeft?c.getBottomLeft():c.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(d.getY())),g=this.imageRowToCodewordIndex(Math.trunc(e.getY())),h=-1,i=1,j=0;for(let c=f;c<g;c++){if(null==b[c])continue;let d=b[c],e=d.getRowNumber()-h;if(0===e)j++;else if(1===e)i=Math.max(i,j),j=1,h=d.getRowNumber();else if(e<0||d.getRowNumber()>=a.getRowCount()||e>c)b[c]=null;else{let a,f=(a=i>2?(i-2)*e:e)>=c;for(let d=1;d<=a&&!f;d++)f=null!=b[c-d];f?b[c]=null:(h=d.getRowNumber(),j=1)}}}getRowHeights(){let a=this.getBarcodeMetadata();if(null==a)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);let b=new Int32Array(a.getRowCount());for(let a of this.getCodewords())if(null!=a){let c=a.getRowNumber();if(c>=b.length)continue;b[c]++}return b}adjustIncompleteIndicatorColumnRowNumbers(a){let b=this.getBoundingBox(),c=this._isLeft?b.getTopLeft():b.getTopRight(),d=this._isLeft?b.getBottomLeft():b.getBottomRight(),e=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.imageRowToCodewordIndex(Math.trunc(d.getY())),g=this.getCodewords(),h=-1;for(let b=e;b<f;b++){if(null==g[b])continue;let c=g[b];c.setRowNumberAsRowIndicatorColumn();let d=c.getRowNumber()-h;0===d||(1===d?h=c.getRowNumber():c.getRowNumber()>=a.getRowCount()?g[b]=null:h=c.getRowNumber())}}getBarcodeMetadata(){let a=this.getCodewords(),b=new bX,c=new bX,d=new bX,e=new bX;for(let f of a){if(null==f)continue;f.setRowNumberAsRowIndicatorColumn();let a=f.getValue()%30,g=f.getRowNumber();switch(!this._isLeft&&(g+=2),g%3){case 0:c.setValue(3*a+1);break;case 1:e.setValue(a/3),d.setValue(a%3);break;case 2:b.setValue(a+1)}}if(0===b.getValue().length||0===c.getValue().length||0===d.getValue().length||0===e.getValue().length||b.getValue()[0]<1||c.getValue()[0]+d.getValue()[0]<bM.MIN_ROWS_IN_BARCODE||c.getValue()[0]+d.getValue()[0]>bM.MAX_ROWS_IN_BARCODE)return null;let f=new bU(b.getValue()[0],c.getValue()[0],d.getValue()[0],e.getValue()[0]);return this.removeIncorrectCodewords(a,f),f}removeIncorrectCodewords(a,b){for(let c=0;c<a.length;c++){let d=a[c];if(null==a[c])continue;let e=d.getValue()%30,f=d.getRowNumber();if(f>b.getRowCount()){a[c]=null;continue}switch(!this._isLeft&&(f+=2),f%3){case 0:3*e+1!==b.getRowCountUpperPart()&&(a[c]=null);break;case 1:(Math.trunc(e/3)!==b.getErrorCorrectionLevel()||e%3!==b.getRowCountLowerPart())&&(a[c]=null);break;case 2:e+1!==b.getColumnCount()&&(a[c]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class bZ{constructor(a,b){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=b,this.detectionResultColumns=Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){let a;this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let b=bM.MAX_CODEWORDS_IN_BARCODE;do a=b,b=this.adjustRowNumbersAndGetCount();while(b>0&&b<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(a){null!=a&&a.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let a=this.adjustRowNumbersByRow();if(0===a)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let b=this.detectionResultColumns[a].getCodewords();for(let c=0;c<b.length;c++)null!=b[c]&&(b[c].hasValidRowNumber()||this.adjustRowNumbers(a,c,b))}return a}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let a=this.detectionResultColumns[0].getCodewords(),b=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<a.length;c++)if(null!=a[c]&&null!=b[c]&&a[c].getRowNumber()===b[c].getRowNumber())for(let b=1;b<=this.barcodeColumnCount;b++){let d=this.detectionResultColumns[b].getCodewords()[c];null!=d&&(d.setRowNumber(a[c].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[b].getCodewords()[c]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let a=0,b=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let c=0;c<b.length;c++){if(null==b[c])continue;let d=b[c].getRowNumber(),e=0;for(let b=this.barcodeColumnCount+1;b>0&&e<this.ADJUST_ROW_NUMBER_SKIP;b--){let f=this.detectionResultColumns[b].getCodewords()[c];null!=f&&(e=bZ.adjustRowNumberIfValid(d,e,f),!f.hasValidRowNumber()&&a++)}}return a}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let a=0,b=this.detectionResultColumns[0].getCodewords();for(let c=0;c<b.length;c++){if(null==b[c])continue;let d=b[c].getRowNumber(),e=0;for(let b=1;b<this.barcodeColumnCount+1&&e<this.ADJUST_ROW_NUMBER_SKIP;b++){let f=this.detectionResultColumns[b].getCodewords()[c];null!=f&&(e=bZ.adjustRowNumberIfValid(d,e,f),!f.hasValidRowNumber()&&a++)}}return a}static adjustRowNumberIfValid(a,b,c){return null==c||!c.hasValidRowNumber()&&(c.isValidRowNumber(a)?(c.setRowNumber(a),b=0):++b),b}adjustRowNumbers(a,b,c){if(!this.detectionResultColumns[a-1])return;let d=c[b],e=this.detectionResultColumns[a-1].getCodewords(),f=e;null!=this.detectionResultColumns[a+1]&&(f=this.detectionResultColumns[a+1].getCodewords());let g=Array(14);for(let a of(g[2]=e[b],g[3]=f[b],b>0&&(g[0]=c[b-1],g[4]=e[b-1],g[5]=f[b-1]),b>1&&(g[8]=c[b-2],g[10]=e[b-2],g[11]=f[b-2]),b<c.length-1&&(g[1]=c[b+1],g[6]=e[b+1],g[7]=f[b+1]),b<c.length-2&&(g[9]=c[b+2],g[12]=e[b+2],g[13]=f[b+2]),g))if(bZ.adjustRowNumber(d,a))return}static adjustRowNumber(a,b){return null!=b&&!!b.hasValidRowNumber()&&b.getBucket()===a.getBucket()&&(a.setRowNumber(b.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(a){this.boundingBox=a}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(a,b){this.detectionResultColumns[a]=b}getDetectionResultColumn(a){return this.detectionResultColumns[a]}toString(){let a=this.detectionResultColumns[0];null==a&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);let b=new bV;for(let c=0;c<a.getCodewords().length;c++){b.format("CW %3d:",c);for(let a=0;a<this.barcodeColumnCount+2;a++){if(null==this.detectionResultColumns[a]){b.format("    |   ");continue}let d=this.detectionResultColumns[a].getCodewords()[c];if(null==d){b.format("    |   ");continue}b.format(" %3d|%3d",d.getRowNumber(),d.getValue())}b.format("%n")}return b.toString()}}class b${constructor(a,b,c,d){this.rowNumber=b$.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(b),this.bucket=Math.trunc(c),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==b$.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}b$.BARCODE_ROW_UNKNOWN=-1;class b_{static initialize(){for(let a=0;a<bM.SYMBOL_TABLE.length;a++){let b=bM.SYMBOL_TABLE[a],c=1&b;for(let d=0;d<bM.BARS_IN_MODULE;d++){let e=0;for(;(1&b)===c;)e+=1,b>>=1;c=1&b,b_.RATIOS_TABLE[a]||(b_.RATIOS_TABLE[a]=Array(bM.BARS_IN_MODULE)),b_.RATIOS_TABLE[a][bM.BARS_IN_MODULE-d-1]=Math.fround(e/bM.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(a){let b=b_.getDecodedCodewordValue(b_.sampleBitCounts(a));return -1!==b?b:b_.getClosestDecodedValue(a)}static sampleBitCounts(a){let b=an.sum(a),c=new Int32Array(bM.BARS_IN_MODULE),d=0,e=0;for(let f=0;f<bM.MODULES_IN_CODEWORD;f++){let g=b/(2*bM.MODULES_IN_CODEWORD)+f*b/bM.MODULES_IN_CODEWORD;e+a[d]<=g&&(e+=a[d],d++),c[d]++}return c}static getDecodedCodewordValue(a){let b=b_.getBitValue(a);return -1===bM.getCodeword(b)?-1:b}static getBitValue(a){let b=0;for(let c=0;c<a.length;c++)for(let d=0;d<a[c];d++)b=b<<1|c%2==0;return Math.trunc(b)}static getClosestDecodedValue(a){let b=an.sum(a),c=Array(bM.BARS_IN_MODULE);if(b>1)for(let d=0;d<c.length;d++)c[d]=Math.fround(a[d]/b);let d=ao.MAX_VALUE,e=-1;this.bSymbolTableReady||b_.initialize();for(let a=0;a<b_.RATIOS_TABLE.length;a++){let b=0,f=b_.RATIOS_TABLE[a];for(let a=0;a<bM.BARS_IN_MODULE;a++){let e=Math.fround(f[a]-c[a]);if((b+=Math.fround(e*e))>=d)break}b<d&&(d=b,e=bM.SYMBOL_TABLE[a])}return e}}b_.bSymbolTableReady=!1,b_.RATIOS_TABLE=Array(bM.SYMBOL_TABLE.length).map(a=>Array(bM.BARS_IN_MODULE));class b0{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(a){this.segmentIndex=a}getFileId(){return this.fileId}setFileId(a){this.fileId=a}getOptionalData(){return this.optionalData}setOptionalData(a){this.optionalData=a}isLastSegment(){return this.lastSegment}setLastSegment(a){this.lastSegment=a}getSegmentCount(){return this.segmentCount}setSegmentCount(a){this.segmentCount=a}getSender(){return this.sender||null}setSender(a){this.sender=a}getAddressee(){return this.addressee||null}setAddressee(a){this.addressee=a}getFileName(){return this.fileName}setFileName(a){this.fileName=a}getFileSize(){return this.fileSize}setFileSize(a){this.fileSize=a}getChecksum(){return this.checksum}setChecksum(a){this.checksum=a}getTimestamp(){return this.timestamp}setTimestamp(a){this.timestamp=a}}class b1{static parseLong(a,b){return parseInt(a,b)}}class b2 extends A{}b2.kind="NullPointerException";class b3{writeBytes(a){this.writeBytesOffset(a,0,a.length)}writeBytesOffset(a,b,c){if(null==a)throw new b2;if(b<0||b>a.length||c<0||b+c>a.length||b+c<0)throw new H;if(0!==c)for(let d=0;d<c;d++)this.write(a[b+d])}flush(){}close(){}}class b4 extends A{}class b5 extends b3{constructor(a=32){if(super(),this.count=0,a<0)throw new C("Negative initial size: "+a);this.buf=new Uint8Array(a)}ensureCapacity(a){a-this.buf.length>0&&this.grow(a)}grow(a){let b=this.buf.length<<1;if(b-a<0&&(b=a),b<0){if(a<0)throw new b4;b=K.MAX_VALUE}this.buf=J.copyOfUint8Array(this.buf,b)}write(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1}writeBytesOffset(a,b,c){if(b<0||b>a.length||c<0||b+c-a.length>0)throw new H;this.ensureCapacity(this.count+c),G.arraycopy(a,b,this.buf,this.count,c),this.count+=c}writeTo(a){a.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return J.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(a){return a?"string"==typeof a?this.toString_string(a):this.toString_number(a):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(a){return new String(this.buf).toString()}toString_number(a){return new String(this.buf).toString()}close(){}}function b6(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw Error("Can't search globals for BigInt!")}function b7(a){if(void 0===b&&(b=b6()),null===b)throw Error("BigInt is not supported!");return b(a)}(l=w||(w={}))[l.ALPHA=0]="ALPHA",l[l.LOWER=1]="LOWER",l[l.MIXED=2]="MIXED",l[l.PUNCT=3]="PUNCT",l[l.ALPHA_SHIFT=4]="ALPHA_SHIFT",l[l.PUNCT_SHIFT=5]="PUNCT_SHIFT";class b8{static decode(a,b){let c=new S(""),d=O.ISO8859_1;c.enableDecoding(d);let e=1,f=a[e++],g=new b0;for(;e<a[0];){switch(f){case b8.TEXT_COMPACTION_MODE_LATCH:e=b8.textCompaction(a,e,c);break;case b8.BYTE_COMPACTION_MODE_LATCH:case b8.BYTE_COMPACTION_MODE_LATCH_6:e=b8.byteCompaction(f,a,d,e,c);break;case b8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[e++]);break;case b8.NUMERIC_COMPACTION_MODE_LATCH:e=b8.numericCompaction(a,e,c);break;case b8.ECI_CHARSET:O.getCharacterSetECIByValue(a[e++]);break;case b8.ECI_GENERAL_PURPOSE:e+=2;break;case b8.ECI_USER_DEFINED:e++;break;case b8.BEGIN_MACRO_PDF417_CONTROL_BLOCK:e=b8.decodeMacroBlock(a,e,g);break;case b8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case b8.MACRO_PDF417_TERMINATOR:throw new N;default:e--,e=b8.textCompaction(a,e,c)}if(e<a.length)f=a[e++];else throw N.getFormatInstance()}if(0===c.length())throw N.getFormatInstance();let h=new ae(null,c.toString(),null,b);return h.setOther(g),h}static decodeMacroBlock(a,b,c){if(b+b8.NUMBER_OF_SEQUENCE_CODEWORDS>a[0])throw N.getFormatInstance();let d=new Int32Array(b8.NUMBER_OF_SEQUENCE_CODEWORDS);for(let c=0;c<b8.NUMBER_OF_SEQUENCE_CODEWORDS;c++,b++)d[c]=a[b];c.setSegmentIndex(K.parseInt(b8.decodeBase900toBase10(d,b8.NUMBER_OF_SEQUENCE_CODEWORDS)));let e=new S;b=b8.textCompaction(a,b,e),c.setFileId(e.toString());let f=-1;for(a[b]===b8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=b+1);b<a[0];)switch(a[b]){case b8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a[++b]){case b8.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new S;b=b8.textCompaction(a,b+1,d),c.setFileName(d.toString());break;case b8.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let e=new S;b=b8.textCompaction(a,b+1,e),c.setSender(e.toString());break;case b8.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let f=new S;b=b8.textCompaction(a,b+1,f),c.setAddressee(f.toString());break;case b8.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let g=new S;b=b8.numericCompaction(a,b+1,g),c.setSegmentCount(K.parseInt(g.toString()));break;case b8.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let h=new S;b=b8.numericCompaction(a,b+1,h),c.setTimestamp(b1.parseLong(h.toString()));break;case b8.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let i=new S;b=b8.numericCompaction(a,b+1,i),c.setChecksum(K.parseInt(i.toString()));break;case b8.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let j=new S;b=b8.numericCompaction(a,b+1,j),c.setFileSize(b1.parseLong(j.toString()));break;default:throw N.getFormatInstance()}break;case b8.MACRO_PDF417_TERMINATOR:b++,c.setLastSegment(!0);break;default:throw N.getFormatInstance()}if(-1!==f){let d=b-f;c.isLastSegment()&&d--,c.setOptionalData(J.copyOfRange(a,f,f+d))}return b}static textCompaction(a,b,c){let d=new Int32Array((a[0]-b)*2),e=new Int32Array((a[0]-b)*2),f=0,g=!1;for(;b<a[0]&&!g;){let c=a[b++];if(c<b8.TEXT_COMPACTION_MODE_LATCH)d[f]=c/30,d[f+1]=c%30,f+=2;else switch(c){case b8.TEXT_COMPACTION_MODE_LATCH:d[f++]=b8.TEXT_COMPACTION_MODE_LATCH;break;case b8.BYTE_COMPACTION_MODE_LATCH:case b8.BYTE_COMPACTION_MODE_LATCH_6:case b8.NUMERIC_COMPACTION_MODE_LATCH:case b8.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case b8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case b8.MACRO_PDF417_TERMINATOR:b--,g=!0;break;case b8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[f]=b8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=a[b++],e[f]=c,f++}}return b8.decodeTextCompaction(d,e,f,c),b}static decodeTextCompaction(a,b,c,d){let e=w.ALPHA,f=w.ALPHA,g=0;for(;g<c;){let c=a[g],h="";switch(e){case w.ALPHA:if(c<26)h=String.fromCharCode(65+c);else switch(c){case 26:h=" ";break;case b8.LL:e=w.LOWER;break;case b8.ML:e=w.MIXED;break;case b8.PS:f=e,e=w.PUNCT_SHIFT;break;case b8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(b[g]);break;case b8.TEXT_COMPACTION_MODE_LATCH:e=w.ALPHA}break;case w.LOWER:if(c<26)h=String.fromCharCode(97+c);else switch(c){case 26:h=" ";break;case b8.AS:f=e,e=w.ALPHA_SHIFT;break;case b8.ML:e=w.MIXED;break;case b8.PS:f=e,e=w.PUNCT_SHIFT;break;case b8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(b[g]);break;case b8.TEXT_COMPACTION_MODE_LATCH:e=w.ALPHA}break;case w.MIXED:if(c<b8.PL)h=b8.MIXED_CHARS[c];else switch(c){case b8.PL:e=w.PUNCT;break;case 26:h=" ";break;case b8.LL:e=w.LOWER;break;case b8.AL:e=w.ALPHA;break;case b8.PS:f=e,e=w.PUNCT_SHIFT;break;case b8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(b[g]);break;case b8.TEXT_COMPACTION_MODE_LATCH:e=w.ALPHA}break;case w.PUNCT:if(c<b8.PAL)h=b8.PUNCT_CHARS[c];else switch(c){case b8.PAL:e=w.ALPHA;break;case b8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(b[g]);break;case b8.TEXT_COMPACTION_MODE_LATCH:e=w.ALPHA}break;case w.ALPHA_SHIFT:if(e=f,c<26)h=String.fromCharCode(65+c);else switch(c){case 26:h=" ";break;case b8.TEXT_COMPACTION_MODE_LATCH:e=w.ALPHA}break;case w.PUNCT_SHIFT:if(e=f,c<b8.PAL)h=b8.PUNCT_CHARS[c];else switch(c){case b8.PAL:e=w.ALPHA;break;case b8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(b[g]);break;case b8.TEXT_COMPACTION_MODE_LATCH:e=w.ALPHA}}""!==h&&d.append(h),g++}}static byteCompaction(a,b,c,d,e){let f=new b5,g=0,h=0,i=!1;switch(a){case b8.BYTE_COMPACTION_MODE_LATCH:let j=new Int32Array(6),k=b[d++];for(;d<b[0]&&!i;)switch(j[g++]=k,h=900*h+k,k=b[d++]){case b8.TEXT_COMPACTION_MODE_LATCH:case b8.BYTE_COMPACTION_MODE_LATCH:case b8.NUMERIC_COMPACTION_MODE_LATCH:case b8.BYTE_COMPACTION_MODE_LATCH_6:case b8.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case b8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case b8.MACRO_PDF417_TERMINATOR:d--,i=!0;break;default:if(g%5==0&&g>0){for(let a=0;a<6;++a)f.write(Number(b7(h)>>b7(8*(5-a))));h=0,g=0}}d===b[0]&&k<b8.TEXT_COMPACTION_MODE_LATCH&&(j[g++]=k);for(let a=0;a<g;a++)f.write(j[a]);break;case b8.BYTE_COMPACTION_MODE_LATCH_6:for(;d<b[0]&&!i;){let a=b[d++];if(a<b8.TEXT_COMPACTION_MODE_LATCH)g++,h=900*h+a;else switch(a){case b8.TEXT_COMPACTION_MODE_LATCH:case b8.BYTE_COMPACTION_MODE_LATCH:case b8.NUMERIC_COMPACTION_MODE_LATCH:case b8.BYTE_COMPACTION_MODE_LATCH_6:case b8.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case b8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case b8.MACRO_PDF417_TERMINATOR:d--,i=!0}if(g%5==0&&g>0){for(let a=0;a<6;++a)f.write(Number(b7(h)>>b7(8*(5-a))));h=0,g=0}}}return e.append(Q.decode(f.toByteArray(),c)),d}static numericCompaction(a,b,c){let d=0,e=!1,f=new Int32Array(b8.MAX_NUMERIC_CODEWORDS);for(;b<a[0]&&!e;){let g=a[b++];if(b===a[0]&&(e=!0),g<b8.TEXT_COMPACTION_MODE_LATCH)f[d]=g,d++;else switch(g){case b8.TEXT_COMPACTION_MODE_LATCH:case b8.BYTE_COMPACTION_MODE_LATCH:case b8.BYTE_COMPACTION_MODE_LATCH_6:case b8.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case b8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case b8.MACRO_PDF417_TERMINATOR:b--,e=!0}(d%b8.MAX_NUMERIC_CODEWORDS==0||g===b8.NUMERIC_COMPACTION_MODE_LATCH||e)&&d>0&&(c.append(b8.decodeBase900toBase10(f,d)),d=0)}return b}static decodeBase900toBase10(a,b){let c=b7(0);for(let d=0;d<b;d++)c+=b8.EXP900[b-d-1]*b7(a[d]);let d=c.toString();if("1"!==d.charAt(0))throw new N;return d.substring(1)}}b8.TEXT_COMPACTION_MODE_LATCH=900,b8.BYTE_COMPACTION_MODE_LATCH=901,b8.NUMERIC_COMPACTION_MODE_LATCH=902,b8.BYTE_COMPACTION_MODE_LATCH_6=924,b8.ECI_USER_DEFINED=925,b8.ECI_GENERAL_PURPOSE=926,b8.ECI_CHARSET=927,b8.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,b8.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,b8.MACRO_PDF417_TERMINATOR=922,b8.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,b8.MAX_NUMERIC_CODEWORDS=15,b8.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,b8.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,b8.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,b8.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,b8.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,b8.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,b8.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,b8.PL=25,b8.LL=27,b8.AS=27,b8.ML=28,b8.AL=28,b8.PS=29,b8.PAL=29,b8.PUNCT_CHARS=";<>@[\\]_`~!\r	,:\n-.$/\"|*()?{}'",b8.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",b8.EXP900=b6()?function(){let a=[];a[0]=b7(1);let b=b7(900);a[1]=b;for(let c=2;c<16;c++)a[c]=a[c-1]*b;return a}():[],b8.NUMBER_OF_SEQUENCE_CODEWORDS=2;class b9{constructor(){}static decode(a,b,c,d,e,f,g){let h,i=new bT(a,b,c,d,e),j=null,k=null;for(let c=!0;;c=!1){if(null!=b&&(j=b9.getRowIndicatorColumn(a,i,b,!0,f,g)),null!=d&&(k=b9.getRowIndicatorColumn(a,i,d,!1,f,g)),null==(h=b9.merge(j,k)))throw U.getNotFoundInstance();let e=h.getBoundingBox();if(c&&null!=e&&(e.getMinY()<i.getMinY()||e.getMaxY()>i.getMaxY()))i=e;else break}h.setBoundingBox(i);let l=h.getBarcodeColumnCount()+1;h.setDetectionResultColumn(0,j),h.setDetectionResultColumn(l,k);let m=null!=j;for(let b=1;b<=l;b++){let c,d=m?b:l-b;if(void 0!==h.getDetectionResultColumn(d))continue;c=0===d||d===l?new bY(i,0===d):new bW(i),h.setDetectionResultColumn(d,c);let e=-1,j=-1;for(let b=i.getMinY();b<=i.getMaxY();b++){if((e=b9.getStartColumn(h,d,b,m))<0||e>i.getMaxX()){if(-1===j)continue;e=j}let k=b9.detectCodeword(a,i.getMinX(),i.getMaxX(),m,e,b,f,g);null!=k&&(c.setCodeword(b,k),j=e,f=Math.min(f,k.getWidth()),g=Math.max(g,k.getWidth()))}}return b9.createDecoderResult(h)}static merge(a,b){if(null==a&&null==b)return null;let c=b9.getBarcodeMetadata(a,b);return null==c?null:new bZ(c,bT.merge(b9.adjustBoundingBox(a),b9.adjustBoundingBox(b)))}static adjustBoundingBox(a){if(null==a)return null;let b=a.getRowHeights();if(null==b)return null;let c=b9.getMax(b),d=0;for(let a of b)if(d+=c-a,a>0)break;let e=a.getCodewords();for(let a=0;d>0&&null==e[a];a++)d--;let f=0;for(let a=b.length-1;a>=0&&(f+=c-b[a],!(b[a]>0));a--);for(let a=e.length-1;f>0&&null==e[a];a--)f--;return a.getBoundingBox().addMissingRows(d,f,a.isLeft())}static getMax(a){let b=-1;for(let c of a)b=Math.max(b,c);return b}static getBarcodeMetadata(a,b){let c,d;return null==a||null==(c=a.getBarcodeMetadata())?null==b?null:b.getBarcodeMetadata():null==b||null==(d=b.getBarcodeMetadata())?c:c.getColumnCount()!==d.getColumnCount()&&c.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&c.getRowCount()!==d.getRowCount()?null:c}static getRowIndicatorColumn(a,b,c,d,e,f){let g=new bY(b,d);for(let h=0;h<2;h++){let i=0===h?1:-1,j=Math.trunc(Math.trunc(c.getX()));for(let h=Math.trunc(Math.trunc(c.getY()));h<=b.getMaxY()&&h>=b.getMinY();h+=i){let b=b9.detectCodeword(a,0,a.getWidth(),d,j,h,e,f);null!=b&&(g.setCodeword(h,b),j=d?b.getStartX():b.getEndX())}}return g}static adjustCodewordCount(a,b){let c=b[0][1],d=c.getValue(),e=a.getBarcodeColumnCount()*a.getBarcodeRowCount()-b9.getNumberOfECCodeWords(a.getBarcodeECLevel());if(0===d.length){if(e<1||e>bM.MAX_CODEWORDS_IN_BARCODE)throw U.getNotFoundInstance();c.setValue(e)}else d[0]!==e&&c.setValue(e)}static createDecoderResult(a){let b=b9.createBarcodeMatrix(a);b9.adjustCodewordCount(a,b);let c=[],d=new Int32Array(a.getBarcodeRowCount()*a.getBarcodeColumnCount()),e=[],f=[];for(let g=0;g<a.getBarcodeRowCount();g++)for(let h=0;h<a.getBarcodeColumnCount();h++){let i=b[g][h+1].getValue(),j=g*a.getBarcodeColumnCount()+h;0===i.length?c.push(j):1===i.length?d[j]=i[0]:(f.push(j),e.push(i))}let g=Array(e.length);for(let a=0;a<g.length;a++)g[a]=e[a];return b9.createDecoderResultFromAmbiguousValues(a.getBarcodeECLevel(),d,bM.toIntArray(c),bM.toIntArray(f),g)}static createDecoderResultFromAmbiguousValues(a,b,c,d,e){let f=new Int32Array(d.length),g=100;for(;g-- >0;){for(let a=0;a<f.length;a++)b[d[a]]=e[a][f[a]];try{return b9.decodeCodewords(b,a,c)}catch(a){if(!(a instanceof E))throw a}if(0===f.length)break;for(let a=0;a<f.length;a++)if(f[a]<e[a].length-1){f[a]++;break}else if(f[a]=0,a===f.length-1)throw E.getChecksumInstance()}throw E.getChecksumInstance()}static createBarcodeMatrix(a){let b=Array.from({length:a.getBarcodeRowCount()},()=>Array(a.getBarcodeColumnCount()+2));for(let a=0;a<b.length;a++)for(let c=0;c<b[a].length;c++)b[a][c]=new bX;let c=0;for(let d of a.getDetectionResultColumns()){if(null!=d){for(let a of d.getCodewords())if(null!=a){let d=a.getRowNumber();if(d>=0){if(d>=b.length)continue;b[d][c].setValue(a.getValue())}}}c++}return b}static isValidBarcodeColumn(a,b){return b>=0&&b<=a.getBarcodeColumnCount()+1}static getStartColumn(a,b,c,d){let e=d?1:-1,f=null;if(b9.isValidBarcodeColumn(a,b-e)&&(f=a.getDetectionResultColumn(b-e).getCodeword(c)),null!=f)return d?f.getEndX():f.getStartX();if(null!=(f=a.getDetectionResultColumn(b).getCodewordNearby(c)))return d?f.getStartX():f.getEndX();if(b9.isValidBarcodeColumn(a,b-e)&&(f=a.getDetectionResultColumn(b-e).getCodewordNearby(c)),null!=f)return d?f.getEndX():f.getStartX();let g=0;for(;b9.isValidBarcodeColumn(a,b-e);){for(let c of(b-=e,a.getDetectionResultColumn(b).getCodewords()))if(null!=c)return(d?c.getEndX():c.getStartX())+e*g*(c.getEndX()-c.getStartX());g++}return d?a.getBoundingBox().getMinX():a.getBoundingBox().getMaxX()}static detectCodeword(a,b,c,d,e,f,g,h){let i;e=b9.adjustCodewordStartColumn(a,b,c,d,e,f);let j=b9.getModuleBitCount(a,b,c,d,e,f);if(null==j)return null;let k=an.sum(j);if(d)i=e+k;else{for(let a=0;a<j.length/2;a++){let b=j[a];j[a]=j[j.length-1-a],j[j.length-1-a]=b}e=(i=e)-k}if(!b9.checkCodewordSkew(k,g,h))return null;let l=b_.getDecodedValue(j),m=bM.getCodeword(l);return -1===m?null:new b$(e,i,b9.getCodewordBucketNumber(l),m)}static getModuleBitCount(a,b,c,d,e,f){let g=e,h=new Int32Array(8),i=0,j=d?1:-1,k=d;for(;(d?g<c:g>=b)&&i<h.length;)a.get(g,f)===k?(h[i]++,g+=j):(i++,k=!k);return i===h.length||g===(d?c:b)&&i===h.length-1?h:null}static getNumberOfECCodeWords(a){return 2<<a}static adjustCodewordStartColumn(a,b,c,d,e,f){let g=e,h=d?-1:1;for(let i=0;i<2;i++){for(;(d?g>=b:g<c)&&d===a.get(g,f);){if(Math.abs(e-g)>b9.CODEWORD_SKEW_SIZE)return e;g+=h}h=-h,d=!d}return g}static checkCodewordSkew(a,b,c){return b-b9.CODEWORD_SKEW_SIZE<=a&&a<=c+b9.CODEWORD_SKEW_SIZE}static decodeCodewords(a,b,c){if(0===a.length)throw N.getFormatInstance();let d=1<<b+1,e=b9.correctErrors(a,c,d);b9.verifyCodewordCount(a,d);let f=b8.decode(a,""+b);return f.setErrorsCorrected(e),f.setErasures(c.length),f}static correctErrors(a,b,c){if(null!=b&&b.length>c/2+b9.MAX_ERRORS||c<0||c>b9.MAX_EC_CODEWORDS)throw E.getChecksumInstance();return b9.errorCorrection.decode(a,c,b)}static verifyCodewordCount(a,b){if(a.length<4)throw N.getFormatInstance();let c=a[0];if(c>a.length)throw N.getFormatInstance();if(0===c)if(b<a.length)a[0]=a.length-b;else throw N.getFormatInstance()}static getBitCountForCodeword(a){let b=new Int32Array(8),c=0,d=b.length-1;for(;!((1&a)!==c&&(c=1&a,--d<0));)b[d]++,a>>=1;return b}static getCodewordBucketNumber(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)}static getCodewordBucketNumber_number(a){return b9.getCodewordBucketNumber(b9.getBitCountForCodeword(a))}static getCodewordBucketNumber_Int32Array(a){return(a[0]-a[2]+a[4]-a[6]+9)%9}static toString(a){let b=new bV;for(let c=0;c<a.length;c++){b.format("Row %2d: ",c);for(let d=0;d<a[c].length;d++){let e=a[c][d];0===e.getValue().length?b.format("        ",null):b.format("%4d(%2d)",e.getValue()[0],e.getConfidence(e.getValue()[0]))}b.format("%n")}return b.toString()}}b9.CODEWORD_SKEW_SIZE=2,b9.MAX_ERRORS=3,b9.MAX_EC_CODEWORDS=512,b9.errorCorrection=new bS;class ca{decode(a,b=null){let c=ca.decode(a,b,!1);if(null==c||0===c.length||null==c[0])throw U.getNotFoundInstance();return c[0]}decodeMultiple(a,b=null){try{return ca.decode(a,b,!0)}catch(a){if(a instanceof N||a instanceof E)throw U.getNotFoundInstance();throw a}}static decode(a,b,c){let d=[],e=bO.detectMultiple(a,b,c);for(let a of e.getPoints()){let b=b9.decode(e.getBits(),a[4],a[5],a[6],a[7],ca.getMinCodewordWidth(a),ca.getMaxCodewordWidth(a)),c=new ab(b.getText(),b.getRawBytes(),void 0,a,ac.PDF_417);c.putMetadata(ad.ERROR_CORRECTION_LEVEL,b.getECLevel());let f=b.getOther();null!=f&&c.putMetadata(ad.PDF417_EXTRA_METADATA,f),d.push(c)}return d.map(a=>a)}static getMaxWidth(a,b){return null==a||null==b?0:Math.trunc(Math.abs(a.getX()-b.getX()))}static getMinWidth(a,b){return null==a||null==b?K.MAX_VALUE:Math.trunc(Math.abs(a.getX()-b.getX()))}static getMaxCodewordWidth(a){return Math.floor(Math.max(Math.max(ca.getMaxWidth(a[0],a[4]),ca.getMaxWidth(a[6],a[2])*bM.MODULES_IN_CODEWORD/bM.MODULES_IN_STOP_PATTERN),Math.max(ca.getMaxWidth(a[1],a[5]),ca.getMaxWidth(a[7],a[3])*bM.MODULES_IN_CODEWORD/bM.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(a){return Math.floor(Math.min(Math.min(ca.getMinWidth(a[0],a[4]),ca.getMinWidth(a[6],a[2])*bM.MODULES_IN_CODEWORD/bM.MODULES_IN_STOP_PATTERN),Math.min(ca.getMinWidth(a[1],a[5]),ca.getMinWidth(a[7],a[3])*bM.MODULES_IN_CODEWORD/bM.MODULES_IN_STOP_PATTERN)))}reset(){}}class cb extends A{}cb.kind="ReaderException";class cc{constructor(a,b){this.verbose=!0===a,b&&this.setHints(b)}decode(a,b){return b&&this.setHints(b),this.decodeInternal(a)}decodeWithState(a){return(null===this.readers||void 0===this.readers)&&this.setHints(null),this.decodeInternal(a)}setHints(a){this.hints=a;let b=null!=a&&!0===a.get(M.TRY_HARDER),c=null==a?null:a.get(M.POSSIBLE_FORMATS),d=[];if(null!=c){let e=c.some(a=>a===ac.UPC_A||a===ac.UPC_E||a===ac.EAN_13||a===ac.EAN_8||a===ac.CODABAR||a===ac.CODE_39||a===ac.CODE_93||a===ac.CODE_128||a===ac.ITF||a===ac.RSS_14||a===ac.RSS_EXPANDED);e&&!b&&d.push(new bg(a,this.verbose)),c.includes(ac.QR_CODE)&&d.push(new bL),c.includes(ac.DATA_MATRIX)&&d.push(new br),c.includes(ac.AZTEC)&&d.push(new az),c.includes(ac.PDF_417)&&d.push(new ca),e&&b&&d.push(new bg(a,this.verbose))}0===d.length&&(b||d.push(new bg(a,this.verbose)),d.push(new bL),d.push(new br),d.push(new az),d.push(new ca),b&&d.push(new bg(a,this.verbose))),this.readers=d}reset(){if(null!==this.readers)for(let a of this.readers)a.reset()}decodeInternal(a){if(null===this.readers)throw new cb("No readers where selected, nothing can be read.");for(let b of this.readers)try{return b.decode(a,this.hints)}catch(a){if(a instanceof cb)continue}throw new U("No MultiFormat Readers were able to detect the code.")}}class cd extends aa{constructor(a=null,b=500){let c=new cc;c.setHints(a),super(c,b)}decodeBitmap(a){return this.reader.decodeWithState(a)}}class ce extends aa{constructor(a=500){super(new ca,a)}}class cf extends aa{constructor(a=500){super(new bL,a)}}(m=x||(x={}))[m.ERROR_CORRECTION=0]="ERROR_CORRECTION",m[m.CHARACTER_SET=1]="CHARACTER_SET",m[m.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",m[m.MIN_SIZE=3]="MIN_SIZE",m[m.MAX_SIZE=4]="MAX_SIZE",m[m.MARGIN=5]="MARGIN",m[m.PDF417_COMPACT=6]="PDF417_COMPACT",m[m.PDF417_COMPACTION=7]="PDF417_COMPACTION",m[m.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",m[m.AZTEC_LAYERS=9]="AZTEC_LAYERS",m[m.QR_VERSION=10]="QR_VERSION";var cg=x;class ch{constructor(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new ag(a,Int32Array.from([1])))}buildGenerator(a){let b=this.cachedGenerators;if(a>=b.length){let c=b[b.length-1],d=this.field;for(let e=b.length;e<=a;e++){let a=c.multiply(new ag(d,Int32Array.from([1,d.exp(e-1+d.getGeneratorBase())])));b.push(a),c=a}}return b[a]}encode(a,b){if(0===b)throw new C("No error correction bytes");let c=a.length-b;if(c<=0)throw new C("No data bytes provided");let d=this.buildGenerator(b),e=new Int32Array(c);G.arraycopy(a,0,e,0,c);let f=new ag(this.field,e),g=(f=f.multiplyByMonomial(b,1)).divide(d)[1].getCoefficients(),h=b-g.length;for(let b=0;b<h;b++)a[c+b]=0;G.arraycopy(g,0,a,c+h,g.length)}}class ci{constructor(){}static applyMaskPenaltyRule1(a){return ci.applyMaskPenaltyRule1Internal(a,!0)+ci.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let b=0,c=a.getArray(),d=a.getWidth(),e=a.getHeight();for(let a=0;a<e-1;a++){let e=c[a];for(let f=0;f<d-1;f++){let d=e[f];d===e[f+1]&&d===c[a+1][f]&&d===c[a+1][f+1]&&b++}}return ci.N2*b}static applyMaskPenaltyRule3(a){let b=0,c=a.getArray(),d=a.getWidth(),e=a.getHeight();for(let a=0;a<e;a++)for(let f=0;f<d;f++){let g=c[a];f+6<d&&1===g[f]&&0===g[f+1]&&1===g[f+2]&&1===g[f+3]&&1===g[f+4]&&0===g[f+5]&&1===g[f+6]&&(ci.isWhiteHorizontal(g,f-4,f)||ci.isWhiteHorizontal(g,f+7,f+11))&&b++,a+6<e&&1===c[a][f]&&0===c[a+1][f]&&1===c[a+2][f]&&1===c[a+3][f]&&1===c[a+4][f]&&0===c[a+5][f]&&1===c[a+6][f]&&(ci.isWhiteVertical(c,f,a-4,a)||ci.isWhiteVertical(c,f,a+7,a+11))&&b++}return b*ci.N3}static isWhiteHorizontal(a,b,c){b=Math.max(b,0),c=Math.min(c,a.length);for(let d=b;d<c;d++)if(1===a[d])return!1;return!0}static isWhiteVertical(a,b,c,d){c=Math.max(c,0),d=Math.min(d,a.length);for(let e=c;e<d;e++)if(1===a[e][b])return!1;return!0}static applyMaskPenaltyRule4(a){let b=0,c=a.getArray(),d=a.getWidth(),e=a.getHeight();for(let a=0;a<e;a++){let e=c[a];for(let a=0;a<d;a++)1===e[a]&&b++}let f=a.getHeight()*a.getWidth();return Math.floor(10*Math.abs(2*b-f)/f)*ci.N4}static getDataMaskBit(a,b,c){let d,e;switch(a){case 0:d=c+b&1;break;case 1:d=1&c;break;case 2:d=b%3;break;case 3:d=(c+b)%3;break;case 4:d=Math.floor(c/2)+Math.floor(b/3)&1;break;case 5:d=(1&(e=c*b))+e%3;break;case 6:d=(1&(e=c*b))+e%3&1;break;case 7:d=(e=c*b)%3+(c+b&1)&1;break;default:throw new C("Invalid mask pattern: "+a)}return 0===d}static applyMaskPenaltyRule1Internal(a,b){let c=0,d=b?a.getHeight():a.getWidth(),e=b?a.getWidth():a.getHeight(),f=a.getArray();for(let a=0;a<d;a++){let d=0,g=-1;for(let h=0;h<e;h++){let e=b?f[a][h]:f[h][a];e===g?d++:(d>=5&&(c+=ci.N1+(d-5)),d=1,g=e)}d>=5&&(c+=ci.N1+(d-5))}return c}}ci.N1=3,ci.N2=3,ci.N3=40,ci.N4=10;class cj{constructor(a,b){this.width=a,this.height=b;let c=Array(b);for(let d=0;d!==b;d++)c[d]=new Uint8Array(a);this.bytes=c}getHeight(){return this.height}getWidth(){return this.width}get(a,b){return this.bytes[b][a]}getArray(){return this.bytes}setNumber(a,b,c){this.bytes[b][a]=c}setBoolean(a,b,c){this.bytes[b][a]=+!!c}clear(a){for(let b of this.bytes)J.fill(b,a)}equals(a){if(!(a instanceof cj)||this.width!==a.width||this.height!==a.height)return!1;for(let b=0,c=this.height;b<c;++b){let c=this.bytes[b],d=a.bytes[b];for(let a=0,b=this.width;a<b;++a)if(c[a]!==d[a])return!1}return!0}toString(){let a=new S;for(let b=0,c=this.height;b<c;++b){let c=this.bytes[b];for(let b=0,d=this.width;b<d;++b)switch(c[b]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ")}a.append("\n")}return a.toString()}}class ck{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let a=new S;return a.append("<<\n"),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append("\n ecLevel: "),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append("\n version: "),a.append(this.version?this.version.toString():"null"),a.append("\n maskPattern: "),a.append(this.maskPattern.toString()),this.matrix?(a.append("\n matrix:\n"),a.append(this.matrix.toString())):a.append("\n matrix: null\n"),a.append(">>\n"),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<ck.NUM_MASK_PATTERNS}}ck.NUM_MASK_PATTERNS=8;class cl extends A{}cl.kind="WriterException";class cm{constructor(){}static clearMatrix(a){a.clear(255)}static buildMatrix(a,b,c,d,e){cm.clearMatrix(e),cm.embedBasicPatterns(c,e),cm.embedTypeInfo(b,d,e),cm.maybeEmbedVersionInfo(c,e),cm.embedDataBits(a,d,e)}static embedBasicPatterns(a,b){cm.embedPositionDetectionPatternsAndSeparators(b),cm.embedDarkDotAtLeftBottomCorner(b),cm.maybeEmbedPositionAdjustmentPatterns(a,b),cm.embedTimingPatterns(b)}static embedTypeInfo(a,b,c){let d=new L;cm.makeTypeInfoBits(a,b,d);for(let a=0,b=d.getSize();a<b;++a){let b=d.get(d.getSize()-1-a),e=cm.TYPE_INFO_COORDINATES[a],f=e[0],g=e[1];if(c.setBoolean(f,g,b),a<8){let d=c.getWidth()-a-1;c.setBoolean(d,8,b)}else{let d=c.getHeight()-7+(a-8);c.setBoolean(8,d,b)}}}static maybeEmbedVersionInfo(a,b){if(7>a.getVersionNumber())return;let c=new L;cm.makeVersionInfoBits(a,c);let d=17;for(let a=0;a<6;++a)for(let e=0;e<3;++e){let f=c.get(d);d--,b.setBoolean(a,b.getHeight()-11+e,f),b.setBoolean(b.getHeight()-11+e,a,f)}}static embedDataBits(a,b,c){let d=0,e=-1,f=c.getWidth()-1,g=c.getHeight()-1;for(;f>0;){for(6===f&&(f-=1);g>=0&&g<c.getHeight();){for(let e=0;e<2;++e){let h,i=f-e;cm.isEmpty(c.get(i,g))&&(d<a.getSize()?(h=a.get(d),++d):h=!1,255!==b&&ci.getDataMaskBit(b,i,g)&&(h=!h),c.setBoolean(i,g,h))}g+=e}g+=e=-e,f-=2}if(d!==a.getSize())throw new cl("Not all bits consumed: "+d+"/"+a.getSize())}static findMSBSet(a){return 32-K.numberOfLeadingZeros(a)}static calculateBCHCode(a,b){if(0===b)throw new C("0 polynomial");let c=cm.findMSBSet(b);for(a<<=c-1;cm.findMSBSet(a)>=c;)a^=b<<cm.findMSBSet(a)-c;return a}static makeTypeInfoBits(a,b,c){if(!ck.isValidMaskPattern(b))throw new cl("Invalid mask pattern");let d=a.getBits()<<3|b;c.appendBits(d,5);let e=cm.calculateBCHCode(d,cm.TYPE_INFO_POLY);c.appendBits(e,10);let f=new L;if(f.appendBits(cm.TYPE_INFO_MASK_PATTERN,15),c.xor(f),15!==c.getSize())throw new cl("should not happen but we got: "+c.getSize())}static makeVersionInfoBits(a,b){b.appendBits(a.getVersionNumber(),6);let c=cm.calculateBCHCode(a.getVersionNumber(),cm.VERSION_INFO_POLY);if(b.appendBits(c,12),18!==b.getSize())throw new cl("should not happen but we got: "+b.getSize())}static isEmpty(a){return 255===a}static embedTimingPatterns(a){for(let b=8;b<a.getWidth()-8;++b){let c=(b+1)%2;cm.isEmpty(a.get(b,6))&&a.setNumber(b,6,c),cm.isEmpty(a.get(6,b))&&a.setNumber(6,b,c)}}static embedDarkDotAtLeftBottomCorner(a){if(0===a.get(8,a.getHeight()-8))throw new cl;a.setNumber(8,a.getHeight()-8,1)}static embedHorizontalSeparationPattern(a,b,c){for(let d=0;d<8;++d){if(!cm.isEmpty(c.get(a+d,b)))throw new cl;c.setNumber(a+d,b,0)}}static embedVerticalSeparationPattern(a,b,c){for(let d=0;d<7;++d){if(!cm.isEmpty(c.get(a,b+d)))throw new cl;c.setNumber(a,b+d,0)}}static embedPositionAdjustmentPattern(a,b,c){for(let d=0;d<5;++d){let e=cm.POSITION_ADJUSTMENT_PATTERN[d];for(let f=0;f<5;++f)c.setNumber(a+f,b+d,e[f])}}static embedPositionDetectionPattern(a,b,c){for(let d=0;d<7;++d){let e=cm.POSITION_DETECTION_PATTERN[d];for(let f=0;f<7;++f)c.setNumber(a+f,b+d,e[f])}}static embedPositionDetectionPatternsAndSeparators(a){let b=cm.POSITION_DETECTION_PATTERN[0].length;cm.embedPositionDetectionPattern(0,0,a),cm.embedPositionDetectionPattern(a.getWidth()-b,0,a),cm.embedPositionDetectionPattern(0,a.getWidth()-b,a),cm.embedHorizontalSeparationPattern(0,7,a),cm.embedHorizontalSeparationPattern(a.getWidth()-8,7,a),cm.embedHorizontalSeparationPattern(0,a.getWidth()-8,a),cm.embedVerticalSeparationPattern(7,0,a),cm.embedVerticalSeparationPattern(a.getHeight()-7-1,0,a),cm.embedVerticalSeparationPattern(7,a.getHeight()-7,a)}static maybeEmbedPositionAdjustmentPatterns(a,b){if(2>a.getVersionNumber())return;let c=a.getVersionNumber()-1,d=cm.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[c];for(let a=0,c=d.length;a!==c;a++){let e=d[a];if(e>=0)for(let a=0;a!==c;a++){let c=d[a];c>=0&&cm.isEmpty(b.get(c,e))&&cm.embedPositionAdjustmentPattern(c-2,e-2,b)}}}}cm.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),cm.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),cm.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),cm.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),cm.VERSION_INFO_POLY=7973,cm.TYPE_INFO_POLY=1335,cm.TYPE_INFO_MASK_PATTERN=21522;class cn{constructor(a,b){this.dataBytes=a,this.errorCorrectionBytes=b}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class co{constructor(){}static calculateMaskPenalty(a){return ci.applyMaskPenaltyRule1(a)+ci.applyMaskPenaltyRule2(a)+ci.applyMaskPenaltyRule3(a)+ci.applyMaskPenaltyRule4(a)}static encode(a,b,c=null){let d,e=co.DEFAULT_BYTE_MODE_ENCODING,f=null!==c&&void 0!==c.get(cg.CHARACTER_SET);f&&(e=c.get(cg.CHARACTER_SET).toString());let g=this.chooseMode(a,e),h=new L;if(g===bB.BYTE&&(f||co.DEFAULT_BYTE_MODE_ENCODING!==e)){let a=O.getCharacterSetECIByName(e);void 0!==a&&this.appendECI(a,h)}this.appendModeInfo(g,h);let i=new L;if(this.appendBytes(a,g,i,e),null!==c&&void 0!==c.get(cg.QR_VERSION)){let a=Number.parseInt(c.get(cg.QR_VERSION).toString(),10);d=bx.getVersionForNumber(a);let e=this.calculateBitsNeeded(g,h,i,d);if(!this.willFit(e,d,b))throw new cl("Data too big for requested version")}else d=this.recommendVersion(b,g,h,i);let j=new L;j.appendBitArray(h);let k=g===bB.BYTE?i.getSizeInBytes():a.length;this.appendLengthInfo(k,d,g,j),j.appendBitArray(i);let l=d.getECBlocksForLevel(b),m=d.getTotalCodewords()-l.getTotalECCodewords();this.terminateBits(m,j);let n=this.interleaveWithECBytes(j,d.getTotalCodewords(),m,l.getNumBlocks()),o=new ck;o.setECLevel(b),o.setMode(g),o.setVersion(d);let p=d.getDimensionForVersion(),q=new cj(p,p),r=this.chooseMaskPattern(n,b,d,q);return o.setMaskPattern(r),cm.buildMatrix(n,b,d,r,q),o.setMatrix(q),o}static recommendVersion(a,b,c,d){let e=this.calculateBitsNeeded(b,c,d,bx.getVersionForNumber(1)),f=this.chooseVersion(e,a),g=this.calculateBitsNeeded(b,c,d,f);return this.chooseVersion(g,a)}static calculateBitsNeeded(a,b,c,d){return b.getSize()+a.getCharacterCountBits(d)+c.getSize()}static getAlphanumericCode(a){return a<co.ALPHANUMERIC_TABLE.length?co.ALPHANUMERIC_TABLE[a]:-1}static chooseMode(a,b=null){if(O.SJIS.getName()===b&&this.isOnlyDoubleByteKanji(a))return bB.KANJI;let c=!1,d=!1;for(let b=0,e=a.length;b<e;++b){let e=a.charAt(b);if(co.isDigit(e))c=!0;else{if(-1===this.getAlphanumericCode(e.charCodeAt(0)))return bB.BYTE;d=!0}}return d?bB.ALPHANUMERIC:c?bB.NUMERIC:bB.BYTE}static isOnlyDoubleByteKanji(a){let b;try{b=Q.encode(a,O.SJIS)}catch(a){return!1}let c=b.length;if(c%2!=0)return!1;for(let a=0;a<c;a+=2){let c=255&b[a];if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(a,b,c,d){let e=Number.MAX_SAFE_INTEGER,f=-1;for(let g=0;g<ck.NUM_MASK_PATTERNS;g++){cm.buildMatrix(a,b,c,g,d);let h=this.calculateMaskPenalty(d);h<e&&(e=h,f=g)}return f}static chooseVersion(a,b){for(let c=1;c<=40;c++){let d=bx.getVersionForNumber(c);if(co.willFit(a,d,b))return d}throw new cl("Data too big")}static willFit(a,b,c){let d=b.getTotalCodewords();return d-b.getECBlocksForLevel(c).getTotalECCodewords()>=(a+7)/8}static terminateBits(a,b){let c=8*a;if(b.getSize()>c)throw new cl("data bits cannot fit in the QR Code"+b.getSize()+" > "+c);for(let a=0;a<4&&b.getSize()<c;++a)b.appendBit(!1);let d=7&b.getSize();if(d>0)for(let a=d;a<8;a++)b.appendBit(!1);let e=a-b.getSizeInBytes();for(let a=0;a<e;++a)b.appendBits((1&a)==0?236:17,8);if(b.getSize()!==c)throw new cl("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(a,b,c,d,e,f){if(d>=c)throw new cl("Block ID too large");let g=a%c,h=c-g,i=Math.floor(a/c),j=Math.floor(b/c),k=j+1,l=i-j,m=i+1-k;if(l!==m)throw new cl("EC bytes mismatch");if(c!==h+g)throw new cl("RS blocks mismatch");if(a!==(j+l)*h+(k+m)*g)throw new cl("Total bytes mismatch");d<h?(e[0]=j,f[0]=l):(e[0]=k,f[0]=m)}static interleaveWithECBytes(a,b,c,d){if(a.getSizeInBytes()!==c)throw new cl("Number of bits and data bytes does not match");let e=0,f=0,g=0,h=[];for(let i=0;i<d;++i){let j=new Int32Array(1),k=new Int32Array(1);co.getNumDataBytesAndNumECBytesForBlockID(b,c,d,i,j,k);let l=j[0],m=new Uint8Array(l);a.toBytes(8*e,m,0,l);let n=co.generateECBytes(m,k[0]);h.push(new cn(m,n)),f=Math.max(f,l),g=Math.max(g,n.length),e+=j[0]}if(c!==e)throw new cl("Data bytes does not match offset");let i=new L;for(let a=0;a<f;++a)for(let b of h){let c=b.getDataBytes();a<c.length&&i.appendBits(c[a],8)}for(let a=0;a<g;++a)for(let b of h){let c=b.getErrorCorrectionBytes();a<c.length&&i.appendBits(c[a],8)}if(b!==i.getSizeInBytes())throw new cl("Interleaving error: "+b+" and "+i.getSizeInBytes()+" differ.");return i}static generateECBytes(a,b){let c=a.length,d=new Int32Array(c+b);for(let b=0;b<c;b++)d[b]=255&a[b];new ch(ai.QR_CODE_FIELD_256).encode(d,b);let e=new Uint8Array(b);for(let a=0;a<b;a++)e[a]=d[c+a];return e}static appendModeInfo(a,b){b.appendBits(a.getBits(),4)}static appendLengthInfo(a,b,c,d){let e=c.getCharacterCountBits(b);if(a>=1<<e)throw new cl(a+" is bigger than "+((1<<e)-1));d.appendBits(a,e)}static appendBytes(a,b,c,d){switch(b){case bB.NUMERIC:co.appendNumericBytes(a,c);break;case bB.ALPHANUMERIC:co.appendAlphanumericBytes(a,c);break;case bB.BYTE:co.append8BitBytes(a,c,d);break;case bB.KANJI:co.appendKanjiBytes(a,c);break;default:throw new cl("Invalid mode: "+b)}}static getDigit(a){return a.charCodeAt(0)-48}static isDigit(a){let b=co.getDigit(a);return b>=0&&b<=9}static appendNumericBytes(a,b){let c=a.length,d=0;for(;d<c;){let e=co.getDigit(a.charAt(d));if(d+2<c){let c=co.getDigit(a.charAt(d+1)),f=co.getDigit(a.charAt(d+2));b.appendBits(100*e+10*c+f,10),d+=3}else if(d+1<c){let c=co.getDigit(a.charAt(d+1));b.appendBits(10*e+c,7),d+=2}else b.appendBits(e,4),d++}}static appendAlphanumericBytes(a,b){let c=a.length,d=0;for(;d<c;){let e=co.getAlphanumericCode(a.charCodeAt(d));if(-1===e)throw new cl;if(d+1<c){let c=co.getAlphanumericCode(a.charCodeAt(d+1));if(-1===c)throw new cl;b.appendBits(45*e+c,11),d+=2}else b.appendBits(e,6),d++}}static append8BitBytes(a,b,c){let d;try{d=Q.encode(a,c)}catch(a){throw new cl(a)}for(let a=0,c=d.length;a!==c;a++){let c=d[a];b.appendBits(c,8)}}static appendKanjiBytes(a,b){let c;try{c=Q.encode(a,O.SJIS)}catch(a){throw new cl(a)}let d=c.length;for(let a=0;a<d;a+=2){let d=(255&c[a])<<8|255&c[a+1],e=-1;if(d>=33088&&d<=40956?e=d-33088:d>=57408&&d<=60351&&(e=d-49472),-1===e)throw new cl("Invalid byte sequence");let f=(e>>8)*192+(255&e);b.appendBits(f,13)}}static appendECI(a,b){b.appendBits(bB.ECI.getBits(),4),b.appendBits(a.getValue(),8)}}co.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),co.DEFAULT_BYTE_MODE_ENCODING=O.UTF8.getName();class cp{write(a,b,c,d=null){if(0===a.length)throw new C("Found empty contents");if(b<0||c<0)throw new C("Requested dimensions are too small: "+b+"x"+c);let e=bt.L,f=cp.QUIET_ZONE_SIZE;null!==d&&(void 0!==d.get(cg.ERROR_CORRECTION)&&(e=bt.fromString(d.get(cg.ERROR_CORRECTION).toString())),void 0!==d.get(cg.MARGIN)&&(f=Number.parseInt(d.get(cg.MARGIN).toString(),10)));let g=co.encode(a,e,d);return this.renderResult(g,b,c,f)}writeToDom(a,b,c,d,e=null){"string"==typeof a&&(a=document.querySelector(a));let f=this.write(b,c,d,e);a&&a.appendChild(f)}renderResult(a,b,c,d){let e=a.getMatrix();if(null===e)throw new ak;let f=e.getWidth(),g=e.getHeight(),h=f+2*d,i=g+2*d,j=Math.max(b,h),k=Math.max(c,i),l=Math.min(Math.floor(j/h),Math.floor(k/i)),m=Math.floor((j-f*l)/2),n=Math.floor((k-g*l)/2),o=this.createSVGElement(j,k);for(let a=0,b=n;a<g;a++,b+=l)for(let c=0,d=m;c<f;c++,d+=l)if(1===e.get(c,a)){let a=this.createSvgRectElement(d,b,l,l);o.appendChild(a)}return o}createSVGElement(a,b){let c=document.createElementNS(cp.SVG_NS,"svg");return c.setAttributeNS(null,"height",a.toString()),c.setAttributeNS(null,"width",b.toString()),c}createSvgRectElement(a,b,c,d){let e=document.createElementNS(cp.SVG_NS,"rect");return e.setAttributeNS(null,"x",a.toString()),e.setAttributeNS(null,"y",b.toString()),e.setAttributeNS(null,"height",c.toString()),e.setAttributeNS(null,"width",d.toString()),e.setAttributeNS(null,"fill","#000000"),e}}cp.QUIET_ZONE_SIZE=4,cp.SVG_NS="http://www.w3.org/2000/svg";class cq{encode(a,b,c,d,e){if(0===a.length)throw new C("Found empty contents");if(b!==ac.QR_CODE)throw new C("Can only encode QR_CODE, but got "+b);if(c<0||d<0)throw new C(`Requested dimensions are too small: ${c}x${d}`);let f=bt.L,g=cq.QUIET_ZONE_SIZE;null!==e&&(void 0!==e.get(cg.ERROR_CORRECTION)&&(f=bt.fromString(e.get(cg.ERROR_CORRECTION).toString())),void 0!==e.get(cg.MARGIN)&&(g=Number.parseInt(e.get(cg.MARGIN).toString(),10)));let h=co.encode(a,f,e);return cq.renderResult(h,c,d,g)}static renderResult(a,b,c,d){let e=a.getMatrix();if(null===e)throw new ak;let f=e.getWidth(),g=e.getHeight(),h=f+2*d,i=g+2*d,j=Math.max(b,h),k=Math.max(c,i),l=Math.min(Math.floor(j/h),Math.floor(k/i)),m=Math.floor((j-f*l)/2),n=Math.floor((k-g*l)/2),o=new T(j,k);for(let a=0,b=n;a<g;a++,b+=l)for(let c=0,d=m;c<f;c++,d+=l)1===e.get(c,a)&&o.setRegion(d,b,l,l);return o}}cq.QUIET_ZONE_SIZE=4;class cr{encode(a,b,c,d,e){let f;if(b===ac.QR_CODE)f=new cq;else throw new C("No encoder available for format "+b);return f.encode(a,b,c,d,e)}}class cs extends X{constructor(a,b,c,d,e,f,g,h){if(super(f,g),this.yuvData=a,this.dataWidth=b,this.dataHeight=c,this.left=d,this.top=e,d+f>b||e+g>c)throw new C("Crop rectangle does not fit within image data.");h&&this.reverseHorizontal(f,g)}getRow(a,b){if(a<0||a>=this.getHeight())throw new C("Requested row is outside the image: "+a);let c=this.getWidth();(null==b||b.length<c)&&(b=new Uint8ClampedArray(c));let d=(a+this.top)*this.dataWidth+this.left;return G.arraycopy(this.yuvData,d,b,0,c),b}getMatrix(){let a=this.getWidth(),b=this.getHeight();if(a===this.dataWidth&&b===this.dataHeight)return this.yuvData;let c=a*b,d=new Uint8ClampedArray(c),e=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return G.arraycopy(this.yuvData,e,d,0,c),d;for(let c=0;c<b;c++){let b=c*a;G.arraycopy(this.yuvData,e,d,b,a),e+=this.dataWidth}return d}isCropSupported(){return!0}crop(a,b,c,d){return new cs(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+b,c,d,!1)}renderThumbnail(){let a=this.getWidth()/cs.THUMBNAIL_SCALE_FACTOR,b=this.getHeight()/cs.THUMBNAIL_SCALE_FACTOR,c=new Int32Array(a*b),d=this.yuvData,e=this.top*this.dataWidth+this.left;for(let f=0;f<b;f++){let b=f*a;for(let f=0;f<a;f++){let a=255&d[e+f*cs.THUMBNAIL_SCALE_FACTOR];c[b+f]=0xff000000|65793*a}e+=this.dataWidth*cs.THUMBNAIL_SCALE_FACTOR}return c}getThumbnailWidth(){return this.getWidth()/cs.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/cs.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,b){let c=this.yuvData;for(let d=0,e=this.top*this.dataWidth+this.left;d<b;d++,e+=this.dataWidth){let b=e+a/2;for(let d=e,f=e+a-1;d<b;d++,f--){let a=c[d];c[d]=c[f],c[f]=a}}}invert(){return new Y(this)}}cs.THUMBNAIL_SCALE_FACTOR=2;class ct extends X{constructor(a,b,c,d,e,f,g){if(super(b,c),this.dataWidth=d,this.dataHeight=e,this.left=f,this.top=g,4===a.BYTES_PER_ELEMENT){let d=b*c,e=new Uint8ClampedArray(d);for(let b=0;b<d;b++){let c=a[b],d=c>>16&255,f=c>>7&510,g=255&c;e[b]=(d+f+g)/4&255}this.luminances=e}else this.luminances=a;if(void 0===d&&(this.dataWidth=b),void 0===e&&(this.dataHeight=c),void 0===f&&(this.left=0),void 0===g&&(this.top=0),this.left+b>this.dataWidth||this.top+c>this.dataHeight)throw new C("Crop rectangle does not fit within image data.")}getRow(a,b){if(a<0||a>=this.getHeight())throw new C("Requested row is outside the image: "+a);let c=this.getWidth();(null==b||b.length<c)&&(b=new Uint8ClampedArray(c));let d=(a+this.top)*this.dataWidth+this.left;return G.arraycopy(this.luminances,d,b,0,c),b}getMatrix(){let a=this.getWidth(),b=this.getHeight();if(a===this.dataWidth&&b===this.dataHeight)return this.luminances;let c=a*b,d=new Uint8ClampedArray(c),e=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return G.arraycopy(this.luminances,e,d,0,c),d;for(let c=0;c<b;c++){let b=c*a;G.arraycopy(this.luminances,e,d,b,a),e+=this.dataWidth}return d}isCropSupported(){return!0}crop(a,b,c,d){return new ct(this.luminances,c,d,this.dataWidth,this.dataHeight,this.left+a,this.top+b)}invert(){return new Y(this)}}class cu extends O{static forName(a){return this.getCharacterSetECIByName(a)}}class cv{}cv.ISO_8859_1=O.ISO8859_1;class cw{isCompact(){return this.compact}setCompact(a){this.compact=a}getSize(){return this.size}setSize(a){this.size=a}getLayers(){return this.layers}setLayers(a){this.layers=a}getCodeWords(){return this.codeWords}setCodeWords(a){this.codeWords=a}getMatrix(){return this.matrix}setMatrix(a){this.matrix=a}}class cx{static singletonList(a){return[a]}static min(a,b){return a.sort(b)[0]}}class cy{constructor(a){this.previous=a}getPrevious(){return this.previous}}class cz extends cy{constructor(a,b,c){super(a),this.value=b,this.bitCount=c}appendTo(a,b){a.appendBits(this.value,this.bitCount)}add(a,b){return new cz(this,a,b)}addBinaryShift(a,b){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new cz(this,a,b)}toString(){let a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+K.toBinaryString(a|1<<this.bitCount).substring(1)+">"}}class cA extends cz{constructor(a,b,c){super(a,0,0),this.binaryShiftStart=b,this.binaryShiftByteCount=c}appendTo(a,b){for(let c=0;c<this.binaryShiftByteCount;c++)(0===c||31===c&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):0===c?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(b[this.binaryShiftStart+c],8)}addBinaryShift(a,b){return new cA(this,a,b)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function cB(a,b,c){return new cz(a,b,c)}let cC=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],cD=new cz(null,0,0),cE=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],cF=function(a){for(let b of a)J.fill(b,-1);return a[0][4]=0,a[1][4]=0,a[1][0]=28,a[3][4]=0,a[2][4]=0,a[2][0]=15,a}(J.createInt32Array(6,6));class cG{constructor(a,b,c,d){this.token=a,this.mode=b,this.binaryShiftByteCount=c,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(a,b){let c=this.bitCount,d=this.token;if(a!==this.mode){let b=cE[this.mode][a];d=cB(d,65535&b,b>>16),c+=b>>16}let e=2===a?4:5;return new cG(d=cB(d,b,e),a,0,c+e)}shiftAndAppend(a,b){let c=this.token,d=2===this.mode?4:5;return c=cB(c,cF[this.mode][a],d),new cG(c=cB(c,b,5),this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(a){let b=this.token,c=this.mode,d=this.bitCount;if(4===this.mode||2===this.mode){let a=cE[c][0];b=cB(b,65535&a,a>>16),d+=a>>16,c=0}let e=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,f=new cG(b,c,this.binaryShiftByteCount+1,d+e);return 2078===f.binaryShiftByteCount&&(f=f.endBinaryShift(a+1)),f}endBinaryShift(a){if(0===this.binaryShiftByteCount)return this;let b=this.token;return new cG(b=new cA(b,a-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)}isBetterThanOrEqualTo(a){let b=this.bitCount+(cE[this.mode][a.mode]>>16);return this.binaryShiftByteCount<a.binaryShiftByteCount?b+=cG.calculateBinaryShiftCost(a)-cG.calculateBinaryShiftCost(this):this.binaryShiftByteCount>a.binaryShiftByteCount&&a.binaryShiftByteCount>0&&(b+=10),b<=a.bitCount}toBitArray(a){let b=[];for(let c=this.endBinaryShift(a.length).token;null!==c;c=c.getPrevious())b.unshift(c);let c=new L;for(let d of b)d.appendTo(c,a);return c}toString(){return R.format("%s bits=%d bytes=%d",cC[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:10*(a.binaryShiftByteCount>0)}}cG.INITIAL_STATE=new cG(cD,0,0,0);let cH=function(a){let b=R.getCharCode(" "),c=R.getCharCode("."),d=R.getCharCode(",");a[0][b]=1;let e=R.getCharCode("Z"),f=R.getCharCode("A");for(let b=f;b<=e;b++)a[0][b]=b-f+2;a[1][b]=1;let g=R.getCharCode("z"),h=R.getCharCode("a");for(let b=h;b<=g;b++)a[1][b]=b-h+2;a[2][b]=1;let i=R.getCharCode("9"),j=R.getCharCode("0");for(let b=j;b<=i;b++)a[2][b]=b-j+2;a[2][d]=12,a[2][c]=13;let k=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","	","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~",""];for(let b=0;b<k.length;b++)a[3][R.getCharCode(k[b])]=b;let l=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let b=0;b<l.length;b++)R.getCharCode(l[b])>0&&(a[4][R.getCharCode(l[b])]=b);return a}(J.createInt32Array(5,256));class cI{constructor(a){this.text=a}encode(){let a=R.getCharCode(" "),b=R.getCharCode("\n"),c=cx.singletonList(cG.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let e,f=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case R.getCharCode("\r"):e=2*(f===b);break;case R.getCharCode("."):e=3*(f===a);break;case R.getCharCode(","):e=4*(f===a);break;case R.getCharCode(":"):e=5*(f===a);break;default:e=0}e>0?(c=cI.updateStateListForPair(c,d,e),d++):c=this.updateStateListForChar(c,d)}return cx.min(c,(a,b)=>a.getBitCount()-b.getBitCount()).toBitArray(this.text)}updateStateListForChar(a,b){let c=[];for(let d of a)this.updateStateForChar(d,b,c);return cI.simplifyStates(c)}updateStateForChar(a,b,c){let d=255&this.text[b],e=cH[a.getMode()][d]>0,f=null;for(let g=0;g<=4;g++){let h=cH[g][d];if(h>0){if(null==f&&(f=a.endBinaryShift(b)),!e||g===a.getMode()||2===g){let a=f.latchAndAppend(g,h);c.push(a)}if(!e&&cF[a.getMode()][g]>=0){let a=f.shiftAndAppend(g,h);c.push(a)}}}if(a.getBinaryShiftByteCount()>0||0===cH[a.getMode()][d]){let d=a.addBinaryShiftChar(b);c.push(d)}}static updateStateListForPair(a,b,c){let d=[];for(let e of a)this.updateStateForPair(e,b,c,d);return this.simplifyStates(d)}static updateStateForPair(a,b,c,d){let e=a.endBinaryShift(b);if(d.push(e.latchAndAppend(4,c)),4!==a.getMode()&&d.push(e.shiftAndAppend(4,c)),3===c||4===c){let a=e.latchAndAppend(2,16-c).latchAndAppend(2,1);d.push(a)}if(a.getBinaryShiftByteCount()>0){let c=a.addBinaryShiftChar(b).addBinaryShiftChar(b+1);d.push(c)}}static simplifyStates(a){let b=[];for(let c of a){let a=!0;for(let d of b){if(d.isBetterThanOrEqualTo(c)){a=!1;break}c.isBetterThanOrEqualTo(d)&&(b=b.filter(a=>a!==d))}a&&b.push(c)}return b}}class cJ{constructor(){}static encodeBytes(a){return cJ.encode(a,cJ.DEFAULT_EC_PERCENT,cJ.DEFAULT_AZTEC_LAYERS)}static encode(a,b,c){let d,e,f,g,h,i,j=new cI(a).encode(),k=K.truncDivision(j.getSize()*b,100)+11,l=j.getSize()+k;if(c!==cJ.DEFAULT_AZTEC_LAYERS){if(d=c<0,(e=Math.abs(c))>(d?cJ.MAX_NB_BITS_COMPACT:cJ.MAX_NB_BITS))throw new C(R.format("Illegal value %s for layers",c));let a=(f=cJ.totalBitsInLayer(e,d))-f%(g=cJ.WORD_SIZE[e]);if((h=cJ.stuffBits(j,g)).getSize()+k>a||d&&h.getSize()>64*g)throw new C("Data to large for user specified layer")}else{g=0,h=null;for(let a=0;;a++){if(a>cJ.MAX_NB_BITS)throw new C("Data too large for an Aztec code");if(e=(d=a<=3)?a+1:a,l>(f=cJ.totalBitsInLayer(e,d)))continue;(null==h||g!==cJ.WORD_SIZE[e])&&(g=cJ.WORD_SIZE[e],h=cJ.stuffBits(j,g));let b=f-f%g;if(!(d&&h.getSize()>64*g)&&h.getSize()+k<=b)break}}let m=cJ.generateCheckWords(h,f,g),n=h.getSize()/g,o=cJ.generateModeMessage(d,e,n),p=(d?11:14)+4*e,q=new Int32Array(p);if(d){i=p;for(let a=0;a<q.length;a++)q[a]=a}else{i=p+1+2*K.truncDivision(K.truncDivision(p,2)-1,15);let a=K.truncDivision(p,2),b=K.truncDivision(i,2);for(let c=0;c<a;c++){let d=c+K.truncDivision(c,15);q[a-c-1]=b-d-1,q[a+c]=b+d+1}}let r=new T(i);for(let a=0,b=0;a<e;a++){let c=(e-a)*4+(d?9:12);for(let d=0;d<c;d++){let e=2*d;for(let f=0;f<2;f++)m.get(b+e+f)&&r.set(q[2*a+f],q[2*a+d]),m.get(b+2*c+e+f)&&r.set(q[2*a+d],q[p-1-2*a-f]),m.get(b+4*c+e+f)&&r.set(q[p-1-2*a-f],q[p-1-2*a-d]),m.get(b+6*c+e+f)&&r.set(q[p-1-2*a-d],q[2*a+f])}b+=8*c}if(cJ.drawModeMessage(r,d,i,o),d)cJ.drawBullsEye(r,K.truncDivision(i,2),5);else{cJ.drawBullsEye(r,K.truncDivision(i,2),7);for(let a=0,b=0;a<K.truncDivision(p,2)-1;a+=15,b+=16)for(let a=1&K.truncDivision(i,2);a<i;a+=2)r.set(K.truncDivision(i,2)-b,a),r.set(K.truncDivision(i,2)+b,a),r.set(a,K.truncDivision(i,2)-b),r.set(a,K.truncDivision(i,2)+b)}let s=new cw;return s.setCompact(d),s.setSize(i),s.setLayers(e),s.setCodeWords(n),s.setMatrix(r),s}static drawBullsEye(a,b,c){for(let d=0;d<c;d+=2)for(let c=b-d;c<=b+d;c++)a.set(c,b-d),a.set(c,b+d),a.set(b-d,c),a.set(b+d,c);a.set(b-c,b-c),a.set(b-c+1,b-c),a.set(b-c,b-c+1),a.set(b+c,b-c),a.set(b+c,b-c+1),a.set(b+c,b+c-1)}static generateModeMessage(a,b,c){let d=new L;return a?(d.appendBits(b-1,2),d.appendBits(c-1,6),d=cJ.generateCheckWords(d,28,4)):(d.appendBits(b-1,5),d.appendBits(c-1,11),d=cJ.generateCheckWords(d,40,4)),d}static drawModeMessage(a,b,c,d){let e=K.truncDivision(c,2);if(b)for(let b=0;b<7;b++){let c=e-3+b;d.get(b)&&a.set(c,e-5),d.get(b+7)&&a.set(e+5,c),d.get(20-b)&&a.set(c,e+5),d.get(27-b)&&a.set(e-5,c)}else for(let b=0;b<10;b++){let c=e-5+b+K.truncDivision(b,5);d.get(b)&&a.set(c,e-7),d.get(b+10)&&a.set(e+7,c),d.get(29-b)&&a.set(c,e+7),d.get(39-b)&&a.set(e-7,c)}}static generateCheckWords(a,b,c){let d=a.getSize()/c,e=new ch(cJ.getGF(c)),f=K.truncDivision(b,c),g=cJ.bitsToWords(a,c,f);e.encode(g,f-d);let h=b%c,i=new L;for(let a of(i.appendBits(0,h),Array.from(g)))i.appendBits(a,c);return i}static bitsToWords(a,b,c){let d,e,f=new Int32Array(c);for(d=0,e=a.getSize()/b;d<e;d++){let c=0;for(let e=0;e<b;e++)c|=a.get(d*b+e)?1<<b-e-1:0;f[d]=c}return f}static getGF(a){switch(a){case 4:return ai.AZTEC_PARAM;case 6:return ai.AZTEC_DATA_6;case 8:return ai.AZTEC_DATA_8;case 10:return ai.AZTEC_DATA_10;case 12:return ai.AZTEC_DATA_12;default:throw new C("Unsupported word size "+a)}}static stuffBits(a,b){let c=new L,d=a.getSize(),e=(1<<b)-2;for(let f=0;f<d;f+=b){let g=0;for(let c=0;c<b;c++)(f+c>=d||a.get(f+c))&&(g|=1<<b-1-c);(g&e)===e?(c.appendBits(g&e,b),f--):(g&e)==0?(c.appendBits(1|g,b),f--):c.appendBits(g,b)}return c}static totalBitsInLayer(a,b){return((b?88:112)+16*a)*a}}cJ.DEFAULT_EC_PERCENT=33,cJ.DEFAULT_AZTEC_LAYERS=0,cJ.MAX_NB_BITS=32,cJ.MAX_NB_BITS_COMPACT=4,cJ.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class cK{encode(a,b,c,d){return this.encodeWithHints(a,b,c,d,null)}encodeWithHints(a,b,c,d,e){let f=cv.ISO_8859_1,g=cJ.DEFAULT_EC_PERCENT,h=cJ.DEFAULT_AZTEC_LAYERS;return null!=e&&(e.has(cg.CHARACTER_SET)&&(f=cu.forName(e.get(cg.CHARACTER_SET).toString())),e.has(cg.ERROR_CORRECTION)&&(g=K.parseInt(e.get(cg.ERROR_CORRECTION).toString())),e.has(cg.AZTEC_LAYERS)&&(h=K.parseInt(e.get(cg.AZTEC_LAYERS).toString()))),cK.encodeLayers(a,b,c,d,f,g,h)}static encodeLayers(a,b,c,d,e,f,g){if(b!==ac.AZTEC)throw new C("Can only encode AZTEC, but got "+b);let h=cJ.encode(R.getBytes(a,e),f,g);return cK.renderResult(h,c,d)}static renderResult(a,b,c){let d=a.getMatrix();if(null==d)throw new ak;let e=d.getWidth(),f=d.getHeight(),g=Math.max(b,e),h=Math.max(c,f),i=Math.min(g/e,h/f),j=(g-e*i)/2,k=(h-f*i)/2,l=new T(g,h);for(let a=0,b=k;a<f;a++,b+=i)for(let c=0,f=j;c<e;c++,f+=i)d.get(c,a)&&l.setRegion(f,b,i,i);return l}}a.AbstractExpandedDecoder=a_,a.ArgumentException=B,a.ArithmeticException=ah,a.AztecCode=cw,a.AztecCodeReader=az,a.AztecCodeWriter=cK,a.AztecDecoder=am,a.AztecDetector=ay,a.AztecDetectorResult=ar,a.AztecEncoder=cJ,a.AztecHighLevelEncoder=cI,a.AztecPoint=ax,a.BarcodeFormat=ac,a.Binarizer=F,a.BinaryBitmap=D,a.BitArray=L,a.BitMatrix=T,a.BitSource=bn,a.BrowserAztecCodeReader=aA,a.BrowserBarcodeReader=bh,a.BrowserCodeReader=aa,a.BrowserDatamatrixCodeReader=bs,a.BrowserMultiFormatReader=cd,a.BrowserPDF417Reader=ce,a.BrowserQRCodeReader=cf,a.BrowserQRCodeSvgWriter=cp,a.CharacterSetECI=O,a.ChecksumException=E,a.Code128Reader=aC,a.Code39Reader=aD,a.DataMatrixDecodedBitStreamParser=bo,a.DataMatrixReader=br,a.DecodeHintType=M,a.DecoderResult=ae,a.DefaultGridSampler=av,a.DetectorResult=aq,a.EAN13Reader=aK,a.EncodeHintType=cg,a.Exception=A,a.FormatException=N,a.GenericGF=ai,a.GenericGFPoly=ag,a.GlobalHistogramBinarizer=V,a.GridSampler=at,a.GridSamplerInstance=aw,a.HTMLCanvasElementLuminanceSource=Z,a.HybridBinarizer=W,a.ITFReader=aE,a.IllegalArgumentException=C,a.IllegalStateException=ak,a.InvertedLuminanceSource=Y,a.LuminanceSource=X,a.MathUtils=an,a.MultiFormatOneDReader=bg,a.MultiFormatReader=cc,a.MultiFormatWriter=cr,a.NotFoundException=U,a.OneDReader=aB,a.PDF417DecodedBitStreamParser=b8,a.PDF417DecoderErrorCorrection=bS,a.PDF417Reader=ca,a.PDF417ResultMetadata=b0,a.PerspectiveTransform=au,a.PlanarYUVLuminanceSource=cs,a.QRCodeByteMatrix=cj,a.QRCodeDataMask=by,a.QRCodeDecodedBitStreamParser=bC,a.QRCodeDecoderErrorCorrectionLevel=bt,a.QRCodeDecoderFormatInformation=bu,a.QRCodeEncoder=co,a.QRCodeEncoderQRCode=ck,a.QRCodeMaskUtil=ci,a.QRCodeMatrixUtil=cm,a.QRCodeMode=bB,a.QRCodeReader=bL,a.QRCodeVersion=bx,a.QRCodeWriter=cq,a.RGBLuminanceSource=ct,a.RSS14Reader=bf,a.RSSExpandedReader=bd,a.ReaderException=cb,a.ReedSolomonDecoder=al,a.ReedSolomonEncoder=ch,a.ReedSolomonException=aj,a.Result=ab,a.ResultMetadataType=ad,a.ResultPoint=ap,a.StringUtils=R,a.UnsupportedOperationException=P,a.VideoInputDevice=$,a.WhiteRectangleDetector=as,a.WriterException=cl,a.ZXingArrays=J,a.ZXingCharset=cu,a.ZXingInteger=K,a.ZXingStandardCharsets=cv,a.ZXingStringBuilder=S,a.ZXingStringEncoding=Q,a.ZXingSystem=G,a.createAbstractExpandedDecoder=ba,Object.defineProperty(a,"__esModule",{value:!0})})(b)}};