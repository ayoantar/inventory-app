(()=>{var a={};a.id=8453,a.ids=[8453],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5454:(a,b,c)=>{Promise.resolve().then(c.bind(c,44771))},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18845:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>C.a,__next_app__:()=>I,handler:()=>K,pages:()=>H,routeModule:()=>J,tree:()=>G});var d=c(65239),e=c(48088),f=c(47220),g=c(81289),h=c(26191),i=c(14823),j=c(71998),k=c(92603),l=c(54649),m=c(32781),n=c(82602),o=c(61268),p=c(4853),q=c(261),r=c(5052),s=c(9977),t=c(26713),u=c(43365),v=c(71454),w=c(67778),x=c(46143),y=c(39105),z=c(38171),A=c(86439),B=c(16133),C=c.n(B),D=c(30893),E=c(52836),F={};for(let a in D)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(F[a]=()=>D[a]);c.d(b,F);let G={children:["",{children:["assets",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,44771)),"/home/apps/lsvr-apps/lsvr-inventory/src/app/assets/cart/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,94431)),"/home/apps/lsvr-apps/lsvr-inventory/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,16133,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,80849,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,29868,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,79615,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,H=["/home/apps/lsvr-apps/lsvr-inventory/src/app/assets/cart/page.tsx"],I={require:c,loadChunk:()=>Promise.resolve()},J=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/assets/cart/page",pathname:"/assets/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:G},distDir:".next-prod",projectDir:""});async function K(a,b,c){var d;let B="/assets/cart/page";"/index"===B&&(B="/");let F="false",L=(0,h.getRequestMeta)(a,"postponed"),M=(0,h.getRequestMeta)(a,"minimalMode"),N=await J.prepare(a,b,{srcPage:B,multiZoneDraftMode:F});if(!N)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:O,query:P,params:Q,parsedUrl:R,pageIsDynamic:S,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,serverActionsManifest:W,clientReferenceManifest:X,subresourceIntegrityManifest:Y,prerenderManifest:Z,isDraftMode:$,resolvedPathname:_,revalidateOnlyGenerated:aa,routerServerContext:ab,nextConfig:ac}=N,ad=R.pathname||"/",ae=(0,q.normalizeAppPath)(B),{isOnDemandRevalidate:af}=N,ag=Z.dynamicRoutes[ae],ah=Z.routes[_],ai=!!(ag||ah||Z.routes[ae]),aj=a.headers["user-agent"]||"",ak=(0,t.getBotType)(aj),al=(0,o.isHtmlBotRequest)(a),am=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??!!a.headers[s.NEXT_ROUTER_PREFETCH_HEADER],an=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[s.RSC_HEADER],ao=(0,r.getIsPossibleServerAction)(a),ap=(0,l.checkIsAppPPREnabled)(ac.experimental.ppr)&&(null==(d=Z.routes[ae]??Z.dynamicRoutes[ae])?void 0:d.renderingMode)==="PARTIALLY_STATIC",aq=!1,ar=!1,as=ap?L:void 0,at=ap&&an&&!am,au=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),av=!aj||(0,o.shouldServeStreamingMetadata)(aj,ac.htmlLimitedBots);al&&ap&&(ai=!1,av=!1);let aw=!0===J.isDev||!ai||"string"==typeof L||at,ax=al&&ap,ay=null;$||!ai||aw||ao||as||at||(ay=_);let az=ay;!az&&J.isDev&&(az=_);let aA={...D,tree:G,pages:H,GlobalError:C(),handler:K,routeModule:J,__next_app__:I};W&&X&&(0,n.setReferenceManifestsSingleton)({page:B,clientReferenceManifest:X,serverActionsManifest:W,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:W})});let aB=a.method||"GET",aC=(0,g.getTracer)(),aD=aC.getActiveScopeSpan();try{let d=async(c,d)=>{let e=new k.NodeNextRequest(a),f=new k.NodeNextResponse(b);return J.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aC.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aB} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aB} ${a.url}`)})},f=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:P,params:Q,page:ae,sharedContext:{buildId:O},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aA,Component:(0,j.T)(aA),params:Q,routeModule:J,page:B,postponed:f,shouldWaitOnAllReady:ax,serveStreamingMetadata:av,supportsDynamicResponse:"string"==typeof f||aw,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,subresourceIntegrityManifest:Y,serverActionsManifest:W,clientReferenceManifest:X,setIsrStatus:null==ab?void 0:ab.setIsrStatus,dir:J.projectDir,isDraftMode:$,isRevalidate:ai&&!f&&!at,botType:ak,isOnDemandRevalidate:af,isPossibleServerAction:ao,assetPrefix:ac.assetPrefix,nextConfigOutput:ac.output,crossOrigin:ac.crossOrigin,trailingSlash:ac.trailingSlash,previewProps:Z.preview,deploymentId:ac.deploymentId,enableTainting:ac.experimental.taint,htmlLimitedBots:ac.htmlLimitedBots,devtoolSegmentExplorer:ac.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ac.reactMaxHeadersLength,multiZoneDraftMode:F,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ac.experimental.cacheLife,basePath:ac.basePath,serverActions:ac.experimental.serverActions,...aq?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:aq}:{},experimental:{isRoutePPREnabled:ap,expireTime:ac.expireTime,staleTimes:ac.experimental.staleTimes,dynamicIO:!!ac.experimental.dynamicIO,clientSegmentCache:!!ac.experimental.clientSegmentCache,dynamicOnHover:!!ac.experimental.dynamicOnHover,inlineCss:!!ac.experimental.inlineCss,authInterrupts:!!ac.experimental.authInterrupts,clientTraceMetadata:ac.experimental.clientTraceMetadata||[]},waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>J.onRequestError(a,b,d,ab),err:(0,h.getRequestMeta)(a,"invokeError"),dev:J.isDev}},k=await d(e,i),{metadata:l}=k,{cacheControl:m,headers:n={},fetchTags:o}=l;if(o&&(n[x.NEXT_CACHE_TAGS_HEADER]=o),a.fetchMetrics=l.fetchMetrics,ai&&(null==m?void 0:m.revalidate)===0&&!J.isDev&&!ap){let a=l.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${_}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:u.CachedRouteKind.APP_PAGE,html:k,headers:n,rscData:l.flightData,postponed:l.postponed,status:l.statusCode,segmentData:l.segmentData},cacheControl:m}},l=async({hasResolved:d,previousCacheEntry:g,isRevalidating:i,span:j})=>{let k,l=!1===J.isDev,n=d||b.writableEnded;if(af&&aa&&!g&&!M)return(null==ab?void 0:ab.render404)?await ab.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ag&&(k=(0,v.parseFallbackField)(ag.fallback)),k===v.FallbackMode.PRERENDER&&(0,t.isBot)(aj)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),(null==g?void 0:g.isStale)===-1&&(af=!0),af&&(k!==v.FallbackMode.NOT_FOUND||g)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),!M&&k!==v.FallbackMode.BLOCKING_STATIC_RENDER&&az&&!n&&!$&&S&&(l||!ah)){let b;if((l||ag)&&k===v.FallbackMode.NOT_FOUND)throw new A.NoFallbackError;if(ap&&!an){if(b=await J.handleResponse({cacheKey:l?ae:null,req:a,nextConfig:ac,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:Z,isRoutePPREnabled:ap,responseGenerator:async()=>f({span:j,postponed:void 0,fallbackRouteParams:l||ar?(0,m.u)(ae):null}),waitUntil:c.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=af||i||!as?void 0:as;if(aq&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:u.CachedRouteKind.PAGES,html:w.default.fromStatic(""),pageData:{},headers:void 0,status:void 0}};let p=S&&ap&&((0,h.getRequestMeta)(a,"renderFallbackShell")||ar)?(0,m.u)(ad):null;return f({span:j,postponed:o,fallbackRouteParams:p})},n=async d=>{var g,i,j,k,m;let n,o=await J.handleResponse({cacheKey:ay,responseGenerator:a=>l({span:d,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:af,isRoutePPREnabled:ap,req:a,nextConfig:ac,prerenderManifest:Z,waitUntil:c.waitUntil});if($&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),J.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!o){if(ay)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(g=o.value)?void 0:g.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(j=o.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof o.value.postponed;ai&&!at&&(!p||am)&&(M||b.setHeader("x-nextjs-cache",af?"REVALIDATED":o.isMiss?"MISS":o.isStale?"STALE":"HIT"),b.setHeader(s.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=o;if(as)n={revalidate:0,expire:void 0};else if(M&&an&&!am&&ap)n={revalidate:0,expire:void 0};else if(!J.isDev)if($)n={revalidate:0,expire:void 0};else if(ai){if(o.cacheControl)if("number"==typeof o.cacheControl.revalidate){if(o.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${o.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});n={revalidate:o.cacheControl.revalidate,expire:(null==(k=o.cacheControl)?void 0:k.expire)??ac.expireTime}}else n={revalidate:x.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(n={revalidate:0,expire:void 0});if(o.cacheControl=n,"string"==typeof au&&(null==q?void 0:q.kind)===u.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(m=q.headers)?void 0:m[x.NEXT_CACHE_TAGS_HEADER];M&&ai&&c&&"string"==typeof c&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(au);return void 0!==d?(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(d),cacheControl:o.cacheControl}):(b.statusCode=204,(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(""),cacheControl:o.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...o,value:{...o.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&as)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(M&&ai||delete a[x.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let t=null==(i=q.headers)?void 0:i[x.NEXT_CACHE_TAGS_HEADER];if(M&&ai&&t&&"string"==typeof t&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,t),!q.status||an&&ap||(b.statusCode=q.status),!M&&q.status&&E.RedirectStatusCode[q.status]&&an&&(b.statusCode=200),p&&b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"1"),an&&!$){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:q.html,cacheControl:at?{revalidate:0,expire:void 0}:o.cacheControl})}return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(q.rscData),cacheControl:o.cacheControl})}let v=q.html;if(!p||M)return(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:o.cacheControl});if(aq)return v.chain(new ReadableStream({start(a){a.enqueue(y.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}});let A=new TransformStream;return v.chain(A.readable),f({span:d,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(A.writable)}).catch(a=>{A.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}})};if(!aD)return await aC.withPropagatedContext(a.headers,()=>aC.trace(i.BaseServerSpan.handleRequest,{spanName:`${aB} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aB,"http.target":a.url}},n));await n(aD)}catch(b){throw aD||b instanceof A.NoFallbackError||await J.onRequestError(a,b,{routerKind:"App Router",routePath:B,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ai,isOnDemandRevalidate:af})},ab),b}}},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:a=>{"use strict";a.exports=require("path")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},44771:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/apps/lsvr-apps/lsvr-inventory/src/app/assets/cart/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/apps/lsvr-apps/lsvr-inventory/src/app/assets/cart/page.tsx","default")},51594:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>p});var d=c(60687),e=c(82136),f=c(16189),g=c(43210),h=c(85814),i=c.n(h),j=c(56025),k=c(76344),l=c(64035);function m({isOpen:a,onClose:b,onConfirm:c}){let{state:f,getCheckInItems:h,getCheckOutItems:i}=(0,k._)(),{data:j}=(0,e.useSession)(),[l,m]=(0,g.useState)(!1);if(!a)return null;let n=h(),o=i(),p=async()=>{m(!0);try{let a=await c();a.success?0===a.errors.length||alert(`Processed with some errors:
${a.errors.join("\n")}`):alert(`Failed to process transactions:
${a.errors.join("\n")}`)}catch(a){console.error("Processing error:",a),alert("An error occurred while processing the transactions")}finally{m(!1)}},q=()=>f.items.reduce((a,b)=>a+(b.asset.currentValue||b.asset.purchasePrice||0),0);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:b}),(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,d.jsxs)("div",{className:"bg-gray-900/5 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[(0,d.jsx)("div",{className:"p-6 border-b border-gray-700",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-brand-primary-text",children:"Confirm Transactions"}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 dark:text-brand-secondary-text mt-1",children:["Review all assets before processing ",f.items.length," transaction",1!==f.items.length?"s":""]})]}),(0,d.jsx)("button",{onClick:b,disabled:l,className:"text-white/50 hover:text-white/80 transition-colors hover disabled:opacity-50",children:(0,d.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,d.jsxs)("div",{className:"space-y-6",children:[o.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center mb-4",children:[(0,d.jsx)("div",{className:"bg-orange-100 p-2 rounded-lg mr-3",children:(0,d.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-brand-primary-text",children:["Assets to Check Out (",o.length,")"]}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-brand-secondary-text",children:"These assets will be marked as checked out"})]})]}),(0,d.jsx)("div",{className:"bg-orange-50 rounded-lg border border-orange-200 overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-orange-300",children:[(0,d.jsx)("thead",{className:"bg-orange-100",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider",children:"Asset"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider",children:"Assigned To"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider",children:"Return Date"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider",children:"Value"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-orange-300",children:o.map(a=>(0,d.jsxs)("tr",{className:"hover",children:[(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"w-10 h-10 mr-3 flex-shrink-0",children:a.asset.imageUrl?(0,d.jsx)("img",{src:a.asset.imageUrl,alt:a.asset.name,className:"w-10 h-10 object-cover rounded-lg border border-gray-600"}):(0,d.jsx)("div",{className:"w-10 h-10 bg-gray-900/5 rounded-lg flex items-center justify-center",children:(0,d.jsx)("span",{className:"text-sm",children:"\uD83D\uDCE6"})})}),(0,d.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-brand-primary-text truncate",children:a.asset.name}),(0,d.jsxs)("p",{className:"text-xs text-gray-600 dark:text-brand-secondary-text truncate",children:[a.asset.category.replace("_"," ")," • ",a.asset.serialNumber||"No S/N"]}),a.notes&&(0,d.jsxs)("p",{className:"text-xs text-gray-300 mt-1 italic",children:['"',a.notes,'"']})]})]})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("div",{className:"text-sm text-brand-primary-text",children:a.assignedUserName||j?.user?.name||j?.user?.email||"Current User"})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("div",{className:"text-sm text-brand-primary-text",children:a.expectedReturnDate?new Date(a.expectedReturnDate).toLocaleDateString():"No date set"})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("div",{className:"text-sm font-medium text-brand-primary-text",children:a.asset.currentValue||a.asset.purchasePrice?`$${(a.asset.currentValue||a.asset.purchasePrice)?.toLocaleString()}`:"-"})})]},a.assetId))})]})})})]}),n.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center mb-4",children:[(0,d.jsx)("div",{className:"bg-green-100 p-2 rounded-lg mr-3",children:(0,d.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-brand-primary-text",children:["Assets to Check In (",n.length,")"]}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-brand-secondary-text",children:"These assets will be returned and marked as available"})]})]}),(0,d.jsx)("div",{className:"bg-green-50 rounded-lg border border-green-200 overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-green-300",children:[(0,d.jsx)("thead",{className:"bg-green-100",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-800 uppercase tracking-wider",children:"Asset"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-800 uppercase tracking-wider",children:"Current Status"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-800 uppercase tracking-wider",children:"Return Notes"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-green-800 uppercase tracking-wider",children:"Value"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-green-300",children:n.map(a=>(0,d.jsxs)("tr",{className:"hover",children:[(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"w-10 h-10 mr-3 flex-shrink-0",children:a.asset.imageUrl?(0,d.jsx)("img",{src:a.asset.imageUrl,alt:a.asset.name,className:"w-10 h-10 object-cover rounded-lg border border-gray-600"}):(0,d.jsx)("div",{className:"w-10 h-10 bg-gray-900/5 rounded-lg flex items-center justify-center",children:(0,d.jsx)("span",{className:"text-sm",children:"\uD83D\uDCE6"})})}),(0,d.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-brand-primary-text truncate",children:a.asset.name}),(0,d.jsxs)("p",{className:"text-xs text-gray-600 dark:text-brand-secondary-text truncate",children:[a.asset.category.replace("_"," ")," • ",a.asset.serialNumber||"No S/N"]})]})]})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:a.asset.status.replace("_"," ")})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("div",{className:"text-sm text-brand-primary-text",children:a.notes||"No notes"})}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("div",{className:"text-sm font-medium text-brand-primary-text",children:a.asset.currentValue||a.asset.purchasePrice?`$${(a.asset.currentValue||a.asset.purchasePrice)?.toLocaleString()}`:"-"})})]},a.assetId))})]})})})]})]})}),(0,d.jsxs)("div",{className:"p-6 border-t border-gray-700 bg-gray-900/5/50",children:[(0,d.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,d.jsx)("div",{className:"text-sm text-brand-primary-text",children:(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Total Items:"})," ",f.items.length]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Total Value:"})," $",q().toLocaleString()]}),o.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Check-outs:"})," ",o.length]}),n.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"font-medium text-brand-primary-text",children:"Check-ins:"})," ",n.length]})]})})}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,d.jsxs)("button",{onClick:()=>{let a=new Date().toLocaleString(),b=q(),c=`EQUIPMENT CHECKOUT LIST
`;c+=`Generated: ${a}
User: ${j?.user?.name||"Unknown"} (${j?.user?.email||"N/A"})

${"=".repeat(60)}

`,o.length>0&&(c+=`CHECKING OUT (${o.length} items):
${"-".repeat(40)}
`,o.forEach((a,b)=>{let d=a.asset.currentValue||a.asset.purchasePrice||0;c+=`${b+1}. ${a.asset.name}
   Serial: ${a.asset.serialNumber||"N/A"}
   Category: ${a.asset.category.replace("_"," ")}
   Assigned to: ${a.assignedTo||"N/A"}
   Return by: ${a.dueDate?new Date(a.dueDate).toLocaleDateString():"No due date"}
   Value: $${d.toLocaleString()}
`,a.notes&&(c+=`   Notes: ${a.notes}
`),c+=`
`}),c+=`Checkout Total Value: $${o.reduce((a,b)=>a+(b.asset.currentValue||b.asset.purchasePrice||0),0).toLocaleString()}

`),n.length>0&&(c+=`CHECKING IN (${n.length} items):
${"-".repeat(40)}
`,n.forEach((a,b)=>{let d=a.asset.currentValue||a.asset.purchasePrice||0;c+=`${b+1}. ${a.asset.name}
   Serial: ${a.asset.serialNumber||"N/A"}
   Category: ${a.asset.category.replace("_"," ")}
   Value: $${d.toLocaleString()}
`,a.notes&&(c+=`   Return notes: ${a.notes}
`),c+=`
`}));let d=new Blob([c+=`${"-".repeat(60)}
TOTAL TRANSACTION VALUE: $${b.toLocaleString()}

User Signature: _________________________ Date: _______

Return Instructions:
1. Use this list to identify items for return
2. Scan QR codes or enter asset IDs in the cart
3. Select "CHECK IN" for each item
4. Process the return transaction

For questions, contact the inventory administrator.
`],{type:"text/plain"}),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=`checkout-list-${new Date().toISOString().split("T")[0]}-${Date.now()}.txt`,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(e)},disabled:l,className:"flex items-center px-3 py-2 bg-purple-600 hover disabled:opacity-50 text-white rounded-md text-sm font-medium disabled:cursor-not-allowed transition-colors",children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Checkout List"]}),(0,d.jsxs)("button",{onClick:()=>{let a=new Date().toLocaleString(),b=q(),c=`EQUIPMENT CHECKOUT QUOTE
`;c+=`Generated: ${a}
For: ${j?.user?.name||"Unknown"} (${j?.user?.email||"N/A"})

${"=".repeat(60)}

ITEM BREAKDOWN:
${"-".repeat(60)}
${"Item".padEnd(30)} ${"Category".padEnd(15)} ${"Value".padStart(10)}
${"-".repeat(60)}
`,f.items.forEach(a=>{let b=a.asset.currentValue||a.asset.purchasePrice||0,d=a.asset.name.length>29?a.asset.name.substring(0,26)+"...":a.asset.name,e=a.asset.category.replace("_"," ");c+=`${d.padEnd(30)} ${e.padEnd(15)} $${b.toLocaleString().padStart(9)}
`}),c+=`${"-".repeat(60)}
${"TOTAL VALUE:".padEnd(45)} $${b.toLocaleString().padStart(9)}
${"-".repeat(60)}

CHECKOUT DETAILS:
`,o.length>0&&(c+=`• Items checking out: ${o.length}
• Checkout value: $${o.reduce((a,b)=>a+(b.asset.currentValue||b.asset.purchasePrice||0),0).toLocaleString()}
`),n.length>0&&(c+=`• Items checking in: ${n.length}
`);let d=new Blob([c+=`
This quote is valid for reference purposes.
Actual checkout requires confirmation and processing.

Generated by LSVR Inventory Management System
`],{type:"text/plain"}),e=window.URL.createObjectURL(d),g=document.createElement("a");g.href=e,g.download=`equipment-quote-${new Date().toISOString().split("T")[0]}-${Date.now()}.txt`,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(e)},disabled:l,className:"flex items-center px-3 py-2 bg-green-600 hover disabled:opacity-50 text-white rounded-md text-sm font-medium disabled:cursor-not-allowed transition-colors",children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Download Quote"]}),(0,d.jsx)("div",{className:"text-xs text-white/50 hover:text-white/80 transition-colors flex items-center ml-2",children:"\uD83D\uDCA1 Use the checkout list to easily return these items later"})]}),(0,d.jsxs)("div",{className:"flex space-x-3",children:[(0,d.jsx)("button",{onClick:b,disabled:l,className:"flex-1 px-4 py-2 border border-gray-600 rounded-md text-sm font-medium text-gray-300 hover disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Cancel"}),(0,d.jsx)("button",{onClick:p,disabled:l,className:"flex-1 px-4 py-2 bg-brand-orange hover disabled:opacity-50 text-white rounded-md text-sm font-medium disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:l?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l-3-2.647z"})]}),"Processing ",f.items.length," Transaction",1!==f.items.length?"s":"","..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Confirm & Process All Transactions"]})})]}),(0,d.jsx)("div",{className:"mt-3 text-xs text-gray-600 dark:text-brand-secondary-text text-center",children:"⚠️ This action cannot be undone. Please review all details carefully."})]})]})})]})}function n({onPresetSelect:a,onAddMissingItems:b,onOpenSubstitutions:c,isDetecting:e=!1}){let{state:f}=(0,k._)(),[h,i]=(0,g.useState)([]),[j,l]=(0,g.useState)(!1),[m,n]=(0,g.useState)(!0);return 0===f.items.length||0===h.length?null:(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("button",{onClick:()=>n(!m),className:"flex items-center space-x-3 text-left",children:[(0,d.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-100 to-purple-200 rounded-lg",children:(0,d.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Detected Presets"}),(0,d.jsxs)("p",{className:"text-sm text-brand-primary-text",children:[h.length," preset",1!==h.length?"s":""," match your scanned items"]})]}),(0,d.jsx)("svg",{className:`w-5 h-5 text-white/50 hover:text-white/80 transition-colors transition-transform duration-200 ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j&&(0,d.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"})]}),m&&(0,d.jsx)("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-xl border border-gray-600/50 shadow-sm",children:(0,d.jsx)("div",{className:"p-6 space-y-4",children:h.map((e,f)=>{var g,h;return(0,d.jsxs)("div",{className:`relative overflow-hidden rounded-xl border transition-all duration-200 hover:shadow-md ${e.matchPercentage>=90?"bg-gradient-to-r from-green-50 to-green-100/50 border-green-200/50":e.matchPercentage>=70?"bg-gradient-to-r from-blue-50 to-blue-100/50 border-blue-200/50":"bg-gradient-to-r from-orange-50 to-orange-100/50 border-orange-200/50"}`,children:[(0,d.jsxs)("div",{className:"p-5",children:[(0,d.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,d.jsx)("h4",{className:"text-lg font-semibold text-brand-primary-text",children:e.preset.name}),(0,d.jsxs)("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${(g=e.matchPercentage)>=90?"bg-green-100 text-green-800":g>=70?"bg-blue-100 text-blue-800":g>=50?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:[e.matchPercentage,"% match"]}),e.preset.category&&(0,d.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-brand-primary-text",children:e.preset.category})]}),e.preset.description&&(0,d.jsx)("p",{className:"text-sm text-brand-primary-text mb-3",children:e.preset.description})]})}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,d.jsxs)("span",{className:"text-brand-primary-text",children:["Progress: ",e.matchedItems," of ",e.totalItems," items"]}),(0,d.jsxs)("span",{className:`font-semibold ${(h=e.matchPercentage)>=90?"text-green-600":h>=70?"text-blue-600":h>=50?"text-yellow-600":"text-orange-600"}`,children:[e.matchPercentage,"%"]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,d.jsx)("div",{className:`h-2 rounded-full transition-all duration-500 ${e.matchPercentage>=90?"bg-gradient-to-r from-green-500 to-green-600":e.matchPercentage>=70?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-orange-500 to-orange-600"}`,style:{width:`${e.matchPercentage}%`}})})]}),e.missingItems.length>0&&(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsxs)("h5",{className:"text-sm font-semibold text-gray-300 mb-2",children:["Missing Items (",e.missingItems.length,"):"]}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.missingItems.slice(0,5).map(a=>(0,d.jsxs)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a.isRequired?"bg-red-100 text-red-800":"bg-gray-100 dark:bg-gray-800 text-brand-primary-text"}`,children:[a.name," ",a.quantity>1&&`(${a.quantity})`,a.isRequired&&" *"]},a.id)),e.missingItems.length>5&&(0,d.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-brand-primary-text",children:["+",e.missingItems.length-5," more"]})]})]}),e.availableSubstitutions&&e.availableSubstitutions.length>0&&(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("h5",{className:"text-sm font-semibold text-green-700 mb-2",children:"Available Substitutions:"}),(0,d.jsxs)("div",{className:"text-xs text-green-600",children:[e.availableSubstitutions.length," item",1!==e.availableSubstitutions.length?"s":""," have substitute options"]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-3 pt-3 border-t border-gray-700/50",children:[e.matchPercentage>=50&&(0,d.jsx)("button",{onClick:()=>a?.(e.preset.id),className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-[1.02] text-sm",children:"Complete This Preset"}),e.missingItems.length>0&&(0,d.jsx)("button",{onClick:()=>b?.(e.preset.id,e.missingItems),className:"px-4 py-2 border border-gray-600 text-gray-300 hover rounded-lg font-medium transition-all duration-200 text-sm",children:"Add Missing Items"}),e.availableSubstitutions&&e.availableSubstitutions.length>0&&(0,d.jsx)("button",{onClick:()=>c?.(e.preset.id,e.preset.name,e.availableSubstitutions),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-[1.02] text-sm",children:"View Substitutions"})]})]}),e.preset.priority>0&&(0,d.jsx)("div",{className:"absolute top-3 right-3",children:(0,d.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:[(0,d.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,d.jsxs)("span",{children:["Priority ",e.preset.priority]})]})})]},e.preset.id)})})})]})}function o({isOpen:a,onClose:b,onConfirm:c,availableSubstitutions:e,presetName:f}){let[h,i]=(0,g.useState)({}),[j,k]=(0,g.useState)(!1);if(!a)return null;let l=async()=>{k(!0);try{await c(h),b()}catch(a){console.error("Failed to apply substitutions:",a)}finally{k(!1)}},m=Object.keys(h).length,n=e.length;return(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,d.jsxs)("div",{className:"bg-gray-900/5 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[(0,d.jsx)("div",{className:"px-6 py-5 border-b border-gray-700",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-brand-primary-text",children:"Item Substitutions"}),(0,d.jsxs)("p",{className:"text-sm text-brand-primary-text mt-1",children:['Select substitute items for "',f,'"']})]}),(0,d.jsx)("button",{onClick:b,className:"text-white/50 hover:text-white/80 transition-colors hover transition-colors",children:(0,d.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,d.jsxs)("div",{className:"px-6 py-4 bg-gray-900/5/30",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,d.jsxs)("span",{className:"text-brand-primary-text",children:["Substitutions selected: ",m," of ",n]}),(0,d.jsxs)("span",{className:"font-medium text-purple-600",children:[Math.round(m/n*100),"%"]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:(0,d.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${m/n*100}%`}})})]}),(0,d.jsx)("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:(0,d.jsx)("div",{className:"space-y-4",children:e.map(a=>(0,d.jsxs)("div",{className:"border border-gray-600 rounded-xl p-4",children:[(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsxs)("h3",{className:"font-medium text-brand-primary-text flex items-center",children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-2 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"Missing: ",a.itemName]}),(0,d.jsx)("p",{className:"text-sm text-brand-primary-text",children:"Select a substitute item from the available options:"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("label",{className:"flex items-center p-3 border border-gray-600 rounded-lg hover cursor-pointer transition-colors",children:[(0,d.jsx)("input",{type:"radio",name:`substitute-${a.itemId}`,value:"",checked:!h[a.itemId],onChange:()=>{let b={...h};delete b[a.itemId],i(b)},className:"w-4 h-4 text-purple-600 border-gray-600 focus:ring-purple-500 focus:ring-2"}),(0,d.jsx)("span",{className:"ml-3 text-sm text-gray-300",children:"Skip this item (proceed without substitute)"})]}),a.substitutes.map(b=>(0,d.jsxs)("label",{className:"flex items-center p-3 border border-gray-600 rounded-lg hover cursor-pointer transition-colors",children:[(0,d.jsx)("input",{type:"radio",name:`substitute-${a.itemId}`,value:b.id,checked:h[a.itemId]===b.id,onChange:()=>{var c,d;return c=a.itemId,d=b.id,void i(a=>({...a,[c]:d}))},className:"w-4 h-4 text-purple-600 border-gray-600 focus:ring-purple-500 focus:ring-2"}),(0,d.jsxs)("div",{className:"ml-3 flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-brand-primary-text",children:b.name}),(0,d.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${"AVAILABLE"===b.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:b.status})]}),b.description&&(0,d.jsx)("p",{className:"text-xs text-brand-primary-text mt-1",children:b.description})]})]},b.id))]})]},a.itemId))})}),(0,d.jsx)("div",{className:"px-6 py-4 border-t border-gray-700 bg-gray-900/5/30",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"text-sm text-brand-primary-text",children:m>0&&(0,d.jsxs)(d.Fragment,{children:["Selected ",m," substitute",1!==m?"s":""]})}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("button",{onClick:b,className:"px-4 py-2 border border-gray-600 text-gray-300 hover rounded-lg font-medium transition-all duration-200",children:"Cancel"}),(0,d.jsx)("button",{onClick:l,disabled:j,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white rounded-lg font-medium transition-all duration-200 shadow-sm hover:shadow-md transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:j?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("svg",{className:"w-4 h-4 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l-3-2.647z"})]}),"Applying..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Apply Substitutions"]})})]})]})})]})})}function p(){let{data:a,status:b}=(0,e.useSession)(),c=(0,f.useRouter)(),{state:h,removeItem:p,clearCart:q,processCart:r,addItem:s,canAddItem:t,getCheckInItems:u,getCheckOutItems:v}=(0,k._)(),[w,x]=(0,g.useState)(""),[y,z]=(0,g.useState)(!1),[A,B]=(0,g.useState)(!1),[C,D]=(0,g.useState)(""),[E,F]=(0,g.useState)(""),[G,H]=(0,g.useState)("CHECK_OUT"),[I,J]=(0,g.useState)(!1),[K,L]=(0,g.useState)(!1),[M,N]=(0,g.useState)(!1),[O,P]=(0,g.useState)(null),Q=a=>{if(a.description&&""!==a.description.trim())return a.description;let b=`${a.manufacturer||""} ${a.model||""}`.trim();return b&&"null"!==b&&"Generic"!==b?b:a.name&&""!==a.name.trim()?a.name:`Asset ${a.id}`},R=async a=>{if(a.trim()){B(!0),D(""),F("");try{let b=await fetch(`/api/assets/search?q=${encodeURIComponent(a.trim())}`);if(b.ok){let a=await b.json();if(0===a.length)return void D("No asset found with this code");let c=a[0];if("CHECK_OUT"===G&&"AVAILABLE"!==c.status)return void D(`Cannot check out ${Q(c)} - currently ${c.status.toLowerCase().replace("_"," ")}`);if("CHECK_IN"===G&&"CHECKED_OUT"!==c.status)return void D(`Cannot check in ${Q(c)} - currently ${c.status.toLowerCase().replace("_"," ")}`);let d=t(c,G);if(!d.canAdd)return void D(d.reason||"Cannot add this asset to cart");s(c,G)?(F(`✅ ${Q(c)} added to ${G.toLowerCase().replace("_"," ")} queue`),x(""),setTimeout(()=>F(""),3e3),setTimeout(()=>{L(!0),setTimeout(()=>L(!1),1500)},500)):D("Failed to add asset to cart")}else D("Failed to search for asset")}catch(a){console.error("Search error:",a),D("An error occurred while searching")}finally{B(!1)}}},S=async()=>{let a=await r();return a.success&&0===a.errors.length&&(J(!1),c.push("/assets"),setTimeout(()=>{alert(`✅ Successfully processed ${h.items.length} transaction${1!==h.items.length?"s":""}!`)},100)),a},T=async a=>{try{let b=await fetch(`/api/presets/${a}`);if(b.ok){let a=await b.json(),c=h.items.map(a=>a.assetId),d=a.items.filter(a=>a.assetId&&!c.includes(a.assetId));if(d.length>0){let b=`Add ${d.length} missing items from "${a.name}" preset?`;confirm(b)&&await V(d)}else F(`✅ All items from "${a.name}" preset are already in your cart!`),setTimeout(()=>F(""),3e3)}}catch(a){console.error("Failed to load preset:",a),D("Failed to load preset details")}},U=async(a,b)=>{try{let c=await fetch(`/api/presets/${a}`);if(c.ok){let a=(await c.json()).items.filter(a=>b.some(b=>b.id===a.id));a.length>0&&await V(a)}}catch(a){console.error("Failed to add missing items:",a),D("Failed to add missing items")}},V=async a=>{let b=0,c=0;for(let d of a)d.assetId&&(s(d.asset,G)?b++:c++);b>0&&(F(`✅ Added ${b} item${1!==b?"s":""} from preset!`),setTimeout(()=>F(""),3e3)),c>0&&(D(`⚠️ Failed to add ${c} item${1!==c?"s":""} (already in cart or unavailable)`),setTimeout(()=>D(""),5e3))},W=async a=>{if(O)try{let b=0;for(let[c,d]of Object.entries(a))if(d){let a=await fetch(`/api/assets/${d}`);if(a.ok){let c=await a.json();s(c,G)&&b++}}b>0&&(F(`✅ Added ${b} substitute item${1!==b?"s":""} from "${O.presetName}" preset!`),setTimeout(()=>F(""),3e3)),P(null)}catch(a){console.error("Failed to add substitutions:",a),D("Failed to add substitute items")}};if("loading"===b)return(0,d.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,d.jsx)(j.A,{}),(0,d.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-orange"})})]});if(!a)return null;let X=u(),Y=v();return(0,d.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-slate-50 to-indigo-50/20 dark:from-brand-dark-blue dark:via-gray-925 dark:to-brand-black",children:[(0,d.jsx)(j.A,{}),(0,d.jsxs)("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(0,d.jsx)("div",{className:"mb-8",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,d.jsx)("div",{className:"p-2 bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded-lg transition-colors",children:(0,d.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6H19M7 13v0a2 2 0 002 2h8.5m-10.5-2v-2a2 2 0 012-2h8.5"})})}),(0,d.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-brand-secondary-text bg-clip-text text-transparent",children:"Asset Transaction Cart"})]}),(0,d.jsx)("p",{className:"text-brand-primary-text ml-11 max-w-2xl",children:"Streamline your asset management with bulk check-in and check-out operations"})]}),(0,d.jsxs)(i(),{href:"/assets",className:"inline-flex items-center px-4 py-2.5 bg-gray-900/5 border border-gray-600 rounded-lg text-gray-300 hover font-medium transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,d.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Assets"]})]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,d.jsx)("div",{className:"lg:col-span-1",children:(0,d.jsxs)("div",{className:"bg-gray-900/5 backdrop-blur-sm rounded-2xl border border-gray-600/50 shadow-xl shadow-gray-200/20 p-8 sticky top-6 transition-all duration-300 hover:shadow-2xl hover:shadow-gray-200/30:shadow-gray-900/60",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsxs)("h2",{className:"text-xl font-semibold text-brand-primary-text mb-6 flex items-center",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),"Transaction Mode"]}),(0,d.jsxs)("div",{className:"bg-gray-900/5 rounded-xl p-1.5 border border-gray-600",children:[(0,d.jsxs)("button",{onClick:()=>H("CHECK_OUT"),className:`flex-1 px-6 py-4 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center w-full ${"CHECK_OUT"===G?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/25 transform scale-[1.02]":"text-brand-primary-text hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800"}`,children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Check Out Assets"]}),(0,d.jsxs)("button",{onClick:()=>H("CHECK_IN"),className:`flex-1 px-6 py-4 text-sm font-semibold rounded-lg transition-all duration-200 flex items-center justify-center w-full mt-2 ${"CHECK_IN"===G?"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg shadow-green-500/25 transform scale-[1.02]":"text-brand-primary-text hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800"}`,children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Return Assets"]})]})]}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"}),(0,d.jsx)("h3",{className:"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-brand-secondary-text bg-clip-text text-transparent",children:"Add Items"})]}),(0,d.jsxs)("form",{onSubmit:a=>{a.preventDefault(),R(w)},className:"space-y-5",children:[(0,d.jsxs)("div",{className:"relative group",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-300"}),(0,d.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value),placeholder:"Scan barcode or enter ID",className:"relative w-full pl-12 pr-14 py-4 border-2 border-gray-600 rounded-xl bg-gray-900/5 text-brand-primary-text placeholder-gray-600 focus:outline-none focus:border-blue-500/50:border-blue-400/50 focus transition-all duration-200 shadow-sm focus:shadow-lg text-base font-medium text-center",autoFocus:!0}),(0,d.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:(0,d.jsx)("svg",{className:"w-4 h-4 text-white/50 hover:text-white/80 transition-colors group-focus-within transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),(0,d.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:(0,d.jsx)("button",{type:"button",onClick:()=>z(!0),className:"p-1 text-white/50 hover:text-white/80 transition-colors hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800 rounded-md transition-all duration-200 transform hover:scale-110",title:"Open camera scanner",children:(0,d.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]}),(0,d.jsx)("button",{type:"submit",disabled:A||!w.trim(),className:`w-full px-6 py-4 text-white rounded-xl font-semibold transition-all duration-200 flex items-center justify-center shadow-lg transform hover:scale-[1.02] disabled:transform-none disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap ${"CHECK_OUT"===G?"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 shadow-orange-500/25 hover:shadow-orange-500/40":"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 shadow-green-500/25 hover:shadow-green-500/40"}`,children:A?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("svg",{className:"w-5 h-5 animate-spin mr-3",fill:"none",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,d.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l-3-2.647z"})]}),"Searching..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add to ","CHECK_OUT"===G?"Checkout":"Checkin"," Queue"]})}),(0,d.jsx)("div",{className:"text-center",children:(0,d.jsx)("p",{className:"text-xs text-gray-600 dark:text-brand-secondary-text leading-relaxed",children:"Scan with camera or manually enter asset identifiers"})})]}),C&&(0,d.jsx)("div",{className:"p-4 bg-gradient-to-r from-red-50 to-red-100/50 border border-red-200 rounded-xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:(0,d.jsxs)("p",{className:"text-sm text-red-800 flex items-center font-medium",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-3 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),C]})}),E&&(0,d.jsx)("div",{className:"p-4 bg-gradient-to-r from-green-50 to-green-100/50 border border-green-200 rounded-xl shadow-sm animate-in slide-in-from-top-2 duration-300",children:(0,d.jsxs)("p",{className:"text-sm text-green-800 flex items-center font-medium",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-3 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),E]})})]})]})}),(0,d.jsxs)("div",{className:"lg:col-span-2",children:[(0,d.jsx)(n,{onPresetSelect:T,onAddMissingItems:U,onOpenSubstitutions:(a,b,c)=>{P({presetId:a,presetName:b,substitutions:c}),N(!0)},isDetecting:K}),(0,d.jsxs)("div",{className:"bg-gray-900/5 backdrop-blur-sm rounded-2xl border border-gray-600/50 shadow-xl shadow-gray-200/20 transition-all duration-300 hover:shadow-2xl hover:shadow-gray-200/30:shadow-gray-900/60",children:[(0,d.jsx)("div",{className:"p-8 border-b border-gray-600/50",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"}),(0,d.jsxs)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-brand-secondary-text bg-clip-text text-transparent",children:["Cart Items (",h.items.length,")"]})]}),(0,d.jsxs)("p",{className:"text-sm text-brand-primary-text ml-5",children:[Y.length>0&&(0,d.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 mr-2",children:[Y.length," to check out"]}),X.length>0&&(0,d.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[X.length," to check in"]})]})]}),h.items.length>0&&(0,d.jsx)("button",{onClick:q,className:"px-6 py-3 text-red-600 hover:bg-gray-100 dark:hover:bg-gray-100 dark:bg-gray-800 rounded-xl transition-all duration-200 text-sm font-semibold shadow-sm hover:shadow-md transform hover:scale-[1.02] border border-red-200",children:"Clear All"})]})}),(0,d.jsx)("div",{className:"p-8",children:0===h.items.length?(0,d.jsxs)("div",{className:"text-center py-16",children:[(0,d.jsx)("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center mb-6",children:(0,d.jsx)("svg",{className:"w-12 h-12 text-white/50 hover:text-white/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),(0,d.jsx)("h3",{className:"text-xl font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-brand-secondary-text bg-clip-text text-transparent mb-3",children:"Ready to scan"}),(0,d.jsx)("p",{className:"text-brand-primary-text max-w-sm mx-auto leading-relaxed",children:"Use the scanner or enter asset codes to start building your cart"})]}):(0,d.jsxs)("div",{className:"space-y-6",children:[Y.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,d.jsx)("div",{className:"p-2 bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded-lg transition-colors",children:(0,d.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,d.jsxs)("h3",{className:"text-xl font-bold text-orange-700",children:["Check Out Queue (",Y.length,")"]})]}),(0,d.jsx)("div",{className:"bg-gradient-to-r from-orange-50/30 to-orange-100/20 rounded-xl border border-orange-200/50 overflow-hidden",children:Y.map((a,b)=>(0,d.jsx)("div",{className:`flex items-center justify-between p-4 hover transition-all duration-200 ${b!==Y.length-1?"border-b border-orange-200/30":""}`,children:(0,d.jsxs)("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:a.asset.imageUrl?(0,d.jsx)("img",{src:a.asset.imageUrl,alt:Q(a.asset),className:"w-12 h-12 object-cover rounded-lg border border-orange-200"}):(0,d.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-100 to-orange-200 rounded-lg flex items-center justify-center border border-orange-200",children:(0,d.jsx)("span",{className:"text-lg",children:"\uD83D\uDCE6"})})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("h4",{className:"font-semibold text-brand-primary-text text-base mb-1",children:a.asset.name}),a.asset.description&&(0,d.jsx)("p",{className:"text-xs text-white/50 hover:text-white/80 transition-colors overflow-hidden leading-relaxed",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:a.asset.description})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-brand-primary-text",children:[(0,d.jsxs)("span",{className:"flex items-center",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),a.asset.category.replace("_"," ")]}),a.asset.serialNumber&&(0,d.jsxs)("span",{className:"flex items-center truncate",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"S/N: ",a.asset.serialNumber]}),a.asset.location&&(0,d.jsxs)("span",{className:"flex items-center truncate",children:[(0,d.jsxs)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.asset.location]}),(a.asset.currentValue||a.asset.purchasePrice)&&(0,d.jsxs)("span",{className:"flex items-center font-medium text-orange-700 col-span-2",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Value: $",(a.asset.currentValue||a.asset.purchasePrice)?.toLocaleString()]})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,d.jsx)("span",{className:"text-xs font-medium text-orange-700 bg-orange-900/30 px-2 py-1 rounded-full",children:"Checking Out"}),(0,d.jsx)("button",{onClick:()=>p(a.assetId),className:"text-red-400 hover p-2 rounded-lg hover transition-all duration-200 transform hover:scale-110",title:"Remove from cart",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},a.assetId))})]}),X.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,d.jsx)("div",{className:"p-2 bg-white/5 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 rounded-lg transition-colors",children:(0,d.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,d.jsxs)("h3",{className:"text-xl font-bold text-green-700",children:["Check In Queue (",X.length,")"]})]}),(0,d.jsx)("div",{className:"bg-gradient-to-r from-green-50/30 to-green-100/20 rounded-xl border border-green-200/50 overflow-hidden",children:X.map((a,b)=>(0,d.jsx)("div",{className:`flex items-center justify-between p-4 hover transition-all duration-200 ${b!==X.length-1?"border-b border-green-200/30":""}`,children:(0,d.jsxs)("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:a.asset.imageUrl?(0,d.jsx)("img",{src:a.asset.imageUrl,alt:Q(a.asset),className:"w-12 h-12 object-cover rounded-lg border border-green-200"}):(0,d.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-green-200 rounded-lg flex items-center justify-center border border-green-200",children:(0,d.jsx)("span",{className:"text-lg",children:"\uD83D\uDCE6"})})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("h4",{className:"font-semibold text-brand-primary-text text-base mb-1",children:a.asset.name}),a.asset.description&&(0,d.jsx)("p",{className:"text-xs text-white/50 hover:text-white/80 transition-colors overflow-hidden leading-relaxed",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:a.asset.description})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-brand-primary-text",children:[(0,d.jsxs)("span",{className:"flex items-center",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),a.asset.category.replace("_"," ")]}),a.asset.serialNumber&&(0,d.jsxs)("span",{className:"flex items-center truncate",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"S/N: ",a.asset.serialNumber]}),a.asset.location&&(0,d.jsxs)("span",{className:"flex items-center truncate",children:[(0,d.jsxs)("svg",{className:"w-3 h-3 mr-1 text-white/50 hover:text-white/80 transition-colors flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),a.asset.location]}),(a.asset.currentValue||a.asset.purchasePrice)&&(0,d.jsxs)("span",{className:"flex items-center font-medium text-green-700 col-span-2",children:[(0,d.jsx)("svg",{className:"w-3 h-3 mr-1 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Value: $",(a.asset.currentValue||a.asset.purchasePrice)?.toLocaleString()]})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,d.jsx)("span",{className:"text-xs font-medium text-green-700 bg-green-100 px-2 py-1 rounded-full",children:"Checking In"}),(0,d.jsx)("button",{onClick:()=>p(a.assetId),className:"text-red-400 hover p-2 rounded-lg hover transition-all duration-200 transform hover:scale-110",title:"Remove from cart",children:(0,d.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},a.assetId))})]})]})}),h.items.length>0&&(0,d.jsx)("div",{className:"p-8 border-t border-gray-600/50 bg-gradient-to-r from-gray-50/50 to-gray-100/30 backdrop-blur-sm",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"text-sm text-brand-primary-text",children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,d.jsxs)("span",{children:[(0,d.jsx)("span",{className:"font-semibold text-brand-primary-text text-lg",children:h.items.length}),(0,d.jsx)("span",{className:"ml-1",children:"total items ready to process"})]})]})}),(0,d.jsxs)("button",{onClick:()=>J(!0),className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl font-semibold transition-all duration-200 flex items-center shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 transform hover:scale-[1.02]",children:[(0,d.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Process All Transactions"]})]})})]})]})]})]}),(0,d.jsx)(l.A,{isOpen:y,onClose:()=>z(!1),onScanSuccess:(a,b)=>{console.log(`Scanned: ${a} (${b})`),z(!1),x(a),R(a)},onScanError:a=>{console.error("Scan error:",a),D("Camera scanning error. Please try manual entry.")}}),(0,d.jsx)(m,{isOpen:I,onClose:()=>J(!1),onConfirm:S}),(0,d.jsx)(o,{isOpen:M,onClose:()=>{N(!1),P(null)},onConfirm:W,availableSubstitutions:O?.substitutions||[],presetName:O?.presetName||""})]})}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68502:(a,b,c)=>{Promise.resolve().then(c.bind(c,51594))},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[2073,7332,5418,4765,807,4035],()=>b(b.s=18845));module.exports=c})();